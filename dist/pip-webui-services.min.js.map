{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/index.ts","src/routing/BackDecorator.ts","src/routing/RedirectDecorator.ts","src/routing/RoutingEvents.ts","src/routing/index.ts","src/session/IdentityService.ts","src/session/SessionService.ts","src/session/index.ts","src/transactions/Transaction.ts","src/transactions/TransactionError.ts","src/transactions/TransactionService.ts","src/transactions/TransactionStrings.ts","src/transactions/index.ts","src/translate/TranslateDirective.ts","src/translate/TranslateFilter.ts","src/translate/TranslateService.ts","src/translate/Translation.ts","src/translate/index.ts","src/utilities/Codes.ts","src/utilities/Format.ts","src/utilities/PageResetService.ts","src/utilities/ScrollService.ts","src/utilities/SystemInfo.ts","src/utilities/Tags.ts","src/utilities/TimerService.ts","src/utilities/index.ts"],"names":["f","exports","module","define","amd","g","window","global","self","this","pip","services","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","angular","__export","captureStateTranslations","$rootScope","$on","event","toState","toParams","fromState","fromParams","CurrentState","name","url","params","PreviousState","decorateBackStateService","$delegate","$window","goBack","history","back","goBackAndSelect","state","_","cloneDeep","extend","go","addBackStateDecorator","$provide","decorator","$inject","run","3","decorateRedirectStateProvider","redirect","RedirectedStates","addRedirectStateProviderDecorator","$timeout","isNull","preventDefault","transitionTo","location","addRedirectStateDecorator","config","4","hookRoutingEvents","$log","$state","RoutingVar","error","unfoundState","to","5","m","./RedirectDecorator","./RoutingEvents","6","IdentityRootVar","IdentityChangedEvent","IdentityService","setRootVar","identity","_setRootVar","_identity","_rootScope","_log","prototype","value","$emit","debug","JSON","stringify","enumerable","configurable","IdentityProvider","_service","get","set","$get","provider","SessionRootVar","SessionOpenedEvent","SessionClosedEvent","SessionService","session","_session","defineProperty","isOpened","open","fullReset","partialReset","close","oldSession","SessionProvider","8","./SessionService","9","Transaction","scope","_scope","_id","_operation","_progress","_error","message","reset","busy","failed","empty","aborted","id","begin","operation","Date","getTime","toString","update","progress","Math","max","abort","decode","10","TransactionError","details","cause","stack_trace","data","statusText","status","TransactionService","_transactions","create","transaction","Transaction_1","12","configureTransactionStrings","$injector","has","setTranslations","ENTERING","PROCESSING","LOADING","SAVING","pipTranslate","13","./TransactionError","./TransactionService","./TransactionStrings","14","restrict","key1","key2","link","element","attrs","key","translate","text","html","directive","translateDirective","translateHtmlDirective","translateFilter","optionalTranslateFilter","filter","language","__extends","d","b","__","constructor","p","hasOwnProperty","Object","LanguageRootVar","LanguageChangedEvent","TranslateService","translation","persist","$mdDateLocale","_persist","_translation","_window","_mdDateLocale","localStorage","getItem","save","changeLocale","locale","localeDate","moment","localeData","months","isArray","_months","format","shortMonths","_monthsShort","days","_weekdays","shortDays","_weekdaysMin","firstDayOfWeek","_week","dow","setItem","PageResetService_1","ResetPageEvent","use","translations","translateArray","keys","translateSet","keyProp","valueProp","translateObjects","items","translateWithPrefix","prefix","translateSetWithPrefix","translateSetWithPrefix2","_super","_this","TranslateProvider","Translation","./Translation","17","en","ru","es","pt","de","fr","_language","map","_translations","isUndefined","values","k","push","each","item","replace","toUpperCase","18","./TranslateFilter","./TranslateService","19","Codes","hash","result","charCodeAt","verification","random","substr","20","Format","cache","sample","maxLength","indexOf","substring","strRepeat","str","qty","getType","variable","slice","toLowerCase","fmt","match","parse_tree","arg_names","exec","_fmt","field_list","replacement_field","field_match","argv","tree_length","node_type","output","arg","cursor","sprintf","test","String","fromCharCode","parseInt","toExponential","parseFloat","toFixed","abs","pad_character","charAt","pad_length","pad","join","_i","arguments","args","parseFormat","21","hookResetEvents","pipPageReset","ResetAreaEvent","area","resetArea","ResetRootVar","ResetAreaRootVar","PageResetService","_timeout","performReset","scrollTo","parentElement","childElement","animationDuration","undefined","setTimeout","$","position","modDiff","scrollTop","top","animate","ScrollService","SystemInfo","ua","navigator","userAgent","search","version","browserName","browser","split","osAll","osAndroid","err","isDesktop","platform","isMobile","isCordova","isSupported","supported","edge","opera","chrome","browserVersion","service","Tags","normalizeOne","tag","trim","compressOne","equal","tag1","tag2","normalizeAll","tags","isString","compressAll","entity","searchFields","field","hashTags","concat","uniq","TimerEvent","timeout","DefaultEvents","TimerService","$interval","_started","_events","_interval","isStarted","addEvent","existingEvent","find","newEvent","startEvent","removeEvent","stopEvent","splice","clearEvents","stop","interval","cancel","ex","start"],"mappings":"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","file":"pip-webui-services.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","﻿'use strict';\n\nimport './translate';\nimport './session';\nimport './transactions';\nimport './routing';\nimport './utilities';\n\nangular.module('pipServices', [\n    'pipTranslate',\n    'pipSession',\n    'pipTransaction',\n    'pipRouting',\n    'pipFormat',\n    'pipTimer',\n    'pipScroll',\n    'pipTags',\n    'pipCodes',\n    'pipSystemInfo',\n    'pipPageReset'\n]);\n\nexport * from './translate';\nexport * from './session';\nexport * from './transactions';\nexport * from './routing';\nexport * from './utilities';\n","'use strict';\n\nexport let CurrentState: any;\nexport let PreviousState: any;\n\nfunction captureStateTranslations($rootScope: ng.IRootScopeService) {\n    \"ngInject\";\n\n    $rootScope.$on('$stateChangeSuccess',\n        (event, toState, toParams, fromState, fromParams) => {\n            CurrentState = {\n                name: toState.name, \n                url: toState.url, \n                params: toParams\n            };\n\n            PreviousState = {\n                name: fromState.name, \n                url: fromState.url, \n                params: fromParams\n            };\n        }\n    );\n\n}\n\nfunction decorateBackStateService($delegate, $window: ng.IWindowService) {\n    \"ngInject\";\n\n    $delegate.goBack = goBack;\n    $delegate.goBackAndSelect = goBackAndSelect;\n\n    return $delegate;\n    //////////////////////////////////////////////////\n\n    function goBack(): void {\n        $window.history.back()\n    }\n\n    function goBackAndSelect(params: any): void {\n        if (PreviousState != null \n            && PreviousState.name != null) {\n\n            let state = _.cloneDeep(PreviousState);\n\n            // Override selected parameters\n            state.params = _.extend(state.params, params);\n\n            $delegate.go(state.name, state.params);\n        } else {\n            $window.history.back();\n        }\n    }\n}\n\nfunction addBackStateDecorator($provide) {\n    $provide.decorator('$state', decorateBackStateService);\n}\n\nangular\n    .module('pipRouting')\n    .config(addBackStateDecorator)\n    .run(captureStateTranslations);\n    ","'use strict';\n\nlet RedirectedStates: any = {};\n\nfunction decorateRedirectStateProvider($delegate) {\n    \"ngInject\";\n\n    $delegate.redirect = redirect;\n\n    return $delegate;\n    /////////////////////////////////////////////\n\n    // Specify automatic redirect from one state to another\n    function redirect(fromState, toState) {\n        RedirectedStates[fromState] = toState;  \n        return this;\n    }\n}\n\nfunction addRedirectStateProviderDecorator($provide) {\n    \"ngInject\";\n\n    $provide.decorator('$state', decorateRedirectStateProvider);\n}\n\nfunction decorateRedirectStateService($delegate, $timeout) {\n    \"ngInject\";\n\n    $delegate.redirect = redirect;\n    \n    return $delegate;\n    ////////////////////////////////\n    \n    // Todo: Move this code directly to event handler?\n    // Todo: Nothing calls this code!!\n    function redirect(event, state, params) {\n        let toState = RedirectedStates[state.name];\n        if (_.isFunction(toState)) {\n            toState = toState(state.name, params);\n\n            if (_.isNull(toState))\n                throw new Error('Redirected toState cannot be null');\n        }\n\n        if (!!toState) {\n            $timeout(() => {\n                event.preventDefault();\n                $delegate.transitionTo(toState, params, {location: 'replace'});\n            });\n\n            return true;\n        }\n\n        return false;\n    }\n}\n\nfunction addRedirectStateDecorator($provide) {\n    \"ngInject\";\n\n    $provide.decorator('$state', decorateRedirectStateService);\n}\n\nangular\n    .module('pipRouting')\n    .config(addRedirectStateProviderDecorator)\n    .config(addRedirectStateDecorator);\n    ","'use strict';\n\nexport let RoutingVar: string = \"$routing\";\n\nfunction hookRoutingEvents(\n    $rootScope: ng.IRootScopeService,\n    $log: ng.ILogService,\n    $state: ng.ui.IStateService\n) {\n    \"ngInject\";\n\n    $rootScope.$on('$stateChangeStart',\n        (event, toState, toParams, fromState, fromParams) => {\n            $rootScope[RoutingVar] = true;\n        }\n    );\n\n    $rootScope.$on('$stateChangeSuccess',\n        (event, toState, toParams, fromState, fromParams) => {\n            // Unset routing variable to disable page transition\n            $rootScope[RoutingVar] = false;                \n        }\n    );\n\n    // Intercept route error\n    $rootScope.$on('$stateChangeError',\n        (event, toState, toParams, fromState, fromParams, error) => {\n            // Unset routing variable to disable page transition\n            $rootScope[RoutingVar] = false;\n\n            $log.error('Error while switching route to ' + toState.name);\n            $log.error(error);\n        }\n    );\n\n    // Intercept route error\n    $rootScope.$on('$stateNotFound',\n        function(event, unfoundState, fromState, fromParams) {\n            event.preventDefault();\n\n            $rootScope[RoutingVar] = false;\n\n            // Todo: Move to errors\n            $state.go('errors_missing_route',  {\n                    unfoundState: unfoundState,\n                    fromState : {\n                        to: fromState ? fromState.name : '',\n                        fromParams: fromParams\n                    }\n                }\n            );\n        }\n    );\n\n}\n\nangular\n    .module('pipRouting')\n    .run(hookRoutingEvents);\n    ","'use strict';\n\nangular.module('pipRouting', ['ui.router']);\n\nimport './BackDecorator';\nimport './RedirectDecorator';\nimport './RoutingEvents';\n\nexport * from './BackDecorator';\nexport * from './RoutingEvents';\n","'use strict';\n\nexport let IdentityRootVar = \"$identity\";\nexport let IdentityChangedEvent = \"pipIdentityChanged\";\n\nexport interface IIdentity {\n    id: string;\n    full_name: string;\n    details: string;\n    email: string;\n    photo_url: string;\n    groups: string[];\n}\n\nexport interface IIdentityService {\n    identity: any;\n}\n\nexport interface IIdentityProvider extends ng.IServiceProvider {\n    setRootVar: boolean;\n    identity: any;\n}\n\n\nclass IdentityService implements IIdentityService {\n    private _identity: any;\n    private _setRootVar: boolean;\n    private _rootScope: ng.IRootScopeService;\n    private _log: ng.ILogService;\n\n    public constructor(\n        setRootVar: boolean,\n        identity: any,\n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService\n    ) {\n        this._setRootVar = setRootVar;\n        this._identity = identity;\n        this._rootScope = $rootScope;\n        this._log = $log;\n\n        this.setRootVar();\n    }\n\n    private setRootVar(): void {\n        if (this._setRootVar)\n            this._rootScope[IdentityRootVar] = this._identity;\n    }\n\n    public get identity(): any {\n        return this._identity;\n    }\n\n    public set identity(value: any) {\n        this._identity = value;\n        this.setRootVar();\n        this._rootScope.$emit(IdentityChangedEvent, this._identity);\n\n        let identity: any = value || {};\n        this._log.debug(\"Changed identity to \" + JSON.stringify(identity));\n    }\n}\n\nclass IdentityProvider implements IdentityProvider {\n    private _setRootVar = true;\n    private _identity: any = null;\n    private _service: IdentityService = null;\n\n    public constructor() { }\n\n    public get setRootVar(): boolean {\n        return this._setRootVar;  \n    }\n\n    public set setRootVar(value: boolean) {\n        this._setRootVar = !!value;\n    }\n\n    public get identity(): any {\n        return this._identity;  \n    }\n\n    public set identity(value: any) {\n        this._identity = value;\n    }\n\n    public $get(\n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService\n    ): any {\n        \"ngInject\";\n\n        if (this._service == null)\n            this._service = new IdentityService(this._setRootVar, this._identity, $rootScope, $log);\n\n        return this._service;\n    }\n\n}\n\nangular\n    .module('pipSession')\n    .provider('pipIdentity', IdentityProvider);\n","'use strict';\n\nexport const SessionRootVar = \"$session\";\nexport const SessionOpenedEvent = \"pipSessionOpened\";\nexport const SessionClosedEvent = \"pipSessionClosed\";\n\nexport interface ISessionService {\n    session: any;\n    isOpened(): boolean;\n\n    open(session: any): void;\n    close(): void;\n}\n\nexport interface ISessionProvider extends ng.IServiceProvider {\n    setRootVar: boolean;\n    session: any;\n}\n\nclass SessionService implements ISessionService {\n    private _setRootVar: boolean;\n    private _session: any;\n    private _rootScope: ng.IRootScopeService;\n    private _log: ng.ILogService;\n\n    public constructor(\n        setRootVar: boolean, \n        session: any, \n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService\n    ) {\n        this._setRootVar = setRootVar;\n        this._session = session;\n        this._rootScope = $rootScope;\n        this._log = $log;\n\n        this.setRootVar();\n    }\n    \n    private setRootVar(): void {\n        if (this._setRootVar)\n            this._rootScope[SessionRootVar] = this._session;\n    }\n\n    public get session(): any {\n        return this._session;\n    }\n\n    public isOpened(): boolean {\n        return this._session != null;\n    }\n\n    public open(session: any, fullReset: boolean = false, partialReset: boolean = false) {\n        if (session == null)\n            throw new Error(\"Session cannot be null\");\n\n        this._session = session;\n        this.setRootVar();\n        this._rootScope.$emit(SessionOpenedEvent, session);\n\n        this._log.debug(\"Opened session \" + session);\n    }\n\n    public close(fullReset: boolean = false, partialReset: boolean = false) {\n        let oldSession = this._session;\n\n        this._session = null;\n        this.setRootVar();\n        this._rootScope.$emit(SessionClosedEvent, oldSession);\n\n        this._log.debug(\"Closed session \" + oldSession);\n    }\n}\n\nclass SessionProvider implements ISessionProvider {\n    private _setRootVar = true;\n    private _session: any = null;\n    private _service: SessionService = null;\n\n    public constructor() { }\n\n    public get setRootVar(): boolean {\n        return this._setRootVar;  \n    }\n\n    public set setRootVar(value: boolean) {\n        this._setRootVar = !!value;\n    }\n\n    public get session(): any {\n        return this._session;  \n    }\n\n    public set session(value: any) {\n        this._session = value;\n    }\n\n    public $get(\n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService\n    ): any {\n        \"ngInject\";\n\n        if (this._service == null)\n            this._service = new SessionService(this._setRootVar, this._session, $rootScope, $log);\n\n        return this._service;\n    }\n}\n\nangular\n    .module('pipSession')\n    .provider('pipSession', SessionProvider); \n","'use strict';\n\nangular.module('pipSession', []);\n\nimport './IdentityService';\nimport './SessionService';\n\nexport * from './IdentityService';\nexport * from './SessionService';\n","'use strict';\n\nimport { TransactionError } from './TransactionError'\n\nexport class Transaction {\n    private _scope: string = null;\n    private _id: string = null;\n    private _operation: string = null;\n    private _error: TransactionError = new TransactionError();\n    private _progress: number = 0;\n\n    public constructor(scope: string) {\n        this._scope = scope;\n    }\n\n    public get scope(): string {\n        return this._scope;\n    }\n\n    public get id(): string {\n        return this._id;\n    }\n\n    public get operation(): string {\n        return this._operation;\n    }\n\n    public get progress(): number {\n        return this._progress;\n    }\n\n    public get error(): TransactionError {\n        return this._error;\n    }\n\n    public get errorMessage(): string {\n        return this._error.message;\n    }\n\n    public reset(): void {\n        this._id = null;\n        this._operation = null;\n        this._progress = 0;\n        this._error.reset();\n    }\n\n    public busy(): boolean {\n        return this._id != null;\n    }\n\n    public failed(): boolean {\n        return !this._error.empty();\n    }\n\n    public aborted(id: string): boolean {\n        return this._id != id;\n    }\n\n    public begin(operation: string): string {\n        // Transaction is already running\n        if (this._id != null) return null;\n\n        this._id = new Date().getTime().toString();\n        this._operation = operation || 'PROCESSING'\n        this._error.reset();\n\n        return this._id;\n    }\n\n    public update(progress: number): void {\n        this._progress = Math.max(progress, 100);\n    }\n\n    public abort(): void {\n        this._id = null;\n        this._error.reset();\n    }\n\n    public end(error?: any): void {\n        this._error.decode(error);\n        this._id = null;\n    }\n}\n","'use strict';\n\nexport class TransactionError {\n    public code: string;\n    public message: string;\n    public details: any;\n    public cause: string;\n    public stack_trace: string;\n\n    public constructor(error?: any) {\n        if (error != null)\n            this.decode(error);\n    }\n\n    public reset(): void {\n        this.code = null;\n        this.message = null;\n        this.details = null;\n        this.cause = null;\n        this.stack_trace = null;\n    }\n\n    public empty(): boolean {\n        return this.message = null && this.code == null;\n    }\n\n    public decode(error: any): void {\n        this.reset();\n\n        if (error == null) return;\n\n        // Process regular messages\n        if (error.message) \n            this.message = error.message;\n\n        // Process server application errors\n        if (error.data) {\n            if (error.data.code) { \n                // process server error codes here\n                this.message = this.message || 'ERROR_' + error.data.code;\n                this.code = this.code || error.data.code;\n            }\n\n            if (error.data.message)\n                this.message = this.message || error.data.message;\n\n            this.message = this.message || error.data;\n            this.details = this.details || error.data;\n\n            this.cause = error.data.cause;\n            this.stack_trace = error.data.stack_trace;\n            this.details = error.data.details;            \n        }\n\n        // Process standard HTTP errors\n        if (error.statusText)\n            this.message = this.message || error.statusText;\n\n        if (error.status) {\n            this.message = this.message || 'ERROR_' + error.status;\n            this.code = this.code || error.status;\n        }\n        \n        this.message = this.message || error;\n        this.details = this.details || error;\n    }\n}\n","'use strict';\n\nimport { Transaction } from './Transaction';\n\nexport interface ITransactionService {\n    create(scope?: string): Transaction;\n    get(scope?: string): Transaction;\n}\n\nclass TransactionService implements ITransactionService {\n    private _transactions: any = {};\n\n    public constructor() {}\n\n    public create(scope?: string): Transaction {\n        let transaction = new Transaction(scope);\n        \n        if (scope != null)\n            this._transactions[scope] = transaction;\n\n        return transaction;\n    }\n\n    public get(scope?: string): Transaction {\n        let transaction: Transaction = scope != null ? <Transaction>this._transactions[scope] : null;\n\n        if (transaction == null) {\n            transaction = new Transaction(scope);\n            if (scope != null)\n                this._transactions[scope] = transaction;\n        }\n\n        return transaction;\n    }\n}\n\nangular\n    .module('pipTransaction')\n    .service('pipTransaction', TransactionService);\n","'use strict';\n\nfunction configureTransactionStrings($injector) {\n    \"ngInject\";\n\n    let pipTranslate = $injector.has('pipTranslateProvider') ? $injector.get('pipTranslateProvider') : null;\n\n    if (pipTranslate) {\n        pipTranslate.setTranslations('en', {\n            'ENTERING': 'Entering...',\n            'PROCESSING': 'Processing...',\n            'LOADING': 'Loading...',\n            'SAVING': 'Saving...'\n        });\n\n        pipTranslate.setTranslations('ru', {\n            'ENTERING': 'Вход в систему...',\n            'PROCESSING': 'Обрабатывается...',\n            'LOADING': 'Загружается...',\n            'SAVING': 'Сохраняется...'\n        });   \n    }\n    \n}\n\nangular\n    .module('pipTransaction')\n    .config(configureTransactionStrings);\n","'use strict';\n\nangular.module('pipTransaction', []);\n\nimport './TransactionStrings';\nimport './TransactionError';\nimport './Transaction';\nimport './TransactionService';\n\nexport * from './TransactionError';\nexport * from './Transaction';\nexport * from './TransactionService';\n","'use strict';\n\nfunction translateDirective(pipTranslate): ng.IDirective {\n    \"ngInject\";\n\n    return {\n        restrict: 'EA',\n        scope: {\n            key1: '@pipTranslate',\n            key2: '@key'\n        },\n        link: (scope: any, element: any, attrs: any) => {\n            let key = scope.key1 || scope.key2;\n            let value = pipTranslate.translate(key);\n            element.text(value);\n        }\n    };\n}\n\nfunction translateHtmlDirective(pipTranslate): ng.IDirective {\n    \"ngInject\";\n\n    return {\n        restrict: 'EA',\n        scope: {\n            key1: '@pipTranslateHtml',\n            key2: '@key'\n        },\n        link: (scope: any, element: any, attrs: any) => {\n            let key = scope.key1 || scope.key2;\n            let value = pipTranslate.translate(key);\n            element.html(value);\n        }\n    };\n}\n\nangular\n    .module('pipTranslate')\n    .directive('pipTranslate', translateDirective)\n    .directive('pipTranslateHtml', translateHtmlDirective);\n","'use strict';\n\nfunction translateFilter(pipTranslate) {\n    \"ngInject\";\n\n    return function (key) {\n        return pipTranslate.translate(key) || key;\n    }\n}\n\nfunction optionalTranslateFilter($injector) {\n    \"ngInject\";\n\n    let pipTranslate = $injector.has('pipTranslate') \n        ? $injector.get('pipTranslate') : null;\n\n    return function (key) {\n        return pipTranslate  ? pipTranslate.translate(key) || key : key;\n    }\n}\n\nangular\n    .module('pipTranslate')\n    .filter('translate', translateFilter);\n","﻿'use strict';\n\nimport { Translation } from './Translation';\nimport { ResetPageEvent } from '../utilities/PageResetService';\n\nexport let LanguageRootVar = \"$language\";\nexport let LanguageChangedEvent = \"pipLanguageChanged\";    \n\nexport interface ITranslateService {\n    language: string;\n\n    use(language: string): string;\n    setTranslations(language: string, translations: any): void;\n    translations(language: string, translations: any): void;\n\n    translate(key: string): string;\n    translateArray(keys: string[]): string[];\n    translateSet(keys: string[], keyProp: string, valueProp: string): any[];\n    translateObjects(items: any[], keyProp: string, valueProp: string): any[];\n    translateWithPrefix(prefix: string, key: string);\n    translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string);\n    translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string);\n}\n\nexport interface ITranslateProvider extends ITranslateService, ng.IServiceProvider {\n}\n\nclass TranslateService implements ITranslateService {\n    private _translation: Translation;\n    private _setRootVar: boolean;\n    private _persist: boolean;\n    private _rootScope: ng.IRootScopeService;\n    private _log: ng.ILogService;\n    private _window: ng.IWindowService;\n    private _mdDateLocale;\n\n    public constructor(\n        translation: Translation,\n        setRootVar: boolean,\n        persist: boolean,\n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService,\n        $window: ng.IWindowService,\n        $mdDateLocale: angular.material.IDateLocaleProvider,\n    ) {\n        this._setRootVar = setRootVar;\n        this._persist = persist;\n        this._translation = translation;\n        this._rootScope = $rootScope;\n        this._log = $log;\n        this._window = $window;\n        this._mdDateLocale = $mdDateLocale;\n\n        if (this._persist && this._window.localStorage)\n            this._translation.language = this._window.localStorage.getItem('language') || this._translation.language;\n\n        this._log.debug(\"Set language to \" + this._translation.language);\n\n        this.save();\n    }\n\n    private changeLocale(locale: string) {\n        if (!locale) return;\n\n        // var localeDate: moment.MomentLanguageData;\n        var localeDate: any;\n\n        moment.locale(locale);\n        localeDate = moment.localeData();\n\n        this._mdDateLocale.months = angular.isArray(localeDate._months) ? localeDate._months : localeDate._months.format;\n        this._mdDateLocale.shortMonths = angular.isArray(localeDate._monthsShort) ? localeDate._monthsShort : localeDate._monthsShort.format;\n        this._mdDateLocale.days = angular.isArray(localeDate._weekdays) ? localeDate._weekdays : localeDate._weekdays.format;\n        this._mdDateLocale.shortDays = localeDate._weekdaysMin;\n        this._mdDateLocale.firstDayOfWeek = localeDate._week.dow;\n    }\n\n    private save(): void {\n        if (this._setRootVar)\n            this._rootScope[LanguageRootVar] = this._translation.language;\n\n        if (this._persist && this._window.localStorage != null)\n            this._window.localStorage.setItem('language', this._translation.language);\n    }\n\n    public get language(): string {\n        return this._translation.language;\n    }\n\n    public set language(value: string) {\n        if (value != this._translation.language) {\n            this._translation.language = value;\n            \n            this._log.debug(\"Changing language to \" + value);\n\n            this.changeLocale(this._translation.language);\n            this.save();   \n\n            this._rootScope.$emit(LanguageChangedEvent, value);\n            this._rootScope.$emit(ResetPageEvent);\n        }\n    }\n\n    public use(language: string): string {\n        if (language != null)\n            this.language = language;\n        return this.language;\n    }\n\n    public setTranslations(language: string, translations: any): void {\n        return this._translation.setTranslations(language, translations);\n    }\n\n    public translations(language: string, translations: any): void {\n        return this._translation.setTranslations(language, translations);\n    }\n\n    public translate(key: string): string {\n        return this._translation.translate(key);\n    }\n\n    public translateArray(keys: string[]): string[] {\n        return this._translation.translateArray(keys);\n    }\n    \n    public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\n        return this._translation.translateSet(keys, keyProp, valueProp);\n    }\n\n    public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\n        return this._translation.translateObjects(items, keyProp, valueProp);\n    }\n\n    public translateWithPrefix(prefix: string, key: string) {\n        return this._translation.translateWithPrefix(prefix, key);\n    }\n\n    public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\n        return this._translation.translateSetWithPrefix(prefix, keys, keyProp, valueProp);\n    }\n\n    public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\n        return this._translation.translateSetWithPrefix2(prefix, keys, keyProp, valueProp);\n    }\n}\n\nclass TranslateProvider extends Translation implements ITranslateProvider {\n    private _translation: Translation;\n    private _setRootVar: boolean = true;\n    private _persist: boolean = true;\n    private _service: TranslateService;\n    \n    public constructor() {\n        super();\n    }\n\n    public get setRootVar(): boolean {\n        return this._setRootVar;  \n    }\n\n    public set setRootVar(value: boolean) {\n        this._setRootVar = !!value;\n    }\n\n    public get persist(): boolean {\n        return this._persist;  \n    }\n\n    public set persist(value: boolean) {\n        this._persist = !!value;\n    }\n\n    public $get(\n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService, \n        $window: ng.IWindowService,\n        $mdDateLocale: angular.material.IDateLocaleProvider\n    ): any {\n        \"ngInject\";\n\n        if (this._service == null) \n            this._service = new TranslateService(this, this._setRootVar, this._persist, $rootScope, $log, $window, $mdDateLocale);\n\n        return this._service;\n    }\n}\n\nfunction initTranslate(pipTranslate: ITranslateService) {\n    pipTranslate.language;\n}\n\nangular\n    .module('pipTranslate')\n    .provider('pipTranslate', TranslateProvider)\n    .run(initTranslate);\n","'use strict';\n\nexport class Translation {\n    protected _language = 'en';\n    protected _translations = {\n        en: {\n            'en': 'English',\n            'ru': 'Russian',\n            'es': 'Spanish',\n            'pt': 'Portuguese',\n            'de': 'German',\n            'fr': 'French'\n        },\n        ru: {\n            'en': 'Английский',\n            'ru': 'Русский',\n            'es': 'Испанский',\n            'pt': 'Португальский',\n            'de': 'Немецкий',\n            'fr': 'Французский'\n        }\n    };\n\n    public constructor() {}\n\n    public get language(): string { return this._language; }\n    public set language(value: string) { this._language = value; }\n\n    public use(language: string): string {\n        if (language != null)\n            this._language = language;\n        return this._language;\n    }\n\n    // Set translation strings for specific language\n    public setTranslations(language: string, translations: any): void {\n        let map = this._translations[language] || {};\n        this._translations[language] = _.extend(map, translations);\n    }\n\n    // Yet another method to set translation strings for specific language\n    public translations(language: string, translations: any): void {\n        this.setTranslations(language, translations);\n    }\n\n    // Translate a string by key using set language\n    public translate(key: string): string {\n        if (_.isNull(key) || _.isUndefined(key)) return '';\n\n        let translations = this._translations[this._language] || {};\n        return translations[key] || key;\n    }\n\n    // Translate an array of strings\n    public translateArray(keys: string[]): string[] {\n        if (_.isNull(keys) || keys.length == 0) return [];\n\n        let values = [];\n        let translations = this._translations[this._language] || {};\n\n        _.each(keys, function (k) {\n            let key = k || '';\n            values.push(translations[key] || key);\n        });\n\n        return values;\n    }\n\n    // Translate an array of strings into array of objects (set)\n    public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\n        if (_.isNull(keys) || keys.length == 0) return [];\n\n        keyProp = keyProp || 'id';\n        valueProp = valueProp || 'name';\n\n        let values: any[] = [];\n        let translations = this._translations[this._language] || {};\n\n        _.each(keys, function (key) {\n            let value: any = {};\n            key = key || '';\n\n            value[keyProp] = key;\n            value[valueProp] = translations[key] || key;\n\n            values.push(value);\n        });\n\n        return values;\n    }\n\n    // Translate a collection of objects\n    public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\n        if (_.isNull(items) || items.length == 0) return [];\n\n        keyProp = keyProp || 'name';\n        valueProp = valueProp || 'nameLocal';\n\n        let translations = this._translations[this._language] || {};\n\n        _.each(items, function (item) {\n            let key = item[keyProp] || '';\n\n            item[valueProp] = translations[key] || key;\n        });\n\n        return items;\n    }\n\n    // Translate a string by key  with prefix using set language todo\n    public translateWithPrefix(prefix: string, key: string) {\n        prefix = prefix ? prefix + '_' : '';\n        key = (prefix + key).replace(/ /g, '_').toUpperCase();\n        if (key == null) return '';\n        let translations = this._translations[this._language] || {};\n        return translations[key] || key;\n    };\n\n    public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\n        if (_.isNull(keys) || keys.length == 0) return [];\n\n        prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() : '';\n        keyProp = keyProp || 'id';\n        valueProp = valueProp || 'name';\n\n        let values = [];\n        let translations = this._translations[this._language] || {};\n\n        _.each(keys, function (key) {\n            let value: any = {}; \n            key = key || '';\n\n            value[keyProp] = key;\n            value[valueProp] = translations[prefix + '_' + key] || key;\n\n            values.push(value);\n        });\n\n        return values;\n    }\n\n    // Translate an array of strings, apply uppercase and replace ' ' => '_'\n    public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\n        if (_.isNull(keys) || keys.length == 0) return [];\n\n        keyProp = keyProp || 'id';\n        valueProp = valueProp || 'name';\n        prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() + '_': '';\n\n        let values = [];\n        let translations = this._translations[this._language] || {};\n\n        _.each(keys, function (key) {\n            let value: any = {};\n            key = key || '';\n\n            value[keyProp] = key;\n            value[valueProp] = translations[prefix + key.replace(/ /g, '_').toUpperCase()]\n                || (prefix + key.replace(/ /g, '_').toUpperCase());\n\n            values.push(value);\n        });\n\n        return values;\n    }\n}\n","'use strict';\n\nangular.module('pipTranslate', []);\n\nimport './Translation';\nimport './TranslateService';\nimport './TranslateFilter';\nimport './TranslateDirective';\n\nexport * from './Translation';\nexport * from './TranslateService';\n","'use strict';\n\nexport interface ICodes {\n    // Simple version of string hashcode\n    hash(value: string): number;\n    // Generates random big number for verification codes\n    verification(): string;\n}\n\n\nclass Codes implements ICodes {\n    // Simple version of string hashcode\n    public hash(value: string): number {\n        if (value == null) return 0;\n        \n        let result = 0;\n        for (let i = 0; i < value.length; i++)\n            result += value.charCodeAt(i);\n\n        return result;\n    }\n\n    // Generates random big number for verification codes\n    public verification(): string {\n        return Math.random().toString(36).substr(2, 10).toUpperCase(); // remove `0.`\n    }\n}\n\nangular\n    .module('pipCodes', [])\n    .service('pipCodes', Codes);\n","'use strict';\n\nexport interface IFormat {\n    // Creates a sample line from a text\n    sample(value: string, maxLength: number): string;\n\n    sprintf(message: string, ...args: any[]): string;\n}\n\n\nclass Format implements IFormat {\n    // Cached for parsed formats\n    private cache = {};\n\n    // Creates a sample line from a text\n    public sample(value: string, maxLength: number): string {\n        if (!value || value == '') return '';\n\n        var length = value.indexOf('\\n');\n        length = length >= 0 ? length : value.length;\n        length = length < maxLength ? value.length : maxLength;\n\n        return value.substring(0, length);\n    }\n\n    private strRepeat(str: string, qty: number): string {\n        if (qty < 1) return '';\n        var result = '';\n        while (qty > 0) {\n            if (qty & 1) result += str;\n            qty >>= 1, str += str;\n        }\n        return result;\n    }\n\n    private getType(variable) {\n        return toString.call(variable).slice(8, -1).toLowerCase();\n    }\n\n    private parseFormat(fmt: string) {\n        let _fmt = fmt, match = [], parse_tree = [], arg_names = 0;\n        while (_fmt) {\n            if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\n                parse_tree.push(match[0]);\n            }\n            else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\n                parse_tree.push('%');\n            }\n            else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\n                if (match[2]) {\n                    arg_names |= 1;\n                    var field_list = [], replacement_field = match[2], field_match = [];\n                    if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                        field_list.push(field_match[1]);\n                        while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\n                            if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1]);\n                            }\n                            else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1]);\n                            }\n                            else {\n                                throw new Error('Unknown error');\n                            }\n                        }\n                    }\n                    else {\n                        throw new Error('Unknown error');\n                    }\n                    match[2] = field_list;\n                }\n                else {\n                    arg_names |= 2;\n                }\n                if (arg_names === 3) {\n                    throw new Error('Mixing positional and named placeholders is not (yet) supported');\n                }\n                parse_tree.push(match);\n            }\n            else {\n                throw new Error('Unknown error');\n            }\n            _fmt = _fmt.substring(match[0].length);\n        }\n        return parse_tree;\n    }\n\n    private format(parse_tree, argv) {\n        let cursor = 0; \n        let tree_length = parse_tree.length; \n        let output = [];\n\n        for (let i = 0; i < tree_length; i++) {\n            let node_type = this.getType(parse_tree[i]);\n            if (node_type === 'string') {\n                output.push(parse_tree[i]);\n            }\n            else if (node_type === 'array') {\n                let match = parse_tree[i]; // convenience purposes only\n                let arg: any;\n                if (match[2]) { // keyword argument\n                    arg = argv[cursor];\n                    for (let k = 0; k < match[2].length; k++) {\n                        if (!arg.hasOwnProperty(match[2][k])) {\n                            throw new Error(this.sprintf('Property \"%s\" does not exist', match[2][k]));\n                        }\n                        arg = arg[match[2][k]];\n                    }\n                } else if (match[1]) { // positional argument (explicit)\n                    arg = argv[match[1]];\n                }\n                else { // positional argument (implicit)\n                    arg = argv[cursor++];\n                }\n\n                if (/[^s]/.test(match[8]) && (this.getType(arg) != 'number')) {\n                    throw new Error(this.sprintf('Expecting number but found %s', this.getType(arg)));\n                }\n                switch (match[8]) {\n                    case 'b': arg = arg.toString(2); break;\n                    case 'c': arg = String.fromCharCode(arg); break;\n                    case 'd': arg = parseInt(arg, 10); break;\n                    case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\n                    case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\n                    case 'o': arg = arg.toString(8); break;\n                    case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;\n                    case 'u': arg = Math.abs(arg); break;\n                    case 'x': arg = arg.toString(16); break;\n                    case 'X': arg = arg.toString(16).toUpperCase(); break;\n                }\n                arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);                \n                let pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\n                let pad_length = match[6] - String(arg).length;\n                let pad = match[6] ? this.strRepeat(pad_character, pad_length) : '';\n                output.push(match[5] ? arg + pad : pad + arg);\n            }\n        }\n        return output.join('');\n    }\n    \n    public sprintf(message: string, ...args: any[]): string {\n        if (!this.cache.hasOwnProperty(message))\n            this.cache[message] = this.parseFormat(message);\n\n        return this.format(this.cache[message], args);\n    }\n}\n\n\nangular\n    .module('pipFormat', [])\n    .service('pipFormat', Format);\n","'use strict';\n\nexport let ResetPageEvent: string = \"pipResetPage\";\nexport let ResetAreaEvent: string = \"pipResetArea\";\n\nexport let ResetRootVar: string = \"$reset\";\nexport let ResetAreaRootVar: string = \"$resetArea\";\n\nexport interface IPageResetService {\n    reset(): void;\n    resetArea(area: string): void;\n}\n\n\nclass PageResetService implements IPageResetService {\n    private _rootScope: ng.IRootScopeService;\n    private _log: ng.ILogService;\n    private _timeout: ng.ITimeoutService;\n\n    public constructor(\n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService, \n        $timeout: ng.ITimeoutService\n    ) {\n        this._rootScope = $rootScope;\n        this._log = $log;\n        this._timeout = $timeout;\n\n        $rootScope[ResetRootVar] = false;\n        $rootScope[ResetAreaRootVar] = null;\n    }\n\n    public reset(): void {\n        this._log.debug(\"Resetting the entire page\");\n        this.performReset(null);\n    }\n\n    public resetArea(area: string): void {\n        this._log.debug(\"Resetting the area \" + area);\n        this.performReset(area);\n    }\n\n    private performReset(area?: string): void {\n        this._rootScope[ResetRootVar] = area == null;\n        this._rootScope[ResetAreaRootVar] = area;\n\n        this._timeout(() => {\n            this._rootScope[ResetRootVar] = false;\n            this._rootScope[ResetAreaRootVar] = null;\n        }, 0);\n    }\n}\n\n\nfunction hookResetEvents(\n    $rootScope: ng.IRootScopeService, \n    pipPageReset: IPageResetService\n) {\n    $rootScope.$on(ResetPageEvent, () => { pipPageReset.reset(); });\n    $rootScope.$on(ResetAreaEvent, (event, area) => { pipPageReset.resetArea(area); });\n}\n\n\nangular.module('pipPageReset', [])\n    .service('pipPageReset', PageResetService)\n    .run(hookResetEvents);\n","'use strict';\n\nexport interface IScrollService {\n    scrollTo(parentElement, childElement, animationDuration): void;\n}\n\nclass ScrollService implements IScrollService {\n\n    public scrollTo(parentElement, childElement, animationDuration): void {\n        if (!parentElement || !childElement) return;\n        if (animationDuration == undefined) animationDuration = 300;\n\n        setTimeout(function () {\n            if (!$(childElement).position()) return;\n            var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\n            if (modDiff < 20) return;\n            var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\n            if (animationDuration > 0)\n                $(parentElement).animate({\n                    scrollTop: scrollTo + 'px'\n                }, animationDuration);\n        }, 100);\n    }\n\n}\n\n\nangular\n    .module('pipScroll', [])\n    .service('pipScroll', ScrollService);\n","'use strict';\n\nexport interface ISystemInfo {\n    browserName: string;\n    browserVersion: string;\n    platform: string;\n    os: string;\n\n    isDesktop(): boolean;\n    isMobile(): boolean;\n    isCordova(): boolean;\n    isSupported(supported?: any): boolean;\n}\n\n\nclass SystemInfo implements ISystemInfo {\n    private _window: ng.IWindowService;\n\n    public constructor($window: ng.IWindowService) {\n        \"ngInject\";\n\n        this._window = $window;\n    }\n\n    // todo add support for iPhone\n    public get browserName(): string {\n        let ua = this._window.navigator.userAgent;\n\n        if (ua.search(/Edge/) > -1) return \"edge\";\n        if (ua.search(/MSIE/) > -1) return \"ie\";\n        if (ua.search(/Trident/) > -1) return \"ie\";\n        if (ua.search(/Firefox/) > -1) return \"firefox\";\n        if (ua.search(/Opera/) > -1) return \"opera\";\n        if (ua.search(/OPR/) > -1) return \"opera\";\n        if (ua.search(/YaBrowser/) > -1) return \"yabrowser\";\n        if (ua.search(/Chrome/) > -1) return \"chrome\";\n        if (ua.search(/Safari/) > -1) return \"safari\";\n        if (ua.search(/Maxthon/) > -1) return \"maxthon\";\n        \n        return \"unknown\";\n    }\n\n    public get browserVersion(): string {\n        let version;\n        let ua = this._window.navigator.userAgent;\n        let browser = this.browserName;\n\n        switch (browser) {\n            case \"edge\":\n                version = (ua.split(\"Edge\")[1]).split(\"/\")[1];\n                break;\n            case \"ie\":\n                version = (ua.split(\"MSIE \")[1]).split(\";\")[0];\n                break;\n            case \"ie11\":\n                browser = \"ie\";\n                version = (ua.split(\"; rv:\")[1]).split(\")\")[0];\n                break;\n            case \"firefox\":\n                version = ua.split(\"Firefox/\")[1];\n                break;\n            case \"opera\":\n                version = ua.split(\"Version/\")[1];\n                break;\n            case \"operaWebkit\":\n                version = ua.split(\"OPR/\")[1];\n                break;\n            case \"yabrowser\":\n                version = (ua.split(\"YaBrowser/\")[1]).split(\" \")[0];\n                break;\n            case \"chrome\":\n                version = (ua.split(\"Chrome/\")[1]).split(\" \")[0];\n                break;\n            case \"safari\":\n                version = (ua.split(\"Version/\")[1]).split(\" \")[0];\n                break;\n            case \"maxthon\":\n                version = ua.split(\"Maxthon/\")[1];\n                break;\n        }\n\n        return version;\n    }\n    \n    public get platform(): string {\n        let ua = this._window.navigator.userAgent;\n\n        if (/iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(ua.toLowerCase())) \n            return 'mobile';\n\n        return 'desktop';\n    }\n\n    public get os(): string {\n        let ua = this._window.navigator.userAgent;\n\n        try {\n            let osAll = (/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(ua.toLowerCase()) || [ua])[0].replace('sunos', 'solaris');\n            let osAndroid = (/(android)/.exec(ua.toLowerCase()) || '');\n            return osAndroid && (osAndroid == 'android' || (osAndroid[0] == 'android')) ? 'android' : osAll;\n        } catch (err) {\n            return 'unknown'\n        }\n    }\n\n    public isDesktop(): boolean {\n        return this.platform == 'desktop';\n    }\n\n    public isMobile(): boolean {\n        return this.platform == 'mobile';\n    }\n\n    // Todo: complete implementation\n    public isCordova(): boolean {\n        return false;\n    }\n\n    // Todo: Move to errors\n    public isSupported(supported?: any): boolean {\n        if (!supported) \n            supported = {\n                edge: 11,\n                ie: 11,\n                firefox: 43, //4, for testing\n                opera: 35,\n                chrome: 47\n            };\n\n        let browser = this.browserName;\n        let version = this.browserVersion;\n        version = version.split(\".\")[0]\n\n        if (browser && supported[browser] && version >= supported[browser]) \n            return true;\n\n        return true;\n    }\n}\n\n\nangular\n    .module('pipSystemInfo', [])\n    .service('pipSystemInfo', SystemInfo);\n","'use strict';\n\nexport interface ITags {\n    normalizeOne(tag: string): string;\n    compressOne(tag: string): string;\n    equal(tag1: string, tag2: string): boolean;\n    normalizeAll(tags: any): string[];\n    compressAll(tags: any): string[];\n    extract(entity: any, searchFields?: string[]): string[];\n}\n\n\nclass Tags implements ITags {\n\n    public normalizeOne(tag: string): string {\n        return tag \n            ? _.trim(tag.replace(/(_|#)+/g, ' '))\n            : null;\n    }\n\n    public compressOne(tag: string): string {\n        return tag\n            ? tag.replace(/( |_|#)/g, '').toLowerCase()\n            : null;\n    }\n\n    public equal(tag1: string, tag2: string): boolean {\n        if (tag1 == null && tag2 == null)\n            return true;\n        if (tag1 == null || tag2 == null)\n            return false;\n        return this.compressOne(tag1) == this.compressOne(tag2);\n    }\n\n    public normalizeAll(tags: any): string[] {\n        if (_.isString(tags))\n            tags = tags.split(/( |,|;)+/);\n\n        tags = _.map(tags, (tag: string) => this.normalizeOne(tag));\n\n        return tags;\n    }\n\n    public compressAll(tags: any): string[] {\n        if (_.isString(tags))\n            tags = tags.split(/( |,|;)+/);\n\n        tags = _.map(tags, (tag: string) => this.compressOne(tag));\n\n        return tags;\n    }\n\n    public extract(entity: any, searchFields?: string[]): string[] {\n        let tags = this.normalizeAll(entity.tags);\n\n        _.each(searchFields, (field) => {\n            let text = entity[field] || '';\n\n            if (text != '') {\n                let hashTags = text.match(/#\\w+/g);\n                tags = tags.concat(this.normalizeAll(hashTags));\n            }\n        });\n\n        return _.uniq(tags);\n    }\n}\n\n\nangular\n    .module('pipTags', [])\n    .service('pipTags', Tags);\n","'use strict';\n\nexport interface ITimerService {\n    isStarted(): boolean;\n\n    addEvent(event: string, timeout: number): void;\n    removeEvent(event: string): void;\n    clearEvents(): void;\n\n    start(): void;\n    stop(): void;\n}\n\n\nclass TimerEvent {\n    public event: string;\n    public timeout: number;\n    public interval: any;\n\n    public constructor(event: string, timeout: number) {\n        this.event = event;\n        this.timeout = timeout;\n    }\n}\n\n\nlet DefaultEvents: TimerEvent[] = [\n    new TimerEvent('pipAutoPullChanges', 60000), // 1 min\n    new TimerEvent('pipAutoUpdatePage', 15000), // 15 sec\n    new TimerEvent('pipAutoUpdateCollection', 300000) // 5 min\n];\n\n\nclass TimerService implements ITimerService {\n    private _rootScope: ng.IRootScopeService;\n    private _log: ng.ILogService;\n    private _interval: ng.IIntervalService;        \n    private _started = false;\n    private _events: TimerEvent[] = _.cloneDeep(DefaultEvents);\n\n    public constructor(\n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService, \n        $interval: ng.IIntervalService\n    ) {\n        \"ngInject\";\n\n        this._rootScope = $rootScope;\n        this._log = $log;\n        this._interval = $interval;\n    }\n\n    public isStarted(): boolean {\n        return this._started;\n    }\n\n    public addEvent(event: string, timeout: number): void {\n        var existingEvent = _.find(this._events, (e) => e.event == event);\n        if (existingEvent != null) return;\n\n        let newEvent = <TimerEvent> {\n            event: event,\n            timeout: timeout\n        };\n        this._events.push(newEvent);\n\n        if (this._started)\n            this.startEvent(newEvent);\n    }\n\n    public removeEvent(event: string): void {\n        for (let i = this._events.length - 1; i >= 0; i--) {\n            let existingEvent = this._events[i];\n            if (existingEvent.event == event) {\n                this.stopEvent(existingEvent);\n                this._events.splice(i, 1);\n            }\n        }\n    }\n\n    public clearEvents(): void {\n        this.stop();\n        this._events = [];\n    }\n\n    private startEvent(event: TimerEvent): void {\n        event.interval = this._interval(\n            () => { \n                this._log.debug('Generated timer event ' + event.event); \n                this._rootScope.$emit(event.event)\n            },\n            event.timeout\n        )\n    }\n\n    private stopEvent(event: TimerEvent): void {\n        if (event.interval != null) {\n            try {\n                this._interval.cancel(event.interval);\n            } catch (ex) {\n                // Do nothing\n            }\n            event.interval = null;\n        }\n    }\n\n    public start(): void {\n        if (this._started) return;\n\n        _.each(this._events, (event) => {\n            this.startEvent(event);\n        });\n\n        this._started = true;\n    }\n\n    public stop(): void {\n        _.each(this._events, (event) => {\n            this.stopEvent(event);\n        });\n\n        this._started = false;\n    }\n}\n\n\nangular.module('pipTimer', [])\n    .service('pipTimer', TimerService);\n","'use strict';\n\nimport './Format';\nimport './TimerService';\nimport './ScrollService';\nimport './Tags';\nimport './Codes';\nimport './SystemInfo';\nimport './PageResetService';\n\nexport * from './Format';\nexport * from './TimerService';\nexport * from './ScrollService';\nexport * from './Tags';\nexport * from './Codes';\nexport * from './SystemInfo';\nexport * from './PageResetService';"]}