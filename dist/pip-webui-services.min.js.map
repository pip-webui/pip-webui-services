{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/ServicesModule.ts","src/routing/back_decorator.ts","src/routing/redirect_decorator.ts","src/routing/routing.ts","src/routing/routing_events.ts","src/scope/scope_error.ts","src/scope/scope_transaction.ts","src/session/identity.ts","src/session/session.ts","src/translate/TranslateDirective.ts","src/translate/TranslateFilter.ts","src/translate/TranslateModule.ts","src/translate/TranslateProvider.ts","src/translate/TranslateService.ts","src/translate/Translation.ts","src/utilities/codes.ts","src/utilities/format.ts","src/utilities/reset.ts","src/utilities/scroll.ts","src/utilities/system_info.ts","src/utilities/tags.ts","src/utilities/timer.ts"],"names":["f","exports","module","define","amd","g","window","global","self","this","pip","services","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","angular","captureStateTranslations","$rootScope","$on","event","toState","toParams","fromState","fromParams","CurrentState","name","url","params","PreviousState","decorateBackStateService","$delegate","$window","goBack","history","back","goBackAndSelect","state","_","cloneDeep","extend","go","addBackStateDecorator","$provide","decorator","$inject","config","run","5","decorateRedirectStateProvider","redirect","RedirectedStates","addRedirectStateProviderDecorator","$timeout","isNull","preventDefault","transitionTo","location","addRedirectStateDecorator","decorateRedirectStateService","6","7","hookRoutingEvents","$log","$state","RoutingVar","error","unfoundState","to","8","factory","initError","scope","errors","message","undefined","details","errorMessage","data","statusText","status","errorCode","scopeObject","errorDetails","console","isObject","createError","$injector","pipTranslate","has","get","setTranslations","ENTERING","PROCESSING","LOADING","SAVING","pipError","initTransaction","transactions","id","operation","createTransaction","reset","transaction","empty","Date","getTime","err","set","IdentityRootVar","IdentityChangedEvent","IdentityService","setRootVar","identity","_setRootVar","_identity","_rootScope","prototype","defineProperty","value","$broadcast","enumerable","configurable","IdentityProvider","_service","$get","SessionRootVar","SessionOpenedEvent","SessionClosedEvent","SessionService","session","_session","open","fullReset","partialReset","close","oldSession","SessionProvider","restrict","key1","key2","link","element","attrs","key","translate","text","html","translateDirective","translateHtmlDirective","14","translateFilter","optionalTranslateFilter","provider","TranslateProvider_1","TranslateProvider","filter","TranslateFilter_1","directive","TranslateDirective_1","TranslateDirective_2","./TranslateFilter","./TranslateProvider","16","__extends","d","b","__","constructor","p","hasOwnProperty","Object","create","_super","_persist","TranslateService_1","TranslateService","Translation","./Translation","17","LanguageRootVar","LanguageChangedEvent","translation","persist","_translation","_window","localStorage","language","getItem","save","setItem","use","translations","translateArray","keys","translateSet","keyProp","valueProp","translateObjects","items","translateWithPrefix","prefix","translateSetWithPrefix","translateSetWithPrefix2","en","ru","es","pt","de","fr","_language","map","_translations","isUndefined","values","each","k","push","item","replace","toUpperCase","hash","result","charCodeAt","verification","Math","random","toString","substr","21","sample","maxLength","indexOf","substring","strRepeat","str","qty","sprintf","get_type","variable","slice","toLowerCase","args","_i","arguments","str_format","cache","parse","format","parse_tree","argv","arg","match","pad","pad_character","pad_length","node_type","output","tree_length","cursor","test","String","fromCharCode","parseInt","toExponential","parseFloat","toFixed","abs","charAt","str_repeat","join","fmt","arg_names","exec","_fmt","replacement_field","field_match","field_list","22","thisModule","resetPartial","resetFull","resetAll","full","partial","$reset","$partialReset","scrollTo","parentElement","childElement","animationDuration","setTimeout","$","position","modDiff","scrollTop","top","animate","getBrowserName","ua","navigator","userAgent","search","version","split","browser","getPlatform","isDesktop","isMobile","isCordova","getOS","osAll","osAndroid","isSupported","supported","edge","ie","firefox","chrome","getBrowserVersion","normalizeOne","tag","trim","compressOne","equal","tag1","tag2","normalizeAll","tags","isString","compressAll","entity","searchFields","field","hashTags","concat","uniq","normalize","compress","extract","27","DefaultEvents","TimerEvent","timeout","TimerService","$interval","_started","_events","_interval","addEvent","existingEvent","find","newEvent","startEvent","removeEvent","stopEvent","splice","clearEvents","stop","_this","interval","cancel","ex","start"],"mappings":"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","file":"pip-webui-services.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","﻿'use strict';\r\n\r\nimport './translate/TranslateModule';\r\n\r\nangular.module('pipServices', [\r\n    'pipScope',\r\n    'pipTranslate',\r\n    'pipRouting',\r\n    'pipTimer',\r\n    'pipSession',\r\n    'pipIdentity',\r\n    'pipSystemInfo',\r\n    'pipFormat',\r\n    'pipScroll',\r\n    'pipPageReset',        \r\n    'pipTags'\r\n]);\r\n","'use strict';\r\n\r\nexport let CurrentState: any;\r\nexport let PreviousState: any;\r\n\r\nfunction captureStateTranslations($rootScope) {\r\n    \"ngInject\";\r\n\r\n    $rootScope.$on('$stateChangeSuccess',\r\n        (event, toState, toParams, fromState, fromParams) => {\r\n            CurrentState = {\r\n                name: toState.name, \r\n                url: toState.url, \r\n                params: toParams\r\n            };\r\n\r\n            PreviousState = {\r\n                name: fromState.name, \r\n                url: fromState.url, \r\n                params: fromParams\r\n            };\r\n        }\r\n    );\r\n\r\n}\r\n\r\nfunction decorateBackStateService($delegate, $window) {\r\n    \"ngInject\";\r\n\r\n    $delegate.goBack = goBack;\r\n    $delegate.goBackAndSelect = goBackAndSelect;\r\n\r\n    return $delegate;\r\n    //////////////////////////////////////////////////\r\n\r\n    function goBack(): void {\r\n        $window.history.back()\r\n    }\r\n\r\n    function goBackAndSelect(params: any): void {\r\n        if (PreviousState != null \r\n            && PreviousState.name != null) {\r\n\r\n            let state = _.cloneDeep(PreviousState);\r\n\r\n            // Override selected parameters\r\n            state.params = _.extend(state.params, params);\r\n\r\n            $delegate.go(state.name, state.params);\r\n        } else {\r\n            $window.history.back();\r\n        }\r\n    }\r\n}\r\n\r\nfunction addBackStateDecorator($provide) {\r\n    $provide.decorator('$state', decorateBackStateService);\r\n}\r\n\r\nangular\r\n    .module('pipRouting.Back', [])\r\n    .config(addBackStateDecorator)\r\n    .run(captureStateTranslations);\r\n","'use strict';\r\n\r\nexport let RedirectedStates: any = {};\r\n\r\nfunction decorateRedirectStateProvider($delegate) {\r\n    \"ngInject\";\r\n\r\n    $delegate.redirect = redirect;\r\n\r\n    return $delegate;\r\n    /////////////////////////////////////////////\r\n\r\n    // Specify automatic redirect from one state to another\r\n    function redirect(fromState, toState) {\r\n        RedirectedStates[fromState] = toState;  \r\n        return this;\r\n    }\r\n}\r\n\r\nfunction addRedirectStateProviderDecorator($provide) {\r\n    \"ngInject\";\r\n\r\n    $provide.decorator('$state', decorateRedirectStateProvider);\r\n}\r\n\r\nfunction decorateRedirectStateService($delegate, $timeout) {\r\n    \"ngInject\";\r\n\r\n    $delegate.redirect = redirect;\r\n    \r\n    return $delegate;\r\n    ////////////////////////////////\r\n    \r\n    // Todo: Move this code directly to event handler?\r\n    // Todo: Nothing calls this code!!\r\n    function redirect(event, state, params) {\r\n        let toState = RedirectedStates[state.name];\r\n        if (_.isFunction(toState)) {\r\n            toState = toState(state.name, params);\r\n\r\n            if (_.isNull(toState))\r\n                throw new Error('Redirected toState cannot be null');\r\n        }\r\n\r\n        if (!!toState) {\r\n            $timeout(() => {\r\n                event.preventDefault();\r\n                $delegate.transitionTo(toState, params, {location: 'replace'});\r\n            });\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\nfunction addRedirectStateDecorator($provide) {\r\n    \"ngInject\";\r\n\r\n    $provide.decorator('$state', decorateRedirectStateService);\r\n}\r\n\r\nangular\r\n    .module('pipRouting.Redirect', ['ui.router'])\r\n    .config(addRedirectStateProviderDecorator)\r\n    .config(addRedirectStateDecorator);\r\n\r\n","'use strict';\r\n\r\nangular.module('pipRouting', [\r\n    'ui.router', 'pipRouting.Events', 'pipRouting.Back', 'pipRouting.Redirect'\r\n]);\r\n","'use strict';\r\n\r\nexport let RoutingVar: string = \"$routing\";\r\n\r\nfunction hookRoutingEvents($log, $rootScope, $state) {\r\n    \"ngInject\";\r\n\r\n    $rootScope.$on('$stateChangeStart',\r\n        (event, toState, toParams, fromState, fromParams) => {\r\n            $rootScope[RoutingVar] = true;\r\n        }\r\n    );\r\n\r\n    $rootScope.$on('$stateChangeSuccess',\r\n        (event, toState, toParams, fromState, fromParams) => {\r\n            // Unset routing variable to disable page transition\r\n            $rootScope[RoutingVar] = false;                \r\n        }\r\n    );\r\n\r\n    // Intercept route error\r\n    $rootScope.$on('$stateChangeError',\r\n        (event, toState, toParams, fromState, fromParams, error) => {\r\n            // Unset routing variable to disable page transition\r\n            $rootScope[RoutingVar] = false;\r\n\r\n            $log.error('Error while switching route to ' + toState.name);\r\n            $log.error(error);\r\n\r\n            console.error('Error while switching route to ' + toState.name);\r\n            console.error(error);\r\n        }\r\n    );\r\n\r\n    // Intercept route error\r\n    $rootScope.$on('$stateNotFound',\r\n        function(event, unfoundState, fromState, fromParams) {\r\n            event.preventDefault();\r\n\r\n            $rootScope[RoutingVar] = false;\r\n\r\n            // Todo: Move to errors\r\n            $state.go('errors_missing_route',  {\r\n                    unfoundState: unfoundState,\r\n                    fromState : {\r\n                        to: fromState ? fromState.name : '',\r\n                        fromParams: fromParams\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    );\r\n\r\n}\r\n\r\nangular\r\n    .module('pipRouting.Events', [])\r\n    .run(hookRoutingEvents);\r\n\r\n","'use strict';\r\n\r\nvar thisModule = angular.module('pipScope.Error', []);\r\n\r\n/*\r\n    * Error is designed to assist with error handling\r\n    * within different application scopes & controllers without overlap.\r\n    *\r\n    * A unique identification of the scope/controller is passed to the service\r\n    * when it is initialized to identify the error for that scope.\r\n    * */\r\nthisModule.factory('pipError',\r\n    function ($rootScope) {\r\n\r\n        // Initialize error scope\r\n        $rootScope.errors = {};\r\n\r\n        return createError;\r\n\r\n        //----------------------------\r\n\r\n        function initError(scope) {\r\n            $rootScope.errors[scope] = {\r\n                message: undefined,\r\n                code: undefined,\r\n                details: undefined\r\n            };\r\n        };\r\n\r\n        function errorMessage(error) {\r\n            if (_.isNull(error)) {\r\n                return null;\r\n            }\r\n\r\n            // Process regular messages\r\n            if (error.message) {\r\n                return error.message;\r\n            }\r\n\r\n            // Process server application errors\r\n            if (error.data) {\r\n                if (error.data.code) {\r\n                    // process server error codes here\r\n                    return 'ERROR_' + error.data.code;\r\n                }\r\n\r\n                if (error.data.message) {\r\n                    return error.data.message;\r\n                }\r\n            }\r\n\r\n            // Process standard HTTP errors\r\n            if (error.statusText) {\r\n                return error.statusText;\r\n            }\r\n\r\n            if (error.status) {\r\n                return 'ERROR_' + error.status;\r\n            }\r\n            \r\n            return error.data ? error.data : error;\r\n        };\r\n\r\n        function errorCode(error) {\r\n            if (_.isNull(error)) {\r\n                return null;\r\n            }\r\n\r\n            if (error.data && error.data.code) {\r\n                return error.data.code;\r\n            }\r\n\r\n            if (error.status) {\r\n                return error.status;\r\n            }\r\n            \r\n            return null;\r\n        };\r\n\r\n        function errorDetails(error) {\r\n            return error && error.data ? error.data : error;\r\n        };\r\n\r\n        function createError(scope, scopeObject) {\r\n            scope = scope || 'global';\r\n\r\n            var error = {\r\n                reset: function () {\r\n                    initError(scope);\r\n                },\r\n\r\n                empty: function() {\r\n                    var error = $rootScope.errors[scope];\r\n                    return _.isNull(error) || (_.isNull(error.message) && _.isNull(error.code));\r\n                },\r\n\r\n                get: function () {\r\n                    if ($rootScope.errors[scope]) {\r\n                        return $rootScope.errors[scope];\r\n                    }\r\n                    return '';\r\n                },\r\n\r\n                message: function () {\r\n                    if ($rootScope.errors[scope]) {\r\n                        return $rootScope.errors[scope].message;\r\n                    }\r\n                    return null;\r\n                },\r\n\r\n                code: function () {\r\n                    if ($rootScope.errors[scope]) {\r\n                        return $rootScope.errors[scope].code;\r\n                    }\r\n                    return null;\r\n                },\r\n\r\n                details: function () {\r\n                    if ($rootScope.errors[scope]) {\r\n                        return $rootScope.errors[scope].details;\r\n                    }\r\n                    return null;\r\n                },\r\n\r\n                set: function (error) {\r\n                    if (error) {\r\n                        //pipAssert.isObject(error, \"Setting error: error should be an object\");\r\n\r\n                        $rootScope.errors[scope] = {\r\n                            message: errorMessage(error),\r\n                            code: errorCode(error),\r\n                            details: errorDetails(error)\r\n                        };\r\n                        console.error($rootScope.errors[scope]);\r\n                    } else {\r\n                        initError(scope);\r\n                    }\r\n                }\r\n            };\r\n\r\n            // Assign error into scope\r\n            if (_.isObject(scopeObject)) scopeObject.error = error;\r\n\r\n            return error;\r\n        };\r\n    }\r\n);\r\n","'use strict';\r\n\r\nvar thisModule = angular.module('pipScope.Transaction', ['pipTranslate']);\r\n\r\nthisModule.run(function($injector) {\r\n    var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n    if (pipTranslate) {\r\n        pipTranslate.setTranslations('en', {\r\n            'ENTERING': 'Entering...',\r\n            'PROCESSING': 'Processing...',\r\n            'LOADING': 'Loading...',\r\n            'SAVING': 'Saving...'\r\n        });\r\n\r\n        pipTranslate.setTranslations('ru', {\r\n            'ENTERING': 'Вход в систему...',\r\n            'PROCESSING': 'Обрабатывается...',\r\n            'LOADING': 'Загружается...',\r\n            'SAVING': 'Сохраняется...'\r\n        });   \r\n    }\r\n    \r\n});\r\n\r\n/*\r\n    * Transaction is designed to assist with transaction processing\r\n    * within different application scopes & controllers without overlap.\r\n    *\r\n    * A unique identification of the scope/controller is passed to the service\r\n    * when it is initialized to identify the error for that scope.\r\n    * \r\n    * Transaction is also integrated with Error service. So you don't need to double it\r\n    * */\r\nthisModule.factory('pipTransaction',\r\n    function ($rootScope, pipError) {\r\n\r\n        // Initialize transaction scope\r\n        $rootScope.transactions = {};\r\n\r\n        return createTransaction;\r\n\r\n        //---------------------------------\r\n\r\n        function initTransaction(scope) {\r\n            $rootScope.transactions[scope] = {\r\n                id: undefined,\r\n                operation: undefined\r\n            };\r\n        }\r\n        \r\n        function createTransaction(scope, scopeObject) {\r\n            scope = scope || 'global';\r\n\r\n            var error = pipError(scope);\r\n            var transaction = {\r\n                error: error,\r\n\r\n                reset: function () {\r\n                    initTransaction(\"\");\r\n                    error.reset();\r\n                },\r\n\r\n                busy: function() {\r\n                    var transaction = $rootScope.transactions[scope];\r\n                    return transaction != null && transaction.id;\r\n                },\r\n\r\n                failed: function() {\r\n                    return !error.empty();\r\n                },\r\n\r\n                aborted: function(id) {\r\n                    var transaction = $rootScope.transactions[scope];\r\n                    return _.isNull(transaction) || transaction.id != id;\r\n                },\r\n\r\n                get: function () {\r\n                    if (_.isNull($rootScope.transactions[scope])) {\r\n                        initTransaction(scope);\r\n                    }\r\n                    return $rootScope.transactions[scope];\r\n                },\r\n\r\n                id: function () {\r\n                    var transaction = $rootScope.transactions[scope];\r\n                    return transaction ? transaction.id : null;\r\n                },\r\n\r\n                operation: function () {\r\n                    var transaction = $rootScope.transactions[scope];\r\n                    return transaction ? transaction.operation : null;\r\n                },\r\n\r\n                errorMessage: function () {\r\n                    return error.message();\r\n                },\r\n\r\n                begin: function (operation) {\r\n                    var transaction = $rootScope.transactions[scope];\r\n                    // Transaction already in progress\r\n                    if (transaction != null && transaction.id) {\r\n                        return null;\r\n                    }                      \r\n\r\n                    transaction = $rootScope.transactions[scope] = {\r\n                        id: new Date().getTime(),\r\n                        operation: operation || 'PROCESSING'\r\n                    };\r\n                    error.reset();\r\n\r\n                    return transaction.id;\r\n                },\r\n\r\n                abort: function() {\r\n                    var transaction = $rootScope.transactions[scope];\r\n                    if (transaction) {\r\n                        transaction.id = null;\r\n                    }\r\n                    error.reset();\r\n                },\r\n\r\n                end: function (err) {\r\n                    if (err) error.set(err);\r\n                    else error.reset();\r\n\r\n                    var transaction = $rootScope.transactions[scope];\r\n                    if (transaction != null) {\r\n                        transaction.id = null;\r\n                    }                      \r\n                }\r\n            };\r\n\r\n            if (_.isObject(scopeObject)) {\r\n                scopeObject.error = error;\r\n                scopeObject.transaction = transaction;\r\n            }\r\n\r\n            return transaction;\r\n        }\r\n    }\r\n);\r\n","'use strict';\r\n\r\nexport const IdentityRootVar = \"$identity\";\r\nexport const IdentityChangedEvent = \"pipIdentityChanged\";\r\n\r\nexport interface IIdentity {\r\n    id: string;\r\n    full_name: string;\r\n    details: string;\r\n    email: string;\r\n    photo_url: string;\r\n}\r\n\r\nexport interface IIdentityService {\r\n    identity: IIdentity;\r\n}\r\n\r\nexport interface IIdentityProvider extends ng.IServiceProvider {\r\n    setRootVar: boolean;\r\n    identity: IIdentity;\r\n}\r\n\r\nclass IdentityService implements IIdentityService {\r\n    private _identity: IIdentity;\r\n    private _setRootVar: boolean;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(\r\n        setRootVar: boolean,\r\n        identity: IIdentity,\r\n        $rootScope: ng.IRootScopeService\r\n    ) {\r\n        this._setRootVar = setRootVar;\r\n        this._identity = identity;\r\n        this._rootScope = $rootScope;\r\n\r\n        this.setRootVar();\r\n    }\r\n\r\n    private setRootVar(): void {\r\n        if (this._setRootVar)\r\n            this._rootScope[IdentityRootVar] = this._identity;\r\n    }\r\n\r\n    public get identity(): IIdentity {\r\n        return this._identity;\r\n    }\r\n\r\n    public set identity(value: IIdentity) {\r\n        this._identity = value;\r\n        this.setRootVar();\r\n        this._rootScope.$broadcast(IdentityChangedEvent, this._identity);\r\n    }\r\n}\r\n\r\nclass IdentityProvider implements IdentityProvider {\r\n    private _setRootVar = true;\r\n    private _identity: IIdentity = null;\r\n    private _service: IIdentityService = null;\r\n\r\n    public constructor() { }\r\n\r\n    public get setRootVar(): boolean {\r\n        return this._setRootVar;  \r\n    }\r\n\r\n    public set setRootVar(value: boolean) {\r\n        this._setRootVar = !!value;\r\n    }\r\n\r\n    public get identity(): any {\r\n        return this._identity;  \r\n    }\r\n\r\n    public set identity(value: any) {\r\n        this._identity = value;\r\n    }\r\n\r\n    public $get($rootScope: ng.IRootScopeService): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new IdentityService(this._setRootVar, this._identity, $rootScope);\r\n\r\n        return this._service;\r\n    }\r\n\r\n}\r\n\r\nangular\r\n    .module('pipIdentity', [])\r\n    .provider('pipIdentity', IdentityProvider);\r\n","'use strict';\r\n\r\nexport const SessionRootVar = \"$session\";\r\nexport const SessionOpenedEvent = \"pipSessionOpened\";\r\nexport const SessionClosedEvent = \"pipSessionClosed\";\r\n\r\nexport interface ISessionService {\r\n    session: any;\r\n    isOpened: boolean;\r\n\r\n    open(session: any): void;\r\n    close(): void;\r\n}\r\n\r\nexport interface ISessionProvider extends ng.IServiceProvider {\r\n    setRootVar: boolean;\r\n    session: any;\r\n}\r\n\r\nclass SessionService implements ISessionService {\r\n    private _setRootVar: boolean;\r\n    private _session: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(\r\n        setRootVar: boolean, \r\n        session: any, \r\n        $rootScope: ng.IRootScopeService\r\n    ) {\r\n        this._setRootVar = setRootVar;\r\n        this._session = session;\r\n        this._rootScope = $rootScope;\r\n\r\n        this.setRootVar();\r\n    }\r\n    \r\n    private setRootVar(): void {\r\n        if (this._setRootVar)\r\n            this._rootScope[SessionRootVar] = this._session;\r\n    }\r\n\r\n    public get session(): any {\r\n        return this._session;\r\n    }\r\n\r\n    public get isOpened(): boolean {\r\n        return this._session != null;\r\n    }\r\n\r\n    public open(session: any, fullReset: boolean = false, partialReset: boolean = false) {\r\n        if (session == null)\r\n            throw new Error(\"Session cannot be null\");\r\n\r\n        this._session = session;\r\n        this.setRootVar();\r\n        this._rootScope.$broadcast(SessionOpenedEvent, session);\r\n    }\r\n\r\n    public close(fullReset: boolean = false, partialReset: boolean = false) {\r\n        let oldSession = this._session;\r\n\r\n        this._session = null;\r\n        this.setRootVar();\r\n        this._rootScope.$broadcast(SessionClosedEvent, oldSession);\r\n    }\r\n}\r\n\r\nclass SessionProvider implements ISessionProvider {\r\n    private _setRootVar = true;\r\n    private _session: any = null;\r\n    private _service: ISessionService = null;\r\n\r\n    public constructor() { }\r\n\r\n    public get setRootVar(): boolean {\r\n        return this._setRootVar;  \r\n    }\r\n\r\n    public set setRootVar(value: boolean) {\r\n        this._setRootVar = !!value;\r\n    }\r\n\r\n    public get session(): any {\r\n        return this._session;  \r\n    }\r\n\r\n    public set session(value: any) {\r\n        this._session = value;\r\n    }\r\n\r\n    public $get($rootScope: ng.IRootScopeService): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new SessionService(this._setRootVar, this._session, $rootScope);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular.module('pipSession', ['pipPageReset'])\r\n    .provider('pipSession', SessionProvider); \r\n","'use strict';\r\n\r\nexport function translateDirective(pipTranslate): ng.IDirective {\r\n    \"ngInject\";\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        scope: {\r\n            key1: '@pipTranslate',\r\n            key2: '@key'\r\n        },\r\n        link: (scope: any, element: any, attrs: any) => {\r\n            let key = scope.key1 || scope.key2;\r\n            let value = pipTranslate.translate(key);\r\n            element.text(value);\r\n        }\r\n    };\r\n}\r\n\r\nexport function translateHtmlDirective(pipTranslate): ng.IDirective {\r\n    \"ngInject\";\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        scope: {\r\n            key1: '@pipTranslateHtml',\r\n            key2: '@key'\r\n        },\r\n        link: (scope: any, element: any, attrs: any) => {\r\n            let key = scope.key1 || scope.key2;\r\n            let value = pipTranslate.translate(key);\r\n            element.html(value);\r\n        }\r\n    };\r\n}\r\n","'use strict';\r\n\r\nexport function translateFilter(pipTranslate) {\r\n    \"ngInject\";\r\n\r\n    return function (key) {\r\n        return pipTranslate.translate(key) || key;\r\n    }\r\n}\r\n\r\nexport function optionalTranslateFilter($injector) {\r\n    \"ngInject\";\r\n\r\n    let pipTranslate = $injector.has('pipTranslate') \r\n        ? $injector.get('pipTranslate') : null;\r\n\r\n    return function (key) {\r\n        return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n    }\r\n}\r\n","'use strict';\r\n\r\nimport { TranslateProvider } from './TranslateProvider';\r\nimport { translateFilter } from './TranslateFilter';\r\nimport { translateDirective } from './TranslateDirective';\r\nimport { translateHtmlDirective } from './TranslateDirective';\r\n\r\nangular\r\n    .module('pipTranslate', [])\r\n    .provider('pipTranslate', TranslateProvider)\r\n    .filter('translate', translateFilter)\r\n    .directive('pipTranslate', translateDirective)\r\n    .directive('pipTranslateHtml', translateHtmlDirective);\r\n","'use strict';\r\n\r\nimport { Translation } from './Translation';\r\nimport { ITranslateService } from './TranslateService';\r\nimport { TranslateService } from './TranslateService';\r\n\r\nexport interface ITranslateProvider extends ITranslateService, ng.IServiceProvider {\r\n}\r\n\r\nexport class TranslateProvider extends Translation implements ITranslateProvider {\r\n    private _translation: Translation;\r\n    private _setRootVar: boolean;\r\n    private _persist: boolean;\r\n    private _service: TranslateService;\r\n    \r\n    public constructor() {\r\n        super();\r\n    }\r\n\r\n    public get setRootVar(): boolean {\r\n        return this._setRootVar;  \r\n    }\r\n\r\n    public set setRootVar(value: boolean) {\r\n        this._setRootVar = !!value;\r\n    }\r\n\r\n    public get persist(): boolean {\r\n        return this._persist;  \r\n    }\r\n\r\n    public set persist(value: boolean) {\r\n        this._persist = !!value;\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: ng.IRootScopeService, \r\n        $window: ng.IWindowService\r\n    ): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null) \r\n            this._service = new TranslateService(this, this._setRootVar, this._persist, $rootScope, $window);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n","﻿'use strict';\r\n\r\nimport { Translation } from './Translation';\r\n\r\nexport let LanguageRootVar = \"$language\";\r\nexport let LanguageChangedEvent = \"pipLanguageChanged\";    \r\n\r\nexport interface ITranslateService {\r\n    language: string;\r\n\r\n    use(language: string): string;\r\n    setTranslations(language: string, translations: any): void;\r\n    translations(language: string, translations: any): void;\r\n\r\n    translate(key: string): string;\r\n    translateArray(keys: string[]): string[];\r\n    translateSet(keys: string[], keyProp: string, valueProp: string): any[];\r\n    translateObjects(items: any[], keyProp: string, valueProp: string): any[];\r\n    translateWithPrefix(prefix: string, key: string);\r\n    translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string);\r\n    translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string);\r\n}\r\n\r\nexport class TranslateService implements ITranslateService {\r\n    private _translation: Translation;\r\n    private _setRootVar: boolean;\r\n    private _persist: boolean;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _window: ng.IWindowService;\r\n\r\n    public constructor(\r\n        translation: Translation,\r\n        setRootVar: boolean,\r\n        persist: boolean,\r\n        $rootScope: ng.IRootScopeService,\r\n        $window: ng.IWindowService\r\n    ) {\r\n        this._setRootVar = setRootVar;\r\n        this._persist = persist;\r\n        this._translation = translation;\r\n        this._rootScope = $rootScope;\r\n        this._window = $window;\r\n\r\n        if (this._persist && this._window.localStorage)\r\n            this._translation.language = this._window.localStorage.getItem('language') || this._translation.language;\r\n\r\n        this.save();\r\n    }\r\n\r\n    private save(): void {\r\n        if (this._setRootVar)\r\n            this._rootScope[LanguageRootVar] = this._translation.language;\r\n\r\n        if (this._persist && this._window.localStorage != null)\r\n            this._window.localStorage.setItem('language', this._translation.language);\r\n    }\r\n\r\n    public get language(): string {\r\n        return this._translation.language;\r\n    }\r\n\r\n    public set language(value: string) {\r\n        if (value != this._translation.language) {\r\n            this._translation.language = value;\r\n            \r\n            this.save();                \r\n            this._rootScope.$broadcast(LanguageChangedEvent, value);\r\n        }\r\n    }\r\n\r\n    public use(language: string): string {\r\n        if (language != null)\r\n            this.language = language;\r\n        return this.language;\r\n    }\r\n\r\n    public setTranslations(language: string, translations: any): void {\r\n        return this._translation.setTranslations(language, translations);\r\n    }\r\n\r\n    public translations(language: string, translations: any): void {\r\n        return this._translation.setTranslations(language, translations);\r\n    }\r\n\r\n    public translate(key: string): string {\r\n        return this._translation.translate(key);\r\n    }\r\n\r\n    public translateArray(keys: string[]): string[] {\r\n        return this._translation.translateArray(keys);\r\n    }\r\n    \r\n    public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\r\n        return this._translation.translateSet(keys, keyProp, valueProp);\r\n    }\r\n\r\n    public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\r\n        return this._translation.translateObjects(items, keyProp, valueProp);\r\n    }\r\n\r\n    public translateWithPrefix(prefix: string, key: string) {\r\n        return this._translation.translateWithPrefix(prefix, key);\r\n    }\r\n\r\n    public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        return this._translation.translateSetWithPrefix(prefix, keys, keyProp, valueProp);\r\n    }\r\n\r\n    public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        return this._translation.translateSetWithPrefix2(prefix, keys, keyProp, valueProp);\r\n    }\r\n}\r\n","'use strict';\r\n\r\nexport class Translation {\r\n    protected _language = 'en';\r\n    protected _translations = {\r\n        en: {\r\n            'en': 'English',\r\n            'ru': 'Russian',\r\n            'es': 'Spanish',\r\n            'pt': 'Portuguese',\r\n            'de': 'German',\r\n            'fr': 'French'\r\n        },\r\n        ru: {\r\n            'en': 'Английский',\r\n            'ru': 'Русский',\r\n            'es': 'Испанский',\r\n            'pt': 'Португальский',\r\n            'de': 'Немецкий',\r\n            'fr': 'Французский'\r\n        }\r\n    };\r\n\r\n    public constructor() {}\r\n\r\n    public get language(): string { return this._language; }\r\n    public set language(value: string) { this._language = value; }\r\n\r\n    public use(language: string): string {\r\n        if (language != null)\r\n            this._language = language;\r\n        return this._language;\r\n    }\r\n\r\n    // Set translation strings for specific language\r\n    public setTranslations(language: string, translations: any): void {\r\n        let map = this._translations[language] || {};\r\n        this._translations[language] = _.extend(map, translations);\r\n    }\r\n\r\n    // Yet another method to set translation strings for specific language\r\n    public translations(language: string, translations: any): void {\r\n        this.setTranslations(language, translations);\r\n    }\r\n\r\n    // Translate a string by key using set language\r\n    public translate(key: string): string {\r\n        if (_.isNull(key) || _.isUndefined(key)) return '';\r\n\r\n        let translations = this._translations[this._language] || {};\r\n        return translations[key] || key;\r\n    }\r\n\r\n    // Translate an array of strings\r\n    public translateArray(keys: string[]): string[] {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        let values = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (k) {\r\n            let key = k || '';\r\n            values.push(translations[key] || key);\r\n        });\r\n\r\n        return values;\r\n    }\r\n\r\n    // Translate an array of strings into array of objects (set)\r\n    public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        keyProp = keyProp || 'id';\r\n        valueProp = valueProp || 'name';\r\n\r\n        let values: any[] = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (key) {\r\n            let value: any = {};\r\n            key = key || '';\r\n\r\n            value[keyProp] = key;\r\n            value[valueProp] = translations[key] || key;\r\n\r\n            values.push(value);\r\n        });\r\n\r\n        return values;\r\n    }\r\n\r\n    // Translate a collection of objects\r\n    public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\r\n        if (_.isNull(items) || items.length == 0) return [];\r\n\r\n        keyProp = keyProp || 'name';\r\n        valueProp = valueProp || 'nameLocal';\r\n\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(items, function (item) {\r\n            let key = item[keyProp] || '';\r\n\r\n            item[valueProp] = translations[key] || key;\r\n        });\r\n\r\n        return items;\r\n    }\r\n\r\n    // Translate a string by key  with prefix using set language todo\r\n    public translateWithPrefix(prefix: string, key: string) {\r\n        prefix = prefix ? prefix + '_' : '';\r\n        key = (prefix + key).replace(/ /g, '_').toUpperCase();\r\n        if (key == null) return '';\r\n        let translations = this._translations[this._language] || {};\r\n        return translations[key] || key;\r\n    };\r\n\r\n    public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() : '';\r\n        keyProp = keyProp || 'id';\r\n        valueProp = valueProp || 'name';\r\n\r\n        let values = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (key) {\r\n            let value: any = {}; \r\n            key = key || '';\r\n\r\n            value[keyProp] = key;\r\n            value[valueProp] = translations[prefix + '_' + key] || key;\r\n\r\n            values.push(value);\r\n        });\r\n\r\n        return values;\r\n    }\r\n\r\n    // Translate an array of strings, apply uppercase and replace ' ' => '_'\r\n    public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        keyProp = keyProp || 'id';\r\n        valueProp = valueProp || 'name';\r\n        prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() + '_': '';\r\n\r\n        let values = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (key) {\r\n            let value: any = {};\r\n            key = key || '';\r\n\r\n            value[keyProp] = key;\r\n            value[valueProp] = translations[prefix + key.replace(/ /g, '_').toUpperCase()]\r\n                || (prefix + key.replace(/ /g, '_').toUpperCase());\r\n\r\n            values.push(value);\r\n        });\r\n\r\n        return values;\r\n    }\r\n}\r\n","'use strict';\r\n\r\nvar thisModule = angular.module('pipCodes', []);\r\n\r\nthisModule.factory('pipCodes', function () {\r\n    \r\n    return {\r\n        hash: hash,\r\n        verification: verification\r\n    }\r\n\r\n    // Simple version of string hashcode\r\n    function hash(value) {\r\n        if (value == null) return 0;\r\n        var result = 0;\r\n        for (var i = 0; i < value.length; i++) {\r\n            result += value.charCodeAt(i);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    // Generates random big number for verification codes\r\n    function verification() {\r\n        return Math.random().toString(36).substr(2, 10).toUpperCase(); // remove `0.`\r\n    }\r\n\r\n});\r\n","'use strict';\r\n\r\nvar thisModule = angular.module('pipFormat', []);\r\n\r\nthisModule.factory('pipFormat', function () {\r\n\r\n    // Creates a sample line from a text\r\n    function sample(value, maxLength) {\r\n        if (!value || value == '') return '';\r\n\r\n        var length = value.indexOf('\\n');\r\n        length = length >= 0 ? length : value.length;\r\n        length = length < maxLength ? value.length : maxLength;\r\n\r\n        return value.substring(0, length);\r\n    }\r\n\r\n    function strRepeat(str, qty) {\r\n        if (qty < 1) return '';\r\n        var result = '';\r\n        while (qty > 0) {\r\n            if (qty & 1) result += str;\r\n            qty >>= 1, str += str;\r\n        }\r\n        return result;\r\n    }\r\n    \r\n    var sprintf = (function sprintf(...args: any[]) {\r\n        function get_type(variable) {\r\n            return toString.call(variable).slice(8, -1).toLowerCase();\r\n        }\r\n\r\n        var str_repeat = strRepeat;\r\n\r\n        var str_format: any = function() {\r\n            if (!str_format.cache.hasOwnProperty(arguments[0])) {\r\n                str_format.cache[arguments[0]] = str_format.parse(arguments[0]);\r\n            }\r\n            return str_format.format.call(null, str_format.cache[arguments[0]], arguments);\r\n        };\r\n\r\n        str_format.format = function(parse_tree, argv) {\r\n            var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;\r\n            for (i = 0; i < tree_length; i++) {\r\n                node_type = get_type(parse_tree[i]);\r\n                if (node_type === 'string') {\r\n                    output.push(parse_tree[i]);\r\n                }\r\n                else if (node_type === 'array') {\r\n                    match = parse_tree[i]; // convenience purposes only\r\n                    if (match[2]) { // keyword argument\r\n                        arg = argv[cursor];\r\n                        for (k = 0; k < match[2].length; k++) {\r\n                            if (!arg.hasOwnProperty(match[2][k])) {\r\n                                throw new Error(sprintf('[_.sprintf] property \"%s\" does not exist', match[2][k]));\r\n                            }\r\n                            arg = arg[match[2][k]];\r\n                        }\r\n                    } else if (match[1]) { // positional argument (explicit)\r\n                        arg = argv[match[1]];\r\n                    }\r\n                    else { // positional argument (implicit)\r\n                        arg = argv[cursor++];\r\n                    }\r\n\r\n                    if (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {\r\n                        throw new Error(sprintf('[_.sprintf] expecting number but found %s', get_type(arg)));\r\n                    }\r\n                    switch (match[8]) {\r\n                        case 'b': arg = arg.toString(2); break;\r\n                        case 'c': arg = String.fromCharCode(arg); break;\r\n                        case 'd': arg = parseInt(arg, 10); break;\r\n                        case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\r\n                        case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\r\n                        case 'o': arg = arg.toString(8); break;\r\n                        case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;\r\n                        case 'u': arg = Math.abs(arg); break;\r\n                        case 'x': arg = arg.toString(16); break;\r\n                        case 'X': arg = arg.toString(16).toUpperCase(); break;\r\n                    }\r\n                    arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);\r\n                    pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\r\n                    pad_length = match[6] - String(arg).length;\r\n                    pad = match[6] ? str_repeat(pad_character, pad_length) : '';\r\n                    output.push(match[5] ? arg + pad : pad + arg);\r\n                }\r\n            }\r\n            return output.join('');\r\n        };\r\n\r\n        str_format.cache = {};\r\n\r\n        str_format.parse = function(fmt) {\r\n            var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;\r\n            while (_fmt) {\r\n                if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\r\n                    parse_tree.push(match[0]);\r\n                }\r\n                else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\r\n                    parse_tree.push('%');\r\n                }\r\n                else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\r\n                    if (match[2]) {\r\n                        arg_names |= 1;\r\n                        var field_list = [], replacement_field = match[2], field_match = [];\r\n                        if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                            field_list.push(field_match[1]);\r\n                            while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\r\n                                if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                                    field_list.push(field_match[1]);\r\n                                }\r\n                                else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\r\n                                    field_list.push(field_match[1]);\r\n                                }\r\n                                else {\r\n                                    throw new Error('[_.sprintf] huh?');\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            throw new Error('[_.sprintf] huh?');\r\n                        }\r\n                        match[2] = field_list;\r\n                    }\r\n                    else {\r\n                        arg_names |= 2;\r\n                    }\r\n                    if (arg_names === 3) {\r\n                        throw new Error('[_.sprintf] mixing positional and named placeholders is not (yet) supported');\r\n                    }\r\n                    parse_tree.push(match);\r\n                }\r\n                else {\r\n                    throw new Error('[_.sprintf] huh?');\r\n                }\r\n                _fmt = _fmt.substring(match[0].length);\r\n            }\r\n            return parse_tree;\r\n        };\r\n\r\n        return str_format;\r\n    })();\r\n\r\n    return {\r\n        sprintf: sprintf,\r\n        format: sprintf,\r\n        sample: sample\r\n    };\r\n});\r\n","'use strict';\r\n\r\nvar thisModule = angular.module('pipPageReset', []);\r\n\r\nthisModule.factory('pipPageReset', function($rootScope, $timeout) {\r\n\r\n    $rootScope.$on('pipResetPage', resetAll);\r\n\r\n    return {\r\n        resetPartial: resetPartial,\r\n        resetFull: resetFull,\r\n        resetAll: resetAll,\r\n        reset: reset\r\n    };\r\n\r\n    //------------------------------------------\r\n\r\n    function resetPartial() {\r\n        reset(false, true);\r\n    }\r\n\r\n    function resetFull() {\r\n        reset(true, false);\r\n    }\r\n\r\n    function resetAll() {\r\n        reset(true, true);\r\n    }\r\n\r\n    function reset(full, partial) {\r\n        full = full !== undefined ? !!full : true;\r\n        partial = partial !== undefined ? !!partial : true;\r\n\r\n        if (full || partial) {\r\n            $rootScope.$reset = full;\r\n            $rootScope.$partialReset = partial;\r\n            $timeout(function() {\r\n                $rootScope.$reset = false;\r\n                $rootScope.$partialReset = false;\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n});\r\n","'use strict';\r\n\r\nvar thisModule = angular.module('pipScroll', []);\r\n\r\nthisModule.factory('pipScroll', function () {\r\n    return {\r\n        scrollTo: scrollTo\r\n    };\r\n    \r\n    //-------------------------------------\r\n\r\n    function scrollTo(parentElement, childElement, animationDuration) {\r\n        if(!parentElement || !childElement) return;\r\n        if (animationDuration == undefined) animationDuration = 300;\r\n\r\n        setTimeout(function () {\r\n            if (!$(childElement).position()) return;\r\n            var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\r\n            if (modDiff < 20) return;\r\n            var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\r\n            if (animationDuration > 0)\r\n                $(parentElement).animate({\r\n                    scrollTop: scrollTo + 'px'\r\n                }, animationDuration);\r\n        }, 100);\r\n    }\r\n\r\n});\r\n","'use strict';\r\n\r\nvar thisModule = angular.module('pipSystemInfo', []);\r\n\r\nthisModule.factory('pipSystemInfo', function ($rootScope, $window) {\r\n\r\n    return {\r\n        getBrowserName: getBrowserName,\r\n        getBrowserVersion: getBrowserVersion,\r\n        getPlatform: getPlatform,\r\n        isDesktop: isDesktop,\r\n        isMobile: isMobile,\r\n        isCordova: isCordova,\r\n        getOS: getOS,            \r\n        isSupported: isSupported\r\n    };\r\n\r\n    // todo add support for iPhone\r\n    function getBrowserName() {\r\n        var ua = $window.navigator.userAgent;\r\n\r\n        if (ua.search(/Edge/) > -1) return \"edge\";\r\n        if (ua.search(/MSIE/) > -1) return \"ie\";\r\n        if (ua.search(/Trident/) > -1) return \"ie\";\r\n        if (ua.search(/Firefox/) > -1) return \"firefox\";\r\n        if (ua.search(/Opera/) > -1) return \"opera\";\r\n        if (ua.search(/OPR/) > -1) return \"opera\";\r\n        if (ua.search(/YaBrowser/) > -1) return \"yabrowser\";\r\n        if (ua.search(/Chrome/) > -1) return \"chrome\";\r\n        if (ua.search(/Safari/) > -1) return \"safari\";\r\n        if (ua.search(/Maxthon/) > -1) return \"maxthon\";\r\n        \r\n        return \"unknown\";\r\n    }\r\n\r\n    function getBrowserVersion() {\r\n        var browser, version;\r\n        var ua = $window.navigator.userAgent;\r\n\r\n        browser = getBrowserName();\r\n\r\n        switch (browser) {\r\n            case \"edge\":\r\n                version = (ua.split(\"Edge\")[1]).split(\"/\")[1];\r\n                break;\r\n            case \"ie\":\r\n                version = (ua.split(\"MSIE \")[1]).split(\";\")[0];\r\n                break;\r\n            case \"ie11\":\r\n                browser = \"ie\";\r\n                version = (ua.split(\"; rv:\")[1]).split(\")\")[0];\r\n                break;\r\n            case \"firefox\":\r\n                version = ua.split(\"Firefox/\")[1];\r\n                break;\r\n            case \"opera\":\r\n                version = ua.split(\"Version/\")[1];\r\n                break;\r\n            case \"operaWebkit\":\r\n                version = ua.split(\"OPR/\")[1];\r\n                break;\r\n            case \"yabrowser\":\r\n                version = (ua.split(\"YaBrowser/\")[1]).split(\" \")[0];\r\n                break;\r\n            case \"chrome\":\r\n                version = (ua.split(\"Chrome/\")[1]).split(\" \")[0];\r\n                break;\r\n            case \"safari\":\r\n                version = (ua.split(\"Version/\")[1]).split(\" \")[0];\r\n                break;\r\n            case \"maxthon\":\r\n                version = ua.split(\"Maxthon/\")[1];\r\n                break;\r\n        }\r\n\r\n        return version;\r\n    }\r\n    \r\n    function getPlatform() {\r\n        var ua = $window.navigator.userAgent;\r\n\r\n        if (/iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(ua.toLowerCase())) \r\n            return 'mobile';\r\n\r\n        return 'desktop';\r\n    }\r\n\r\n    function isDesktop() {\r\n        return getPlatform() == 'desktop';\r\n    }\r\n\r\n    function isMobile() {\r\n        return getPlatform() == 'mobile';\r\n    }\r\n\r\n    // Todo: complete implementation\r\n    function isCordova() {\r\n        return null;\r\n    }\r\n\r\n    function getOS() {\r\n        var ua = $window.navigator.userAgent;\r\n\r\n        try {\r\n            var osAll = (/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(ua.toLowerCase()) || [ua])[0].replace('sunos', 'solaris'),\r\n            osAndroid = (/(android)/.exec(ua.toLowerCase()) || '');\r\n            return osAndroid && (osAndroid == 'android' || (osAndroid[0] == 'android')) ? 'android' : osAll;\r\n        } catch (err) {\r\n            return 'unknown'\r\n        }\r\n    }\r\n\r\n    // Todo: Move to errors\r\n    function isSupported(supported) {\r\n        if (!supported) supported = {\r\n            edge: 11,\r\n            ie: 11,\r\n            firefox: 43, //4, for testing\r\n            opera: 35,\r\n            chrome: 47\r\n        };\r\n\r\n        var browser = getBrowserName();\r\n        var version = getBrowserVersion();\r\n        version = version.split(\".\")[0]\r\n\r\n        if (browser && supported[browser] && version >= supported[browser]) \r\n            return true;\r\n\r\n        return true;\r\n    };\r\n\r\n});\r\n\r\n","'use strict';\r\n\r\nvar thisModule = angular.module('pipTags', []);\r\n\r\nthisModule.factory('pipTags', function () {\r\n        \r\n    return {\r\n        equal: equal,\r\n        normalizeOne: normalizeOne,\r\n        normalizeAll: normalizeAll,\r\n        normalize: normalizeAll,\r\n        compressOne: compressOne,\r\n        compressAll: compressAll,\r\n        compress: compressAll,\r\n        extract: extract\r\n    };\r\n\r\n    //------------------------------\r\n\r\n    function normalizeOne(tag) {\r\n        return tag \r\n            ? _.trim(tag.replace(/(_|#)+/g, ' '))\r\n            : null;\r\n    }\r\n\r\n    function compressOne(tag) {\r\n        return tag\r\n            ? tag.replace(/( |_|#)/g, '').toLowerCase()\r\n            : null;\r\n    }\r\n\r\n    function equal(tag1, tag2) {\r\n        if (tag1 == null && tag2 == null)\r\n            return true;\r\n        if (tag1 == null || tag2 == null)\r\n            return false;\r\n        return compressOne(tag1) == compressOne(tag2);\r\n    }\r\n\r\n    function normalizeAll(tags) {\r\n        if (_.isString(tags)) {\r\n            tags = tags.split(/( |,|;)+/);\r\n        }\r\n\r\n        tags = _.map(tags, function (tag) {\r\n            return normalizeOne(tag);\r\n        });\r\n\r\n        return tags;\r\n    }\r\n\r\n    function compressAll(tags) {\r\n        if (_.isString(tags))\r\n            tags = tags.split(/( |,|;)+/);\r\n\r\n        tags = _.map(tags, function (tag) {\r\n            return compressOne(tag);\r\n        });\r\n\r\n        return tags;\r\n    };\r\n\r\n    function extract(entity, searchFields) {\r\n        var tags = normalizeAll(entity.tags);\r\n\r\n        _.each(searchFields, function (field) {\r\n            var text = entity[field] || '';\r\n\r\n            if (text != '') {\r\n                var hashTags = text.match(/#\\w+/g);\r\n                tags = tags.concat(normalizeAll(hashTags));\r\n            }\r\n        });\r\n\r\n        return _.uniq(tags);\r\n    }\r\n});\r\n","'use strict';\r\n\r\nexport interface ITimerService {\r\n    isStarted: boolean;\r\n\r\n    addEvent(event: string, timeout: number): void;\r\n    removeEvent(event: string): void;\r\n    clearEvents(): void;\r\n\r\n    start(): void;\r\n    stop(): void;\r\n}\r\n\r\nclass TimerEvent {\r\n    event: string;\r\n    timeout: number;\r\n    interval: any;\r\n}\r\n\r\nlet DefaultEvents: TimerEvent[] = [\r\n    <TimerEvent> { event: 'pipAutoPullChanges', timeout: 60000 }, // 1 min\r\n    <TimerEvent> { event: 'pipAutoUpdatePage', timeout: 15000 }, // 15 sec\r\n    <TimerEvent> { event: 'pipAutoUpdateCollection', timeout: 300000 } // 5 min\r\n]\r\n\r\nclass TimerService {\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _interval: ng.IIntervalService;        \r\n    private _started = false;\r\n    private _events: TimerEvent[] = _.cloneDeep(DefaultEvents);\r\n\r\n    public constructor($rootScope, $interval) {\r\n        this._rootScope = $rootScope;\r\n        this._interval = $interval;\r\n    }\r\n\r\n    public get isStarted() {\r\n        return this._started;\r\n    }\r\n\r\n    public addEvent(event: string, timeout: number): void {\r\n        var existingEvent = _.find(this._events, (e) => e.event == event);\r\n        if (existingEvent != null) return;\r\n\r\n        let newEvent = <TimerEvent> {\r\n            event: event,\r\n            timeout: timeout\r\n        };\r\n        this._events.push(newEvent);\r\n\r\n        if (this._started)\r\n            this.startEvent(newEvent);\r\n    }\r\n\r\n    public removeEvent(event: string): void {\r\n        for (let i = this._events.length - 1; i >= 0; i--) {\r\n            let existingEvent = this._events[i];\r\n            if (existingEvent.event == event) {\r\n                this.stopEvent(existingEvent);\r\n                this._events.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    public clearEvents(): void {\r\n        this.stop();\r\n        this._events = [];\r\n    }\r\n\r\n    private startEvent(event: TimerEvent): void {\r\n        event.interval = this._interval(\r\n            () => { this._rootScope.$broadcast(event.event) },\r\n            event.timeout\r\n        )\r\n    }\r\n\r\n    private stopEvent(event: TimerEvent): void {\r\n        if (event.interval != null) {\r\n            try {\r\n                this._interval.cancel(event.interval);\r\n            } catch (ex) {\r\n                // Do nothing\r\n            }\r\n            event.interval = null;\r\n        }\r\n    }\r\n\r\n    public start(): void {\r\n        if (this._started) return;\r\n\r\n        _.each(this._events, (event) => {\r\n            this.startEvent(event);\r\n        });\r\n\r\n        this._started = true;\r\n    }\r\n\r\n    public stop(): void {\r\n        _.each(this._events, (event) => {\r\n            this.stopEvent(event);\r\n        });\r\n\r\n        this._started = false;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipTimer', [])\r\n    .service('pipTimer', TimerService);\r\n"]}