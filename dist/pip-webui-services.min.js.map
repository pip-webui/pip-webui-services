{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/index.ts","src/routing/BackDecorator.ts","src/routing/RedirectDecorator.ts","src/routing/RoutingEvents.ts","src/routing/index.ts","src/session/IdentityService.ts","src/session/SessionService.ts","src/session/index.ts","src/transactions/Transaction.ts","src/transactions/TransactionError.ts","src/transactions/TransactionService.ts","src/transactions/TransactionStrings.ts","src/transactions/index.ts","src/translate/TranslateDirective.ts","src/translate/TranslateFilter.ts","src/translate/TranslateService.ts","src/translate/Translation.ts","src/translate/index.ts","src/utilities/Codes.ts","src/utilities/Format.ts","src/utilities/PageResetService.ts","src/utilities/ScrollService.ts","src/utilities/SystemInfo.ts","src/utilities/Tags.ts","src/utilities/TimerService.ts","src/utilities/index.ts"],"names":["f","exports","module","define","amd","g","window","global","self","this","pip","services","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","angular","__export","captureStateTranslations","$rootScope","$on","event","toState","toParams","fromState","fromParams","CurrentState","name","url","params","PreviousState","StateVar","PrevStateVar","decorateBackStateService","$delegate","$window","goBack","history","back","goBackAndSelect","state","_","cloneDeep","extend","go","addBackStateDecorator","$provide","decorator","$inject","Object","defineProperty","value","run","3","decorateRedirectStateProvider","redirect","RedirectedStates","addRedirectStateProviderDecorator","$timeout","isNull","preventDefault","transitionTo","location","addRedirectStateDecorator","config","hookRoutingEvents","$log","$state","RoutingVar","error","5","m","p","hasOwnProperty","./RedirectDecorator","./RoutingEvents","6","IdentityRootVar","IdentityChangedEvent","IdentityService","setRootVar","identity","_setRootVar","_identity","_rootScope","_log","prototype","$emit","debug","JSON","stringify","enumerable","configurable","IdentityProvider","_service","get","set","$get","provider","SessionRootVar","SessionOpenedEvent","SessionClosedEvent","SessionService","session","_session","isOpened","open","fullReset","partialReset","close","oldSession","SessionProvider","8","./SessionService","9","Transaction","scope","_scope","_id","_operation","_progress","_error","message","reset","busy","failed","empty","aborted","id","begin","operation","Date","getTime","toString","update","progress","Math","max","abort","10","TransactionError","decode","details","cause","stack_trace","data","statusText","status","11","TransactionService","_transactions","create","transaction","Transaction_1","12","$injector","pipTranslate","has","setTranslations","ENTERING","PROCESSING","LOADING","SAVING","configureTransactionStrings","13","./TransactionError","./TransactionService","./TransactionStrings","14","restrict","key1","key2","link","element","attrs","key","translate","text","directive","translateDirective","translateHtmlDirective","15","translateFilter","16","initTranslate","language","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","LanguageRootVar","LanguageChangedEvent","TranslateService","translation","persist","$mdDateLocale","_persist","_translation","_window","_mdDateLocale","localStorage","getItem","save","changeLocale","locale","localeDate","moment","localeData","months","isArray","_months","format","shortMonths","_monthsShort","days","_weekdays","shortDays","_weekdaysMin","firstDayOfWeek","_week","dow","setItem","PageResetService_1","ResetPageEvent","use","translations","translateArray","keys","translateSet","keyProp","valueProp","translateObjects","items","translateWithPrefix","prefix","translateSetWithPrefix","translateSetWithPrefix2","_super","_this","TranslateProvider","Translation","./Translation","17","en","ru","es","pt","de","fr","_language","map","_translations","isUndefined","values","k","push","each","item","replace","toUpperCase","./TranslateFilter","./TranslateService","19","Codes","hash","result","verification","random","substr","Format","cache","sample","maxLength","indexOf","substring","strRepeat","str","qty","getType","variable","slice","toLowerCase","fmt","match","parse_tree","arg_names","exec","_fmt","field_list","replacement_field","field_match","argv","tree_length","node_type","output","arg","cursor","sprintf","test","String","fromCharCode","parseInt","toExponential","parseFloat","toFixed","abs","pad_character","charAt","pad_length","pad","join","parseFormat","args","21","pipPageReset","ResetAreaEvent","area","resetArea","ResetRootVar","ResetAreaRootVar","PageResetService","_timeout","performReset","scrollTo","parentElement","childElement","animationDuration","undefined","setTimeout","$","position","scrollTop","top","animate","ScrollService","SystemInfo","ua","navigator","userAgent","search","version","browserName","browser","split","osAll","osAndroid","err","isDesktop","platform","isMobile","isCordova","isSupported","supported","edge","browserVersion","service","Tags","normalizeOne","tag","trim","compressOne","equal","tag1","tag2","normalizeAll","tags","isString","compressAll","entity","field","hashTags","concat","uniq","TimerEvent","timeout","DefaultEvents","TimerService","$interval","_started","_events","_interval","isStarted","addEvent","existingEvent","find","newEvent","startEvent","removeEvent","stopEvent","splice","clearEvents","stop","interval","cancel","ex","start"],"mappings":"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","file":"pip-webui-services.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","﻿import './translate';\nimport './session';\nimport './transactions';\nimport './routing';\nimport './utilities';\n\nangular.module('pipServices', [\n    'pipTranslate',\n    'pipSession',\n    'pipTransaction',\n    'pipRouting',\n    'pipFormat',\n    'pipTimer',\n    'pipScroll',\n    'pipTags',\n    'pipCodes',\n    'pipSystemInfo',\n    'pipPageReset'\n]);\n\nexport * from './translate';\nexport * from './session';\nexport * from './transactions';\nexport * from './routing';\nexport * from './utilities';\n","export let StateVar: string = \"$state\";\nexport let PrevStateVar: string = \"$prevState\";\n\n// Run function to set CurrentState and PreviousState global variables\nfunction captureStateTranslations($rootScope: ng.IRootScopeService) {\n    \"ngInject\";\n\n    $rootScope.$on('$stateChangeSuccess',\n        (event, toState, toParams, fromState, fromParams) => {\n\n            let CurrentState = {\n                name: toState.name, \n                url: toState.url, \n                params: toParams\n            };\n\n            let PreviousState = {\n                name: fromState.name, \n                url: fromState.url, \n                params: fromParams\n            };\n        // Record current and previous state\n        $rootScope[StateVar] = CurrentState;\n        $rootScope[PrevStateVar] = PreviousState;            \n        }\n    );\n\n}\n\n// Decorator function to modify $state service by adding goBack and goBackAndSelect methods\nfunction decorateBackStateService($delegate: any, $window: ng.IWindowService, $rootScope: ng.IRootScopeService): any {\n    \"ngInject\";\n\n    $delegate.goBack = goBack;\n    $delegate.goBackAndSelect = goBackAndSelect;\n\n    return $delegate;\n    //////////////////////////////////////////////////\n\n    function goBack(): void {\n        $window.history.back()\n    }\n\n    function goBackAndSelect(params: any): void {\n        // todo: define end fix PreviousState\n        if (!!$rootScope[StateVar] && !!$rootScope[PrevStateVar]) {\n\n            let state = _.cloneDeep($rootScope[PrevStateVar]);\n\n            // Override selected parameters\n            state.params = _.extend(state.params, params);\n\n            $delegate.go(state.name, state.params);\n        } else {\n            $window.history.back();\n        }\n    }\n}\n\n// Config function to decorate $state service\nfunction addBackStateDecorator($provide) {\n    $provide.decorator('$state', decorateBackStateService);\n}\n\nangular\n    .module('pipRouting')\n    .config(addBackStateDecorator)\n    .run(captureStateTranslations);\n    ","let RedirectedStates: any = {};\n\n// Decorator function to add $stateProvider redirect method\nfunction decorateRedirectStateProvider($delegate) {\n    \"ngInject\";\n\n    $delegate.redirect = redirect;\n\n    return $delegate;\n    /////////////////////////////////////////////\n\n    // Specify automatic redirect from one state to another\n    function redirect(fromState, toState) {\n        RedirectedStates[fromState] = toState;  \n        return this;\n    }\n}\n\n// Config function to decorate $state provider\nfunction addRedirectStateProviderDecorator($provide) {\n    \"ngInject\";\n\n    $provide.decorator('$state', decorateRedirectStateProvider);\n}\n\n// Decorator function to add redirect method to $state service\nfunction decorateRedirectStateService($delegate, $timeout) {\n    \"ngInject\";\n\n    $delegate.redirect = redirect;\n    \n    return $delegate;\n    ////////////////////////////////\n    \n    // Todo: Move this code directly to event handler?\n    // Todo: Nothing calls this code!!\n    function redirect(event, state, params) {\n        let toState = RedirectedStates[state.name];\n        if (_.isFunction(toState)) {\n            toState = toState(state.name, params);\n\n            if (_.isNull(toState))\n                throw new Error('Redirected toState cannot be null');\n        }\n\n        if (!!toState) {\n            $timeout(() => {\n                event.preventDefault();\n                $delegate.transitionTo(toState, params, {location: 'replace'});\n            });\n\n            return true;\n        }\n\n        return false;\n    }\n}\n\n// Config function to decorate $state service\nfunction addRedirectStateDecorator($provide) {\n    \"ngInject\";\n\n    $provide.decorator('$state', decorateRedirectStateService);\n}\n\nangular\n    .module('pipRouting')\n    .config(addRedirectStateProviderDecorator)\n    .config(addRedirectStateDecorator);\n    ","export let RoutingVar: string = \"$routing\";\n\nfunction hookRoutingEvents(\n    $rootScope: ng.IRootScopeService,\n    $log: ng.ILogService,\n    $state: ng.ui.IStateService\n) {\n    \"ngInject\";\n\n    $rootScope.$on('$stateChangeStart',\n        (event, toState, toParams, fromState, fromParams) => {\n            $rootScope[RoutingVar] = true;\n        }\n    );\n\n    $rootScope.$on('$stateChangeSuccess',\n        (event, toState, toParams, fromState, fromParams) => {\n            // Unset routing variable to disable page transition\n            $rootScope[RoutingVar] = false;                \n        }\n    );\n\n    // Intercept route error\n    $rootScope.$on('$stateChangeError',\n        (event, toState, toParams, fromState, fromParams, error) => {\n            // Unset routing variable to disable page transition\n            $rootScope[RoutingVar] = false;\n\n            $log.error('Error while switching route to ' + toState.name);\n            $log.error(error);\n        }\n    );\n\n}\n\nangular\n    .module('pipRouting')\n    .run(hookRoutingEvents);\n    ","angular.module('pipRouting', ['ui.router']);\n\nimport './BackDecorator';\nimport './RedirectDecorator';\nimport './RoutingEvents';\n\nexport * from './BackDecorator';\nexport * from './RoutingEvents';\n","import { IIdentityService, IIdentityProvider } from './IIdentityService';\n\nexport let IdentityRootVar = \"$identity\";\nexport let IdentityChangedEvent = \"pipIdentityChanged\";\n\nclass IdentityService implements IIdentityService {\n    private _identity: any;\n    private _setRootVar: boolean;\n    private _rootScope: ng.IRootScopeService;\n    private _log: ng.ILogService;\n\n    public constructor(\n        setRootVar: boolean,\n        identity: any,\n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService\n    ) {\n        this._setRootVar = setRootVar;\n        this._identity = identity;\n        this._rootScope = $rootScope;\n        this._log = $log;\n\n        this.setRootVar();\n    }\n\n    private setRootVar(): void {\n        if (this._setRootVar)\n            this._rootScope[IdentityRootVar] = this._identity;\n    }\n\n    public get identity(): any {\n        return this._identity;\n    }\n\n    public set identity(value: any) {\n        this._identity = value;\n        this.setRootVar();\n        this._rootScope.$emit(IdentityChangedEvent, this._identity);\n\n        let identity: any = value || {};\n        this._log.debug(\"Changed identity to \" + JSON.stringify(identity));\n    }\n}\n\nclass IdentityProvider implements IdentityProvider {\n    private _setRootVar = true;\n    private _identity: any = null;\n    private _service: IdentityService = null;\n\n    public constructor() { }\n\n    public get setRootVar(): boolean {\n        return this._setRootVar;  \n    }\n\n    public set setRootVar(value: boolean) {\n        this._setRootVar = !!value;\n    }\n\n    public get identity(): any {\n        return this._identity;  \n    }\n\n    public set identity(value: any) {\n        this._identity = value;\n    }\n\n    public $get(\n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService\n    ): any {\n        \"ngInject\";\n\n        if (this._service == null)\n            this._service = new IdentityService(this._setRootVar, this._identity, $rootScope, $log);\n\n        return this._service;\n    }\n\n}\n\nangular\n    .module('pipSession')\n    .provider('pipIdentity', IdentityProvider);\n","import { ISessionService, ISessionProvider } from './ISessionService';\n\nexport const SessionRootVar = \"$session\";\nexport const SessionOpenedEvent = \"pipSessionOpened\";\nexport const SessionClosedEvent = \"pipSessionClosed\";\n\nclass SessionService implements ISessionService {\n    private _setRootVar: boolean;\n    private _session: any;\n    private _rootScope: ng.IRootScopeService;\n    private _log: ng.ILogService;\n\n    public constructor(\n        setRootVar: boolean, \n        session: any, \n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService\n    ) {\n        this._setRootVar = setRootVar;\n        this._session = session;\n        this._rootScope = $rootScope;\n        this._log = $log;\n\n        this.setRootVar();\n    }\n    \n    private setRootVar(): void {\n        if (this._setRootVar)\n            this._rootScope[SessionRootVar] = this._session;\n    }\n\n    public get session(): any {\n        return this._session;\n    }\n\n    public isOpened(): boolean {\n        return this._session != null;\n    }\n\n    public open(session: any, fullReset: boolean = false, partialReset: boolean = false) {\n        if (session == null)\n            throw new Error(\"Session cannot be null\");\n\n        this._session = session;\n        this.setRootVar();\n        this._rootScope.$emit(SessionOpenedEvent, session);\n\n        this._log.debug(\"Opened session \" + session);\n    }\n\n    public close(fullReset: boolean = false, partialReset: boolean = false) {\n        let oldSession = this._session;\n\n        this._session = null;\n        this.setRootVar();\n        this._rootScope.$emit(SessionClosedEvent, oldSession);\n\n        this._log.debug(\"Closed session \" + oldSession);\n    }\n}\n\nclass SessionProvider implements ISessionProvider {\n    private _setRootVar = true;\n    private _session: any = null;\n    private _service: SessionService = null;\n\n    public constructor() { }\n\n    public get setRootVar(): boolean {\n        return this._setRootVar;  \n    }\n\n    public set setRootVar(value: boolean) {\n        this._setRootVar = !!value;\n    }\n\n    public get session(): any {\n        return this._session;  \n    }\n\n    public set session(value: any) {\n        this._session = value;\n    }\n\n    public $get(\n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService\n    ): any {\n        \"ngInject\";\n\n        if (this._service == null)\n            this._service = new SessionService(this._setRootVar, this._session, $rootScope, $log);\n\n        return this._service;\n    }\n}\n\nangular\n    .module('pipSession')\n    .provider('pipSession', SessionProvider); \n","angular.module('pipSession', []);\n\nimport './IdentityService';\nimport './SessionService';\n\nexport * from './IIdentity';\nexport * from './IIdentityService';\nexport * from './IdentityService';\n\nexport * from './ISessionService';\nexport * from './SessionService';\n","import { TransactionError } from './TransactionError'\n\nexport class Transaction {\n    private _scope: string = null;\n    private _id: string = null;\n    private _operation: string = null;\n    private _error: TransactionError = new TransactionError();\n    private _progress: number = 0;\n\n    public constructor(scope: string) {\n        this._scope = scope;\n    }\n\n    public get scope(): string {\n        return this._scope;\n    }\n\n    public get id(): string {\n        return this._id;\n    }\n\n    public get operation(): string {\n        return this._operation;\n    }\n\n    public get progress(): number {\n        return this._progress;\n    }\n\n    public get error(): TransactionError {\n        return this._error;\n    }\n\n    public get errorMessage(): string {\n        return this._error.message;\n    }\n\n    public reset(): void {\n        this._id = null;\n        this._operation = null;\n        this._progress = 0;\n        this._error.reset();\n    }\n\n    public busy(): boolean {\n        return this._id != null;\n    }\n\n    public failed(): boolean {\n        return !this._error.empty();\n    }\n\n    public aborted(id: string): boolean {\n        return this._id != id;\n    }\n\n    public begin(operation: string): string {\n        // Transaction is already running\n        if (this._id != null) return null;\n\n        this._id = new Date().getTime().toString();\n        this._operation = operation || 'PROCESSING'\n        this._error.reset();\n\n        return this._id;\n    }\n\n    public update(progress: number): void {\n        this._progress = Math.max(progress, 100);\n    }\n\n    public abort(): void {\n        this._id = null;\n        this._error.reset();\n    }\n\n    public end(error?: any): void {\n        this._error.decode(error);\n        this._id = null;\n    }\n}\n","export class TransactionError {\n    public code: string;\n    public message: string;\n    public details: any;\n    public cause: string;\n    public stack_trace: string;\n\n    public constructor(error?: any) {\n        if (error != null)\n            this.decode(error);\n    }\n\n    public reset(): void {\n        this.code = null;\n        this.message = null;\n        this.details = null;\n        this.cause = null;\n        this.stack_trace = null;\n    }\n\n    public empty(): boolean {\n        return this.message = null && this.code == null;\n    }\n\n    public decode(error: any): void {\n        this.reset();\n\n        if (error == null) return;\n\n        // Process regular messages\n        if (error.message) {\n            this.message = error.message;\n        }\n\n        // Process server application errors\n        if (error.data) {\n            if (error.data.code) { \n                // process server error codes here\n                this.message = this.message || 'ERROR_' + error.data.code;\n                this.code = this.code || error.data.code;\n            }\n\n            if (error.data.message) {\n                this.message = this.message || error.data.message;\n            }\n\n            this.message = this.message || error.data;\n            this.details = this.details || error.data;\n\n            this.cause = error.data.cause;\n            this.stack_trace = error.data.stack_trace;\n            this.details = error.data.details;            \n        }\n\n        // Process standard HTTP errors\n        if (error.statusText) {\n            this.message = this.message || error.statusText;\n        }\n        if (error.status) {\n            this.message = this.message || 'ERROR_' + error.status;\n            this.code = this.code || error.status;\n        }\n        \n        this.message = this.message || error;\n        this.details = this.details || error;\n    }\n}\n","import { Transaction } from './Transaction';\nimport { ITransactionService } from './ITransactionService';\n\nclass TransactionService implements ITransactionService {\n    private _transactions: Transaction = <Transaction>{};\n\n    public constructor() {}\n\n    public create(scope?: string): Transaction {\n        let transaction: Transaction = new Transaction(scope);\n        \n        if (scope != null)\n            this._transactions[scope] = transaction;\n\n        return transaction;\n    }\n\n    public get(scope?: string): Transaction {\n        let transaction: Transaction = scope != null ? <Transaction>this._transactions[scope] : null;\n\n        if (transaction == null) {\n            transaction = new Transaction(scope);\n            if (scope != null)\n                this._transactions[scope] = transaction;\n        }\n\n        return transaction;\n    }\n}\n\nangular\n    .module('pipTransaction')\n    .service('pipTransaction', TransactionService);\n","import { ITranslateService } from '../translate/ITranslateService';\n\nfunction configureTransactionStrings($injector: ng.auto.IInjectorService) {\n    \"ngInject\";\n\n    let pipTranslate: ITranslateService = $injector.has('pipTranslateProvider') \n        ? <ITranslateService>$injector.get('pipTranslateProvider') : null;\n\n    if (pipTranslate) {\n        pipTranslate.setTranslations('en', {\n            'ENTERING': 'Entering...',\n            'PROCESSING': 'Processing...',\n            'LOADING': 'Loading...',\n            'SAVING': 'Saving...'\n        });\n\n        pipTranslate.setTranslations('ru', {\n            'ENTERING': 'Вход в систему...',\n            'PROCESSING': 'Обрабатывается...',\n            'LOADING': 'Загружается...',\n            'SAVING': 'Сохраняется...'\n        });   \n    }\n    \n}\n\nangular\n    .module('pipTransaction')\n    .config(configureTransactionStrings);\n","angular.module('pipTransaction', []);\n\nimport './TransactionStrings';\nimport './TransactionError';\nimport './Transaction';\nimport './TransactionService';\n\nexport * from './TransactionError';\nexport * from './Transaction';\nexport * from './ITransactionService';\n","import { ITranslateService } from '../translate/ITranslateService';\n\nfunction translateDirective(pipTranslate): ng.IDirective {\n    \"ngInject\";\n\n    return {\n        restrict: 'EA',\n        scope: {\n            key1: '@pipTranslate',\n            key2: '@key'\n        },\n        link: (scope: any, element: ng.IAugmentedJQuery, attrs: ng.IAttributes) => {\n            let key: string = scope.key1 || scope.key2;\n            let value: string = pipTranslate.translate(key);\n            element.text(value);\n        }\n    };\n}\n\nfunction translateHtmlDirective(pipTranslate: ITranslateService): ng.IDirective {\n    \"ngInject\";\n\n    return {\n        restrict: 'EA',\n        scope: {\n            key1: '@pipTranslateHtml',\n            key2: '@key'\n        },\n        link: (scope: any, element: ng.IAugmentedJQuery, attrs: ng.IAttributes) => {\n            let key: string = scope.key1 || scope.key2;\n            let value: string = pipTranslate.translate(key);\n            element.html(value);\n        }\n    };\n}\n\nangular\n    .module('pipTranslate')\n    .directive('pipTranslate', translateDirective)\n    .directive('pipTranslateHtml', translateHtmlDirective);\n","import { ITranslateService } from './ITranslateService';\n\nfunction translateFilter(pipTranslate: ITranslateService) {\n    \"ngInject\";\n\n    return function (key: string) {\n        return pipTranslate.translate(key) || key;\n    }\n}\n\nfunction optionalTranslateFilter($injector: ng.auto.IInjectorService) {\n    \"ngInject\";\n\n    let pipTranslate: ITranslateService = $injector.has('pipTranslate') \n        ? <ITranslateService>$injector.get('pipTranslate') : null;\n\n    return function (key: string) {\n        return pipTranslate  ? pipTranslate.translate(key) || key : key;\n    }\n}\n\nangular\n    .module('pipTranslate')\n    .filter('translate', translateFilter);\n","﻿import { Translation } from './Translation';\nimport { ResetPageEvent } from '../utilities/PageResetService';\nimport { ITranslateService, ITranslateProvider } from './ITranslateService';\n\nexport let LanguageRootVar = \"$language\";\nexport let LanguageChangedEvent = \"pipLanguageChanged\";    \n\nclass TranslateService implements ITranslateService {\n    private _translation: Translation;\n    private _setRootVar: boolean;\n    private _persist: boolean;\n    private _rootScope: ng.IRootScopeService;\n    private _log: ng.ILogService;\n    private _window: ng.IWindowService;\n    private _mdDateLocale: angular.material.IDateLocaleProvider;\n\n    public constructor(\n        translation: Translation,\n        setRootVar: boolean,\n        persist: boolean,\n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService,\n        $window: ng.IWindowService,\n        $mdDateLocale: angular.material.IDateLocaleProvider,\n    ) {\n        this._setRootVar = setRootVar;\n        this._persist = persist;\n        this._translation = translation;\n        this._rootScope = $rootScope;\n        this._log = $log;\n        this._window = $window;\n        this._mdDateLocale = $mdDateLocale;\n\n        if (this._persist && this._window.localStorage)\n            this._translation.language = this._window.localStorage.getItem('language') || this._translation.language;\n\n        this._log.debug(\"Set language to \" + this._translation.language);\n\n        this.save();\n    }\n\n    private changeLocale(locale: string) {\n        if (!locale) return;\n\n        // var localeDate: moment.MomentLanguageData;\n        var localeDate: any;\n\n        moment.locale(locale);\n        localeDate = moment.localeData();\n\n        this._mdDateLocale.months = angular.isArray(localeDate._months) ? localeDate._months : localeDate._months.format;\n        this._mdDateLocale.shortMonths = angular.isArray(localeDate._monthsShort) ? localeDate._monthsShort : localeDate._monthsShort.format;\n        this._mdDateLocale.days = angular.isArray(localeDate._weekdays) ? localeDate._weekdays : localeDate._weekdays.format;\n        this._mdDateLocale.shortDays = localeDate._weekdaysMin;\n        this._mdDateLocale.firstDayOfWeek = localeDate._week.dow;\n    }\n\n    private save(): void {\n        if (this._setRootVar)\n            this._rootScope[LanguageRootVar] = this._translation.language;\n\n        if (this._persist && this._window.localStorage != null)\n            this._window.localStorage.setItem('language', this._translation.language);\n    }\n\n    public get language(): string {\n        return this._translation.language;\n    }\n\n    public set language(value: string) {\n        if (value != this._translation.language) {\n            this._translation.language = value;\n            \n            this._log.debug(\"Changing language to \" + value);\n\n            this.changeLocale(this._translation.language);\n            this.save();   \n\n            this._rootScope.$emit(LanguageChangedEvent, value);\n            this._rootScope.$emit(ResetPageEvent);\n        }\n    }\n\n    public use(language: string): string {\n        if (language != null)\n            this.language = language;\n        return this.language;\n    }\n\n    public setTranslations(language: string, translations: any): void {\n        return this._translation.setTranslations(language, translations);\n    }\n\n    public translations(language: string, translations: any): void {\n        return this._translation.setTranslations(language, translations);\n    }\n\n    public translate(key: string): string {\n        return this._translation.translate(key);\n    }\n\n    public translateArray(keys: string[]): string[] {\n        return this._translation.translateArray(keys);\n    }\n    \n    public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\n        return this._translation.translateSet(keys, keyProp, valueProp);\n    }\n\n    public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\n        return this._translation.translateObjects(items, keyProp, valueProp);\n    }\n\n    public translateWithPrefix(prefix: string, key: string) {\n        return this._translation.translateWithPrefix(prefix, key);\n    }\n\n    public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\n        return this._translation.translateSetWithPrefix(prefix, keys, keyProp, valueProp);\n    }\n\n    public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\n        return this._translation.translateSetWithPrefix2(prefix, keys, keyProp, valueProp);\n    }\n}\n\nclass TranslateProvider extends Translation implements ITranslateProvider {\n    private _translation: Translation;\n    private _setRootVar: boolean = true;\n    private _persist: boolean = true;\n    private _service: TranslateService;\n    \n    public constructor() {\n        super();\n    }\n\n    public get setRootVar(): boolean {\n        return this._setRootVar;  \n    }\n\n    public set setRootVar(value: boolean) {\n        this._setRootVar = !!value;\n    }\n\n    public get persist(): boolean {\n        return this._persist;  \n    }\n\n    public set persist(value: boolean) {\n        this._persist = !!value;\n    }\n\n    public $get(\n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService, \n        $window: ng.IWindowService,\n        $mdDateLocale: angular.material.IDateLocaleProvider\n    ): any {\n        \"ngInject\";\n\n        if (this._service == null) \n            this._service = new TranslateService(this, this._setRootVar, this._persist, $rootScope, $log, $window, $mdDateLocale);\n\n        return this._service;\n    }\n}\n\nfunction initTranslate(pipTranslate: ITranslateService) {\n    pipTranslate.language;\n}\n\nangular\n    .module('pipTranslate')\n    .provider('pipTranslate', TranslateProvider)\n    .run(initTranslate);\n","export class Translation {\n    protected _language: string = 'en';\n    protected _translations = {\n        en: {\n            'en': 'English',\n            'ru': 'Russian',\n            'es': 'Spanish',\n            'pt': 'Portuguese',\n            'de': 'German',\n            'fr': 'French'\n        },\n        ru: {\n            'en': 'Английский',\n            'ru': 'Русский',\n            'es': 'Испанский',\n            'pt': 'Португальский',\n            'de': 'Немецкий',\n            'fr': 'Французский'\n        }\n    };\n\n    public constructor() {}\n\n    public get language(): string { return this._language; }\n    public set language(value: string) { this._language = value; }\n\n    public use(language: string): string {\n        if (language != null)\n            this._language = language;\n        return this._language;\n    }\n\n    // Set translation strings for specific language\n    public setTranslations(language: string, translations: any): void {\n        let map = this._translations[language] || {};\n        this._translations[language] = _.extend(map, translations);\n    }\n\n    // Yet another method to set translation strings for specific language\n    public translations(language: string, translations: any): void {\n        this.setTranslations(language, translations);\n    }\n\n    // Translate a string by key using set language\n    public translate(key: string): string {\n        if (_.isNull(key) || _.isUndefined(key)) return '';\n\n        let translations = this._translations[this._language] || {};\n        return translations[key] || key;\n    }\n\n    // Translate an array of strings\n    public translateArray(keys: string[]): string[] {\n        if (_.isNull(keys) || keys.length == 0) return [];\n\n        let values: string[] = [];\n        let translations = this._translations[this._language] || {};\n\n        _.each(keys, function (k: string) {\n            let key = k || '';\n            values.push(translations[key] || key);\n        });\n\n        return values;\n    }\n\n    // Translate an array of strings into array of objects (set)\n    public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\n        if (_.isNull(keys) || keys.length == 0) return [];\n\n        keyProp = keyProp || 'id';\n        valueProp = valueProp || 'name';\n\n        let values: any[] = [];\n        let translations = this._translations[this._language] || {};\n\n        _.each(keys, function (key: string) {\n            let value: any = {};\n            key = key || '';\n\n            value[keyProp] = key;\n            value[valueProp] = translations[key] || key;\n\n            values.push(value);\n        });\n\n        return values;\n    }\n\n    // Translate a collection of objects\n    public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\n        if (_.isNull(items) || items.length == 0) return [];\n\n        keyProp = keyProp || 'name';\n        valueProp = valueProp || 'nameLocal';\n\n        let translations = this._translations[this._language] || {};\n\n        _.each(items, function (item: any) {\n            let key = item[keyProp] || '';\n\n            item[valueProp] = translations[key] || key;\n        });\n\n        return items;\n    }\n\n    // Translate a string by key  with prefix using set language todo\n    public translateWithPrefix(prefix: string, key: string) {\n        prefix = prefix ? prefix + '_' : '';\n        key = (prefix + key).replace(/ /g, '_').toUpperCase();\n        if (key == null) return '';\n        let translations = this._translations[this._language] || {};\n        return translations[key] || key;\n    };\n\n    public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\n        if (_.isNull(keys) || keys.length == 0) return [];\n\n        prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() : '';\n        keyProp = keyProp || 'id';\n        valueProp = valueProp || 'name';\n\n        let values = [];\n        let translations = this._translations[this._language] || {};\n\n        _.each(keys, function (key: string) {\n            let value: any = {}; \n            key = key || '';\n\n            value[keyProp] = key;\n            value[valueProp] = translations[prefix + '_' + key] || key;\n\n            values.push(value);\n        });\n\n        return values;\n    }\n\n    // Translate an array of strings, apply uppercase and replace ' ' => '_'\n    public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\n        if (_.isNull(keys) || keys.length == 0) return [];\n\n        keyProp = keyProp || 'id';\n        valueProp = valueProp || 'name';\n        prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() + '_': '';\n\n        let values = [];\n        let translations = this._translations[this._language] || {};\n\n        _.each(keys, function (key: string) {\n            let value: any = {};\n            key = key || '';\n\n            value[keyProp] = key;\n            value[valueProp] = translations[prefix + key.replace(/ /g, '_').toUpperCase()]\n                || (prefix + key.replace(/ /g, '_').toUpperCase());\n\n            values.push(value);\n        });\n\n        return values;\n    }\n}\n","angular.module('pipTranslate', []);\n\nimport './Translation';\nimport './TranslateService';\nimport './TranslateFilter';\nimport './TranslateDirective';\n\nexport * from './Translation';\nexport * from './ITranslateService';\nexport * from './TranslateService';\n","import { ICodes } from './ICodes';\n\nclass Codes implements ICodes {\n    // Simple version of string hashcode\n    public hash(value: string): number {\n        if (value == null) return 0;\n        \n        let result: number = 0;\n        for (let i = 0; i < value.length; i++)\n            result += value.charCodeAt(i);\n\n        return result;\n    }\n\n    // Generates random big number for verification codes\n    public verification(): string {\n        return Math.random().toString(36).substr(2, 10).toUpperCase(); // remove `0.`\n    }\n}\n\nangular\n    .module('pipCodes', [])\n    .service('pipCodes', Codes);\n","import { IFormat } from './IFormat';\n\nclass Format implements IFormat {\n    // Cached for parsed formats\n    private cache = {};\n\n    // Creates a sample line from a text\n    public sample(value: string, maxLength: number): string {\n        if (!value || value == '') {\n            return '';\n        }\n\n        var length: number = value.indexOf('\\n');\n        length = length >= 0 ? length : value.length;\n        length = length < maxLength ? value.length : maxLength;\n\n        return value.substring(0, length);\n    }\n\n    private strRepeat(str: string, qty: number): string {\n        if (qty < 1) { \n            return '';\n        }\n        var result: string = '';\n        while (qty > 0) {\n            if (qty & 1) result += str;\n            qty >>= 1, str += str;\n        }\n        return result;\n    }\n\n    private getType(variable): string {\n        return toString.call(variable).slice(8, -1).toLowerCase();\n    }\n\n    private parseFormat(fmt: string): any {\n        let _fmt: string = fmt, match = [], parse_tree = [], arg_names: number = 0;\n        while (_fmt) {\n            if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\n                parse_tree.push(match[0]);\n            }\n            else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\n                parse_tree.push('%');\n            }\n            else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\n                if (match[2]) {\n                    arg_names |= 1;\n                    let field_list: string[] = [], replacement_field: string = match[2], field_match: string[] = [];\n                    if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                        field_list.push(field_match[1]);\n                        while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\n                            if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1]);\n                            }\n                            else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1]);\n                            }\n                            else {\n                                throw new Error('Unknown error');\n                            }\n                        }\n                    }\n                    else {\n                        throw new Error('Unknown error');\n                    }\n                    match[2] = field_list;\n                }\n                else {\n                    arg_names |= 2;\n                }\n                if (arg_names === 3) {\n                    throw new Error('Mixing positional and named placeholders is not (yet) supported');\n                }\n                parse_tree.push(match);\n            }\n            else {\n                throw new Error('Unknown error');\n            }\n            _fmt = _fmt.substring(match[0].length);\n        }\n        return parse_tree;\n    }\n\n    private format(parse_tree: any, argv: any): string {\n        let cursor: number = 0; \n        let tree_length: number = parse_tree.length; \n        let output = [];\n\n        for (let i = 0; i < tree_length; i++) {\n            let node_type = this.getType(parse_tree[i]);\n            if (node_type === 'string') {\n                output.push(parse_tree[i]);\n            }\n            else if (node_type === 'array') {\n                let match = parse_tree[i]; // convenience purposes only\n                let arg: any;\n                if (match[2]) { // keyword argument\n                    arg = argv[cursor];\n                    for (let k = 0; k < match[2].length; k++) {\n                        if (!arg.hasOwnProperty(match[2][k])) {\n                            throw new Error(this.sprintf('Property \"%s\" does not exist', match[2][k]));\n                        }\n                        arg = arg[match[2][k]];\n                    }\n                } else if (match[1]) { // positional argument (explicit)\n                    arg = argv[match[1]];\n                }\n                else { // positional argument (implicit)\n                    arg = argv[cursor++];\n                }\n\n                if (/[^s]/.test(match[8]) && (this.getType(arg) != 'number')) {\n                    throw new Error(this.sprintf('Expecting number but found %s', this.getType(arg)));\n                }\n                switch (match[8]) {\n                    case 'b': arg = arg.toString(2); break;\n                    case 'c': arg = String.fromCharCode(arg); break;\n                    case 'd': arg = parseInt(arg, 10); break;\n                    case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\n                    case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\n                    case 'o': arg = arg.toString(8); break;\n                    case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;\n                    case 'u': arg = Math.abs(arg); break;\n                    case 'x': arg = arg.toString(16); break;\n                    case 'X': arg = arg.toString(16).toUpperCase(); break;\n                }\n                arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);                \n                let pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\n                let pad_length = match[6] - String(arg).length;\n                let pad = match[6] ? this.strRepeat(pad_character, pad_length) : '';\n                output.push(match[5] ? arg + pad : pad + arg);\n            }\n        }\n        return output.join('');\n    }\n    \n    public sprintf(message: string, ...args: any[]): string {\n        if (!this.cache.hasOwnProperty(message))\n            this.cache[message] = this.parseFormat(message);\n\n        return this.format(this.cache[message], args);\n    }\n}\n\n\nangular\n    .module('pipFormat', [])\n    .service('pipFormat', Format);\n","import { IPageResetService } from './IPageResetService';\n\n\nexport let ResetPageEvent: string = \"pipResetPage\";\nexport let ResetAreaEvent: string = \"pipResetArea\";\n\nexport let ResetRootVar: string = \"$reset\";\nexport let ResetAreaRootVar: string = \"$resetArea\";\n\n\nclass PageResetService implements IPageResetService {\n    private _rootScope: ng.IRootScopeService;\n    private _log: ng.ILogService;\n    private _timeout: ng.ITimeoutService;\n\n    public constructor(\n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService, \n        $timeout: ng.ITimeoutService\n    ) {\n        this._rootScope = $rootScope;\n        this._log = $log;\n        this._timeout = $timeout;\n\n        $rootScope[ResetRootVar] = false;\n        $rootScope[ResetAreaRootVar] = null;\n    }\n\n    public reset(): void {\n        this._log.debug(\"Resetting the entire page\");\n        this.performReset(null);\n    }\n\n    public resetArea(area: string): void {\n        this._log.debug(\"Resetting the area \" + area);\n        this.performReset(area);\n    }\n\n    private performReset(area?: string): void {\n        this._rootScope[ResetRootVar] = area == null;\n        this._rootScope[ResetAreaRootVar] = area;\n\n        this._timeout(() => {\n            this._rootScope[ResetRootVar] = false;\n            this._rootScope[ResetAreaRootVar] = null;\n        }, 0);\n    }\n}\n\n\nfunction hookResetEvents(\n    $rootScope: ng.IRootScopeService, \n    pipPageReset: IPageResetService\n) {\n    $rootScope.$on(ResetPageEvent, () => { pipPageReset.reset(); });\n    $rootScope.$on(ResetAreaEvent, (event, area) => { pipPageReset.resetArea(area); });\n}\n\n\nangular.module('pipPageReset', [])\n    .service('pipPageReset', PageResetService)\n    .run(hookResetEvents);\n","import { IScrollService } from './IScrollService';\n\n\nclass ScrollService implements IScrollService {\n\n    public scrollTo(parentElement, childElement, animationDuration): void {\n        if (!parentElement || !childElement) return;\n        if (animationDuration == undefined) animationDuration = 300;\n\n        setTimeout(function () {\n            if (!$(childElement).position()) return;\n            var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\n            if (modDiff < 20) return;\n            var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\n            if (animationDuration > 0)\n                $(parentElement).animate({\n                    scrollTop: scrollTo + 'px'\n                }, animationDuration);\n        }, 100);\n    }\n\n}\n\n\nangular\n    .module('pipScroll', [])\n    .service('pipScroll', ScrollService);\n","import { ISystemInfo } from './ISystemInfo';\n\n\nclass SystemInfo implements ISystemInfo {\n    private _window: ng.IWindowService;\n\n    public constructor($window: ng.IWindowService) {\n        \"ngInject\";\n\n        this._window = $window;\n    }\n\n    // todo add support for iPhone\n    public get browserName(): string {\n        let ua = this._window.navigator.userAgent;\n\n        if (ua.search(/Edge/) > -1) return \"edge\";\n        if (ua.search(/MSIE/) > -1) return \"ie\";\n        if (ua.search(/Trident/) > -1) return \"ie\";\n        if (ua.search(/Firefox/) > -1) return \"firefox\";\n        if (ua.search(/Opera/) > -1) return \"opera\";\n        if (ua.search(/OPR/) > -1) return \"opera\";\n        if (ua.search(/YaBrowser/) > -1) return \"yabrowser\";\n        if (ua.search(/Chrome/) > -1) return \"chrome\";\n        if (ua.search(/Safari/) > -1) return \"safari\";\n        if (ua.search(/Maxthon/) > -1) return \"maxthon\";\n        \n        return \"unknown\";\n    }\n\n    public get browserVersion(): string {\n        let version;\n        let ua = this._window.navigator.userAgent;\n        let browser = this.browserName;\n\n        switch (browser) {\n            case \"edge\":\n                version = (ua.split(\"Edge\")[1]).split(\"/\")[1];\n                break;\n            case \"ie\":\n                version = (ua.split(\"MSIE \")[1]).split(\";\")[0];\n                break;\n            case \"ie11\":\n                browser = \"ie\";\n                version = (ua.split(\"; rv:\")[1]).split(\")\")[0];\n                break;\n            case \"firefox\":\n                version = ua.split(\"Firefox/\")[1];\n                break;\n            case \"opera\":\n                version = ua.split(\"Version/\")[1];\n                break;\n            case \"operaWebkit\":\n                version = ua.split(\"OPR/\")[1];\n                break;\n            case \"yabrowser\":\n                version = (ua.split(\"YaBrowser/\")[1]).split(\" \")[0];\n                break;\n            case \"chrome\":\n                version = (ua.split(\"Chrome/\")[1]).split(\" \")[0];\n                break;\n            case \"safari\":\n                version = (ua.split(\"Version/\")[1]).split(\" \")[0];\n                break;\n            case \"maxthon\":\n                version = ua.split(\"Maxthon/\")[1];\n                break;\n        }\n\n        return version;\n    }\n    \n    public get platform(): string {\n        let ua = this._window.navigator.userAgent;\n\n        if (/iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(ua.toLowerCase())) \n            return 'mobile';\n\n        return 'desktop';\n    }\n\n    public get os(): string {\n        let ua = this._window.navigator.userAgent;\n\n        try {\n            let osAll = (/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(ua.toLowerCase()) || [ua])[0].replace('sunos', 'solaris');\n            let osAndroid = (/(android)/.exec(ua.toLowerCase()) || '');\n            return osAndroid && (osAndroid == 'android' || (osAndroid[0] == 'android')) ? 'android' : osAll;\n        } catch (err) {\n            return 'unknown'\n        }\n    }\n\n    public isDesktop(): boolean {\n        return this.platform == 'desktop';\n    }\n\n    public isMobile(): boolean {\n        return this.platform == 'mobile';\n    }\n\n    // Todo: complete implementation\n    public isCordova(): boolean {\n        return false;\n    }\n\n    // Todo: Move to errors\n    public isSupported(supported?: any): boolean {\n        if (!supported) \n            supported = {\n                edge: 11,\n                ie: 11,\n                firefox: 43, //4, for testing\n                opera: 35,\n                chrome: 47\n            };\n\n        let browser = this.browserName;\n        let version = this.browserVersion;\n        version = version.split(\".\")[0]\n\n        if (browser && supported[browser] && version >= supported[browser]) \n            return true;\n\n        return true;\n    }\n}\n\n\nangular\n    .module('pipSystemInfo', [])\n    .service('pipSystemInfo', SystemInfo);\n","import { ITags } from './ITags';\n\nclass Tags implements ITags {\n\n    public normalizeOne(tag: string): string {\n        return tag \n            ? _.trim(tag.replace(/(_|#)+/g, ' '))\n            : null;\n    }\n\n    public compressOne(tag: string): string {\n        return tag\n            ? tag.replace(/( |_|#)/g, '').toLowerCase()\n            : null;\n    }\n\n    public equal(tag1: string, tag2: string): boolean {\n        if (tag1 == null && tag2 == null)\n            return true;\n        if (tag1 == null || tag2 == null)\n            return false;\n        return this.compressOne(tag1) == this.compressOne(tag2);\n    }\n\n    public normalizeAll(tags: any): string[] {\n        if (_.isString(tags))\n            tags = tags.split(/( |,|;)+/);\n\n        tags = _.map(tags, (tag: string) => this.normalizeOne(tag));\n\n        return tags;\n    }\n\n    public compressAll(tags: any): string[] {\n        if (_.isString(tags))\n            tags = tags.split(/( |,|;)+/);\n\n        tags = _.map(tags, (tag: string) => this.compressOne(tag));\n\n        return tags;\n    }\n\n    public extract(entity: any, searchFields?: string[]): string[] {\n        let tags = this.normalizeAll(entity.tags);\n\n        _.each(searchFields, (field) => {\n            let text = entity[field] || '';\n\n            if (text != '') {\n                let hashTags = text.match(/#\\w+/g);\n                tags = tags.concat(this.normalizeAll(hashTags));\n            }\n        });\n\n        return _.uniq(tags);\n    }\n}\n\n\nangular\n    .module('pipTags', [])\n    .service('pipTags', Tags);\n","import { ITimerService } from './ITimerService';\n\nclass TimerEvent {\n    public event: string;\n    public timeout: number;\n    public interval: any;\n\n    public constructor(event: string, timeout: number) {\n        this.event = event;\n        this.timeout = timeout;\n    }\n}\n\n\nlet DefaultEvents: TimerEvent[] = [\n    new TimerEvent('pipAutoPullChanges', 60000), // 1 min\n    new TimerEvent('pipAutoUpdatePage', 15000), // 15 sec\n    new TimerEvent('pipAutoUpdateCollection', 300000) // 5 min\n];\n\n\nclass TimerService implements ITimerService {\n    private _rootScope: ng.IRootScopeService;\n    private _log: ng.ILogService;\n    private _interval: ng.IIntervalService;        \n    private _started = false;\n    private _events: TimerEvent[] = _.cloneDeep(DefaultEvents);\n\n    public constructor(\n        $rootScope: ng.IRootScopeService,\n        $log: ng.ILogService, \n        $interval: ng.IIntervalService\n    ) {\n        \"ngInject\";\n\n        this._rootScope = $rootScope;\n        this._log = $log;\n        this._interval = $interval;\n    }\n\n    public isStarted(): boolean {\n        return this._started;\n    }\n\n    public addEvent(event: string, timeout: number): void {\n        var existingEvent = _.find(this._events, (e) => e.event == event);\n        if (existingEvent != null) return;\n\n        let newEvent = <TimerEvent> {\n            event: event,\n            timeout: timeout\n        };\n        this._events.push(newEvent);\n\n        if (this._started)\n            this.startEvent(newEvent);\n    }\n\n    public removeEvent(event: string): void {\n        for (let i = this._events.length - 1; i >= 0; i--) {\n            let existingEvent = this._events[i];\n            if (existingEvent.event == event) {\n                this.stopEvent(existingEvent);\n                this._events.splice(i, 1);\n            }\n        }\n    }\n\n    public clearEvents(): void {\n        this.stop();\n        this._events = [];\n    }\n\n    private startEvent(event: TimerEvent): void {\n        event.interval = this._interval(\n            () => { \n                this._log.debug('Generated timer event ' + event.event); \n                this._rootScope.$emit(event.event)\n            },\n            event.timeout\n        )\n    }\n\n    private stopEvent(event: TimerEvent): void {\n        if (event.interval != null) {\n            try {\n                this._interval.cancel(event.interval);\n            } catch (ex) {\n                // Do nothing\n            }\n            event.interval = null;\n        }\n    }\n\n    public start(): void {\n        if (this._started) return;\n\n        _.each(this._events, (event) => {\n            this.startEvent(event);\n        });\n\n        this._started = true;\n    }\n\n    public stop(): void {\n        _.each(this._events, (event) => {\n            this.stopEvent(event);\n        });\n\n        this._started = false;\n    }\n}\n\n\nangular.module('pipTimer', [])\n    .service('pipTimer', TimerService);\n","import './Format';\nimport './TimerService';\nimport './ScrollService';\nimport './Tags';\nimport './Codes';\nimport './SystemInfo';\nimport './PageResetService';\n\nexport * from './IFormat';\nexport * from './ITimerService';\nexport * from './IScrollService';\nexport * from './ITags';\nexport * from './ICodes';\nexport * from './ISystemInfo';\nexport * from './IPageResetService';"]}