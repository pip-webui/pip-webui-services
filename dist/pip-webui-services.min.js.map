{"version":3,"sources":["services.ts","scope/scope.ts","scope/scope_error.ts","scope/scope_transaction.ts","routing/back_decorator.ts","routing/redirect_decorator.ts","routing/routing.ts","routing/routing_events.ts","session/identity.ts","session/session.ts","translate/translate.ts","translate/translate_directive.ts","translate/translate_filter.ts","translate/translate_service.ts","utilities/codes.ts","utilities/collections.js","utilities/format.ts","utilities/reset.ts","utilities/general.js","utilities/scroll.ts","utilities/system_info.ts","utilities/tags.ts","utilities/timer.ts","utilities/utilities.js"],"names":["angular","module","pip","scope","scope_1","thisModule","factory","$rootScope","initError","errors","message","undefined","code","details","errorMessage","error","_","isNull","data","statusText","status","errorCode","errorDetails","createError","scopeObject","reset","empty","get","set","console","isObject","run","$injector","pipTranslate","has","setTranslations","ENTERING","PROCESSING","LOADING","SAVING","pipError","initTransaction","transactions","id","operation","createTransaction","transaction","busy","failed","aborted","begin","Date","getTime","abort","end","err","routing","captureStateTranslations","$on","event","toState","toParams","fromState","fromParams","CurrentState","name","url","params","PreviousState","decorateBackStateService","$delegate","$window","goBack","history","back","goBackAndSelect","state","cloneDeep","extend","go","addBackStateDecorator","$provide","decorator","$inject","config","decorateRedirectStateProvider","redirect","RedirectedStates","this","addRedirectStateProviderDecorator","$timeout","Error","preventDefault","transitionTo","location","addRedirectStateDecorator","decorateRedirectStateService","hookRoutingEvents","$log","$state","RoutingVar","unfoundState","to","IdentityRootVar","IdentityChangedEvent","IdentityService","setRootVar","identity","_setRootVar","_identity","_rootScope","prototype","session","defineProperty","value","$broadcast","enumerable","configurable","IdentityProvider","_service","$get","provider","SessionRootVar","SessionOpenedEvent","SessionClosedEvent","SessionService","_session","open","fullReset","partialReset","close","oldSession","SessionProvider","translate","restrict","key1","key2","link","element","attrs","key","text","directive","pipTranslateDirective","pipTranslateHtmlDirective","translateFilter","optionalTranslateFilter","filter","__extends","d","b","constructor","p","hasOwnProperty","Object","create","__","en","ru","es","pt","de","fr","Translation","_language","use","language","translations","map","_translations","isUndefined","translateArray","keys","length","values","each","k","push","translateSet","keyProp","valueProp","translateObjects","items","item","translateWithPrefix","prefix","replace","toUpperCase","translateSetWithPrefix","translateSetWithPrefix2","TranslateService","translation","persist","localStorageService","_persist","_translation","_storage","save","LanguageRootVar","LanguageChangedEvent","TranslateProvider","_super","call","hash","result","i","charCodeAt","verification","Math","random","toString","substr","sample","maxLength","indexOf","substring","strRepeat","str","qty","sprintf","get_type","variable","slice","toLowerCase","args","_i","arguments","str_format","cache","parse","format","parse_tree","argv","arg","match","pad","pad_character","pad_length","node_type","output","tree_length","cursor","test","String","fromCharCode","parseInt","toExponential","parseFloat","toFixed","abs","charAt","str_repeat","join","fmt","arg_names","exec","_fmt","replacement_field","field_match","field_list","resetPartial","resetFull","resetAll","full","partial","$reset","$partialReset","scrollTo","parentElement","childElement","animationDuration","setTimeout","$","position","modDiff","scrollTop","top","animate","getBrowserName","ua","navigator","userAgent","search","version","split","browser","getPlatform","isDesktop","isMobile","isCordova","getOS","osAll","osAndroid","isSupported","supported","edge","ie","firefox","opera","getBrowserVersion","normalizeOne","tag","trim","compressOne","equal","tag1","tag2","normalizeAll","tags","isString","compressAll","extract","entity","searchFields","field","hashTags","concat","uniq","normalize","compress","utilities","DefaultEvents","TimerEvent","timeout","TimerService","$interval","_started","_events","_interval","addEvent","existingEvent","find","e","newEvent","startEvent","removeEvent","stopEvent","splice","clearEvents","stop","_this","interval","cancel","ex","start"],"mappings":"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","file":"pip-webui-services.min.js","sourcesContent":["/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipServices', [\r\n        'pipScope',\r\n\t    'pipTranslate',\r\n        'pipRouting',\r\n        'pipTimer',\r\n        'pipSession',\r\n        'pipIdentity',\r\n        'pipSystemInfo',\r\n        'pipFormat',\r\n        'pipScroll',\r\n        'pipPageReset',        \r\n        'pipTags'\r\n    ]);\r\n    \r\n})();","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.scope {\r\n    'use strict';\r\n\r\n    angular.module('pipScope', ['pipTranslate', 'pipScope.Error', 'pipScope.Transaction']);\r\n    angular.module('pipTransactions', ['pipScope']);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.scope {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipScope.Error', []);\r\n\r\n    /*\r\n     * Error is designed to assist with error handling\r\n     * within different application scopes & controllers without overlap.\r\n     *\r\n     * A unique identification of the scope/controller is passed to the service\r\n     * when it is initialized to identify the error for that scope.\r\n     * */\r\n    thisModule.factory('pipError',\r\n        function ($rootScope) {\r\n\r\n            // Initialize error scope\r\n            $rootScope.errors = {};\r\n\r\n            return createError;\r\n\r\n            //----------------------------\r\n\r\n            function initError(scope) {\r\n                $rootScope.errors[scope] = {\r\n                    message: undefined,\r\n                    code: undefined,\r\n                    details: undefined\r\n                };\r\n            };\r\n\r\n            function errorMessage(error) {\r\n                if (_.isNull(error)) {\r\n                    return null;\r\n                }\r\n\r\n                // Process regular messages\r\n                if (error.message) {\r\n                    return error.message;\r\n                }\r\n\r\n                // Process server application errors\r\n                if (error.data) {\r\n                    if (error.data.code) {\r\n                        // process server error codes here\r\n                        return 'ERROR_' + error.data.code;\r\n                    }\r\n\r\n                    if (error.data.message) {\r\n                        return error.data.message;\r\n                    }\r\n                }\r\n\r\n                // Process standard HTTP errors\r\n                if (error.statusText) {\r\n                    return error.statusText;\r\n                }\r\n\r\n                if (error.status) {\r\n                    return 'ERROR_' + error.status;\r\n                }\r\n                \r\n                return error.data ? error.data : error;\r\n            };\r\n\r\n            function errorCode(error) {\r\n                if (_.isNull(error)) {\r\n                    return null;\r\n                }\r\n\r\n                if (error.data && error.data.code) {\r\n                    return error.data.code;\r\n                }\r\n\r\n                if (error.status) {\r\n                    return error.status;\r\n                }\r\n                \r\n                return null;\r\n            };\r\n\r\n            function errorDetails(error) {\r\n                return error && error.data ? error.data : error;\r\n            };\r\n\r\n            function createError(scope, scopeObject) {\r\n                scope = scope || 'global';\r\n\r\n                var error = {\r\n                    reset: function () {\r\n                        initError(scope);\r\n                    },\r\n\r\n                    empty: function() {\r\n                        var error = $rootScope.errors[scope];\r\n                        return _.isNull(error) || (_.isNull(error.message) && _.isNull(error.code));\r\n                    },\r\n\r\n                    get: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope];\r\n                        }\r\n                        return '';\r\n                    },\r\n\r\n                    message: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].message;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    code: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].code;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    details: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].details;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    set: function (error) {\r\n                        if (error) {\r\n                            //pipAssert.isObject(error, \"Setting error: error should be an object\");\r\n\r\n                            $rootScope.errors[scope] = {\r\n                                message: errorMessage(error),\r\n                                code: errorCode(error),\r\n                                details: errorDetails(error)\r\n                            };\r\n                            console.error($rootScope.errors[scope]);\r\n                        } else {\r\n                            initError(scope);\r\n                        }\r\n                    }\r\n                };\r\n\r\n                // Assign error into scope\r\n                if (_.isObject(scopeObject)) scopeObject.error = error;\r\n\r\n                return error;\r\n            };\r\n        }\r\n    );\r\n    \r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.scope {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipScope.Transaction', ['pipTranslate']);\r\n\r\n\tthisModule.run(function($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n        if (pipTranslate) {\r\n            pipTranslate.setTranslations('en', {\r\n                'ENTERING': 'Entering...',\r\n                'PROCESSING': 'Processing...',\r\n                'LOADING': 'Loading...',\r\n                'SAVING': 'Saving...'\r\n            });\r\n\r\n            pipTranslate.setTranslations('ru', {\r\n                'ENTERING': 'Вход в систему...',\r\n                'PROCESSING': 'Обрабатывается...',\r\n                'LOADING': 'Загружается...',\r\n                'SAVING': 'Сохраняется...'\r\n            });   \r\n        }\r\n\t\t\r\n\t});\r\n\r\n    /*\r\n     * Transaction is designed to assist with transaction processing\r\n     * within different application scopes & controllers without overlap.\r\n     *\r\n     * A unique identification of the scope/controller is passed to the service\r\n     * when it is initialized to identify the error for that scope.\r\n     * \r\n     * Transaction is also integrated with Error service. So you don't need to double it\r\n     * */\r\n    thisModule.factory('pipTransaction',\r\n        function ($rootScope, pipError) {\r\n\r\n            // Initialize transaction scope\r\n            $rootScope.transactions = {};\r\n\r\n            return createTransaction;\r\n\r\n            //---------------------------------\r\n\r\n            function initTransaction(scope) {\r\n                $rootScope.transactions[scope] = {\r\n                    id: undefined,\r\n                    operation: undefined\r\n                };\r\n            }\r\n            \r\n            function createTransaction(scope, scopeObject) {\r\n                scope = scope || 'global';\r\n\r\n                var error = pipError(scope);\r\n                var transaction = {\r\n                    error: error,\r\n\r\n                    reset: function () {\r\n                        initTransaction(\"\");\r\n                        error.reset();\r\n                    },\r\n\r\n                    busy: function() {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction != null && transaction.id;\r\n                    },\r\n\r\n                    failed: function() {\r\n                        return !error.empty();\r\n                    },\r\n\r\n                    aborted: function(id) {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return _.isNull(transaction) || transaction.id != id;\r\n                    },\r\n\r\n                    get: function () {\r\n                        if (_.isNull($rootScope.transactions[scope])) {\r\n                            initTransaction(scope);\r\n                        }\r\n                        return $rootScope.transactions[scope];\r\n                    },\r\n\r\n                    id: function () {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction ? transaction.id : null;\r\n                    },\r\n\r\n                    operation: function () {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction ? transaction.operation : null;\r\n                    },\r\n\r\n                    errorMessage: function () {\r\n                        return error.message();\r\n                    },\r\n\r\n                    begin: function (operation) {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        // Transaction already in progress\r\n                        if (transaction != null && transaction.id) {\r\n                            return null;\r\n                        }                      \r\n\r\n                        transaction = $rootScope.transactions[scope] = {\r\n                            id: new Date().getTime(),\r\n                            operation: operation || 'PROCESSING'\r\n                        };\r\n                        error.reset();\r\n\r\n                        return transaction.id;\r\n                    },\r\n\r\n                    abort: function() {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        if (transaction) {\r\n                            transaction.id = null;\r\n                        }\r\n                        error.reset();\r\n                    },\r\n\r\n                    end: function (err) {\r\n                        if (err) error.set(err);\r\n                        else error.reset();\r\n\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        if (transaction != null) {\r\n                            transaction.id = null;\r\n                        }                      \r\n                    }\r\n                };\r\n\r\n                if (_.isObject(scopeObject)) {\r\n                    scopeObject.error = error;\r\n                    scopeObject.transaction = transaction;\r\n                }\r\n\r\n                return transaction;\r\n            }\r\n        }\r\n    );\r\n\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.routing {\r\n    'use strict';\r\n\r\n    export let CurrentState: any;\r\n    export let PreviousState: any;\r\n\r\n    function captureStateTranslations($rootScope) {\r\n        \"ngInject\";\r\n\r\n        $rootScope.$on('$stateChangeSuccess',\r\n            (event, toState, toParams, fromState, fromParams) => {\r\n                pip.routing.CurrentState = {\r\n                    name: toState.name, \r\n                    url: toState.url, \r\n                    params: toParams\r\n                };\r\n\r\n                pip.routing.PreviousState = {\r\n                    name: fromState.name, \r\n                    url: fromState.url, \r\n                    params: fromParams\r\n                };\r\n            }\r\n        );\r\n\r\n    }\r\n    \r\n    function decorateBackStateService($delegate, $window) {\r\n        \"ngInject\";\r\n\r\n        $delegate.goBack = goBack;\r\n        $delegate.goBackAndSelect = goBackAndSelect;\r\n\r\n        return $delegate;\r\n        //////////////////////////////////////////////////\r\n\r\n        function goBack(): void {\r\n            $window.history.back()\r\n        }\r\n\r\n        function goBackAndSelect(params: any): void {\r\n            if (pip.routing.PreviousState != null \r\n                && pip.routing.PreviousState.name != null) {\r\n\r\n                let state = _.cloneDeep(pip.routing.PreviousState);\r\n\r\n                // Override selected parameters\r\n                state.params = _.extend(state.params, params);\r\n\r\n                $delegate.go(state.name, state.params);\r\n            } else {\r\n                $window.history.back();\r\n            }\r\n        }\r\n    }\r\n\r\n    function addBackStateDecorator($provide) {\r\n        $provide.decorator('$state', decorateBackStateService);\r\n    }\r\n\r\n    angular\r\n        .module('pipRouting.Back', [])\r\n        .config(addBackStateDecorator)\r\n        .run(captureStateTranslations);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.routing {\r\n    'use strict';\r\n\r\n    export let RedirectedStates: any = {};\r\n\r\n    function decorateRedirectStateProvider($delegate) {\r\n        \"ngInject\";\r\n\r\n        $delegate.redirect = redirect;\r\n\r\n        return $delegate;\r\n        /////////////////////////////////////////////\r\n\r\n        // Specify automatic redirect from one state to another\r\n        function redirect(fromState, toState) {\r\n            pip.routing.RedirectedStates[fromState] = toState;  \r\n            return this;\r\n        }\r\n    }\r\n\r\n    function addRedirectStateProviderDecorator($provide) {\r\n        \"ngInject\";\r\n\r\n        $provide.decorator('$state', decorateRedirectStateProvider);\r\n    }\r\n\r\n    function decorateRedirectStateService($delegate, $timeout) {\r\n        \"ngInject\";\r\n\r\n        $delegate.redirect = redirect;\r\n        \r\n        return $delegate;\r\n        ////////////////////////////////\r\n        \r\n        // Todo: Move this code directly to event handler?\r\n        // Todo: Nothing calls this code!!\r\n        function redirect(event, state, params) {\r\n            let toState = pip.routing.RedirectedStates[state.name];\r\n            if (_.isFunction(toState)) {\r\n                toState = toState(state.name, params);\r\n\r\n                if (_.isNull(toState))\r\n                    throw new Error('Redirected toState cannot be null');\r\n            }\r\n\r\n            if (!!toState) {\r\n                $timeout(() => {\r\n                    event.preventDefault();\r\n                    $delegate.transitionTo(toState, params, {location: 'replace'});\r\n                });\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function addRedirectStateDecorator($provide) {\r\n        \"ngInject\";\r\n\r\n        $provide.decorator('$state', decorateRedirectStateService);\r\n    }\r\n\r\n    angular\r\n        .module('pipRouting.Redirect', ['ui.router'])\r\n        .config(addRedirectStateProviderDecorator)\r\n        .config(addRedirectStateDecorator);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.routing {\r\n    'use strict';\r\n    \r\n    angular.module('pipRouting', [\r\n        'ui.router', 'pipRouting.Events', 'pipRouting.Back', 'pipRouting.Redirect'\r\n    ]);\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.routing {\r\n    'use strict';\r\n\r\n    export let RoutingVar: string = \"$routing\";\r\n\r\n    function hookRoutingEvents($log, $rootScope, $state) {\r\n        \"ngInject\";\r\n\r\n        $rootScope.$on('$stateChangeStart',\r\n            (event, toState, toParams, fromState, fromParams) => {\r\n                $rootScope[RoutingVar] = true;\r\n            }\r\n        );\r\n\r\n        $rootScope.$on('$stateChangeSuccess',\r\n            (event, toState, toParams, fromState, fromParams) => {\r\n                // Unset routing variable to disable page transition\r\n                $rootScope[RoutingVar] = false;                \r\n            }\r\n        );\r\n\r\n        // Intercept route error\r\n        $rootScope.$on('$stateChangeError',\r\n            (event, toState, toParams, fromState, fromParams, error) => {\r\n                // Unset routing variable to disable page transition\r\n                $rootScope[RoutingVar] = false;\r\n\r\n                $log.error('Error while switching route to ' + toState.name);\r\n                $log.error(error);\r\n\r\n                console.error('Error while switching route to ' + toState.name);\r\n                console.error(error);\r\n            }\r\n        );\r\n\r\n        // Intercept route error\r\n        $rootScope.$on('$stateNotFound',\r\n            function(event, unfoundState, fromState, fromParams) {\r\n                event.preventDefault();\r\n\r\n                $rootScope[RoutingVar] = false;\r\n\r\n                // Todo: Move to errors\r\n                $state.go('errors_missing_route',  {\r\n                        unfoundState: unfoundState,\r\n                        fromState : {\r\n                            to: fromState ? fromState.name : '',\r\n                            fromParams: fromParams\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        );\r\n\r\n    }\r\n    \r\n    angular\r\n        .module('pipRouting.Events', [])\r\n        .run(hookRoutingEvents);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.session {\r\n    'use strict';\r\n\r\n    export const IdentityRootVar = \"$identity\";\r\n    export const IdentityChangedEvent = \"pipIdentityChanged\";\r\n\r\n    export interface IIdentity {\r\n        id: string;\r\n        full_name: string;\r\n        details: string;\r\n        email: string;\r\n        photo_url: string;\r\n    }\r\n\r\n    export interface IIdentityService {\r\n        identity: IIdentity;\r\n    }\r\n\r\n    export interface IIdentityProvider extends ng.IServiceProvider {\r\n        setRootVar: boolean;\r\n        identity: IIdentity;\r\n    }\r\n\r\n    class IdentityService implements IIdentityService {\r\n        private _identity: IIdentity;\r\n        private _setRootVar: boolean;\r\n        private _rootScope: ng.IRootScopeService;\r\n\r\n        public constructor(\r\n            setRootVar: boolean,\r\n            identity: IIdentity,\r\n            $rootScope: ng.IRootScopeService\r\n        ) {\r\n            this._setRootVar = setRootVar;\r\n            this._identity = identity;\r\n            this._rootScope = $rootScope;\r\n\r\n            this.setRootVar();\r\n        }\r\n\r\n        private setRootVar(): void {\r\n            if (this._setRootVar)\r\n                this._rootScope[pip.session.IdentityRootVar] = this._identity;\r\n        }\r\n\r\n        public get identity(): IIdentity {\r\n            return this._identity;\r\n        }\r\n\r\n        public set identity(value: IIdentity) {\r\n            this._identity = value;\r\n            this.setRootVar();\r\n            this._rootScope.$broadcast(pip.session.IdentityChangedEvent, this._identity);\r\n        }\r\n    }\r\n\r\n    class IdentityProvider implements IdentityProvider {\r\n        private _setRootVar = true;\r\n        private _identity: IIdentity = null;\r\n        private _service: pip.session.IIdentityService = null;\r\n\r\n        public constructor() { }\r\n\r\n        public get setRootVar(): boolean {\r\n            return this._setRootVar;  \r\n        }\r\n\r\n        public set setRootVar(value: boolean) {\r\n            this._setRootVar = !!value;\r\n        }\r\n\r\n        public get identity(): any {\r\n            return this._identity;  \r\n        }\r\n\r\n        public set identity(value: any) {\r\n            this._identity = value;\r\n        }\r\n\r\n        public $get($rootScope: ng.IRootScopeService): any {\r\n            \"ngInject\";\r\n\r\n            if (this._service == null)\r\n                this._service = new IdentityService(this._setRootVar, this._identity, $rootScope);\r\n\r\n            return this._service;\r\n        }\r\n\r\n    }\r\n\r\n    angular\r\n        .module('pipIdentity', [])\r\n        .provider('pipIdentity', IdentityProvider);\r\n        \r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.session {\r\n    'use strict';\r\n\r\n    export const SessionRootVar = \"$session\";\r\n    export const SessionOpenedEvent = \"pipSessionOpened\";\r\n    export const SessionClosedEvent = \"pipSessionClosed\";\r\n\r\n    export interface ISessionService {\r\n        session: any;\r\n        isOpened: boolean;\r\n\r\n        open(session: any): void;\r\n        close(): void;\r\n    }\r\n\r\n    export interface ISessionProvider extends ng.IServiceProvider {\r\n        setRootVar: boolean;\r\n        session: any;\r\n    }\r\n\r\n    class SessionService implements ISessionService {\r\n        private _setRootVar: boolean;\r\n        private _session: any;\r\n        private _rootScope: ng.IRootScopeService;\r\n\r\n        public constructor(\r\n            setRootVar: boolean, \r\n            session: any, \r\n            $rootScope: ng.IRootScopeService\r\n        ) {\r\n            this._setRootVar = setRootVar;\r\n            this._session = session;\r\n            this._rootScope = $rootScope;\r\n\r\n            this.setRootVar();\r\n        }\r\n        \r\n        private setRootVar(): void {\r\n            if (this._setRootVar)\r\n                this._rootScope[pip.session.SessionRootVar] = this._session;\r\n        }\r\n\r\n        public get session(): any {\r\n            return this._session;\r\n        }\r\n\r\n        public get isOpened(): boolean {\r\n            return this._session != null;\r\n        }\r\n\r\n        public open(session: any, fullReset: boolean = false, partialReset: boolean = false) {\r\n            if (session == null)\r\n                throw new Error(\"Session cannot be null\");\r\n\r\n            this._session = session;\r\n            this.setRootVar();\r\n            this._rootScope.$broadcast(pip.session.SessionOpenedEvent, session);\r\n        }\r\n\r\n        public close(fullReset: boolean = false, partialReset: boolean = false) {\r\n            let oldSession = this._session;\r\n\r\n            this._session = null;\r\n            this.setRootVar();\r\n            this._rootScope.$broadcast(pip.session.SessionClosedEvent, oldSession);\r\n        }\r\n    }\r\n\r\n    class SessionProvider implements ISessionProvider {\r\n        private _setRootVar = true;\r\n        private _session: any = null;\r\n        private _service: pip.session.ISessionService = null;\r\n\r\n        public constructor() { }\r\n\r\n        public get setRootVar(): boolean {\r\n            return this._setRootVar;  \r\n        }\r\n\r\n        public set setRootVar(value: boolean) {\r\n            this._setRootVar = !!value;\r\n        }\r\n\r\n        public get session(): any {\r\n            return this._session;  \r\n        }\r\n\r\n        public set session(value: any) {\r\n            this._session = value;\r\n        }\r\n\r\n        public $get($rootScope: ng.IRootScopeService): any {\r\n            \"ngInject\";\r\n\r\n            if (this._service == null)\r\n                this._service = new SessionService(this._setRootVar, this._session, $rootScope);\r\n\r\n            return this._service;\r\n        }\r\n    }\r\n\r\n    angular.module('pipSession', ['pipPageReset'])\r\n        .provider('pipSession', SessionProvider); \r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.translate {\r\n    'use strict';\r\n\r\n    angular.module('pipTranslate', [\r\n        'LocalStorageModule', 'pipTranslate.Service', 'pipTranslate.Filter', 'pipTranslate.Directive'\r\n    ]);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.translate {\r\n    'use strict';\r\n\r\n    function pipTranslateDirective(pipTranslate): ng.IDirective {\r\n        \"ngInject\";\r\n\r\n        return {\r\n            restrict: 'EA',\r\n            scope: {\r\n                key1: '@pipTranslate',\r\n                key2: '@key'\r\n            },\r\n            link: (scope: any, element: any, attrs: any) => {\r\n                let key = scope.key1 || scope.key2;\r\n                let value = pipTranslate.translate(key);\r\n                element.text(value);\r\n            }\r\n        };\r\n    }\r\n\r\n    function pipTranslateHtmlDirective(pipTranslate): ng.IDirective {\r\n        \"ngInject\";\r\n\r\n        return {\r\n            restrict: 'EA',\r\n            scope: {\r\n                key1: '@pipTranslateHtml',\r\n                key2: '@key'\r\n            },\r\n            link: (scope: any, element: any, attrs: any) => {\r\n                let key = scope.key1 || scope.key2;\r\n                let value = pipTranslate.translate(key);\r\n                element.html(value);\r\n            }\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipTranslate.Directive', [])\r\n        .directive('pipTranslate', pipTranslateDirective)\r\n        .directive('pipTranslateHtml', pipTranslateHtmlDirective);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.translate {\r\n    'use strict';\r\n\r\n    function translateFilter(pipTranslate) {\r\n        \"ngInject\";\r\n\r\n        return function (key) {\r\n            return pipTranslate.translate(key) || key;\r\n        }\r\n    }\r\n\r\n    function optionalTranslateFilter($injector) {\r\n        \"ngInject\";\r\n\r\n        let pipTranslate = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return function (key) {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipTranslate.Filter', [])\r\n        .filter('translate', translateFilter);\r\n\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.translate {\r\n    'use strict';\r\n\r\n    export const LanguageRootVar = \"$language\";\r\n    export const LanguageChangedEvent = \"pipLanguageChanged\";    \r\n\r\n    export interface ITranslateService {\r\n        language: string;\r\n\r\n        use(language: string): string;\r\n        setTranslations(language: string, translations: any): void;\r\n\r\n        translate(key: string): string;\r\n        translateArray(keys: string[]): string[];\r\n        translateSet(keys: string[], keyProp: string, valueProp: string): any[];\r\n        translateObjects(items: any[], keyProp: string, valueProp: string): any[];\r\n        translateWithPrefix(prefix: string, key: string);\r\n        translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string);\r\n        translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string);\r\n    }\r\n\r\n    export interface ITranslateProvider extends ITranslateService, ng.IServiceProvider {\r\n\r\n    }\r\n\r\n    class Translation implements ITranslateService {\r\n        protected _language = 'en';\r\n        protected _translations = {\r\n            en: {\r\n                'en': 'English',\r\n                'ru': 'Russian',\r\n                'es': 'Spanish',\r\n                'pt': 'Portuguese',\r\n                'de': 'German',\r\n                'fr': 'French'\r\n            },\r\n            ru: {\r\n                'en': 'Английский',\r\n                'ru': 'Русский',\r\n                'es': 'Испанский',\r\n                'pt': 'Португальский',\r\n                'de': 'Немецкий',\r\n                'fr': 'Французский'\r\n            }\r\n        };\r\n\r\n        public constructor() {}\r\n\r\n        public get language(): string { return this._language; }\r\n        public set language(value: string) { this._language = value; }\r\n\r\n        public use(language: string): string {\r\n            if (language != null)\r\n                this._language = language;\r\n            return this._language;\r\n        }\r\n\r\n        // Set translation strings for specific language\r\n        public setTranslations(language: string, translations: any): void {\r\n            let map = this._translations[language] || {};\r\n            this._translations[language] = _.extend(map, translations);\r\n        }\r\n\r\n        // Translate a string by key using set language\r\n        public translate(key: string): string {\r\n            if (_.isNull(key) || _.isUndefined(key)) return '';\r\n\r\n            let translations = this._translations[this._language] || {};\r\n            return translations[key] || key;\r\n        }\r\n\r\n        // Translate an array of strings\r\n        public translateArray(keys: string[]): string[] {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            let values = [];\r\n            let translations = this._translations[this._language] || {};\r\n\r\n            _.each(keys, function (k) {\r\n                let key = k || '';\r\n                values.push(translations[key] || key);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate an array of strings into array of objects (set)\r\n        public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            keyProp = keyProp || 'id';\r\n            valueProp = valueProp || 'name';\r\n\r\n            let values: any[] = [];\r\n            let translations = this._translations[this._language] || {};\r\n\r\n            _.each(keys, function (key) {\r\n                let value: any = {};\r\n                key = key || '';\r\n\r\n                value[keyProp] = key;\r\n                value[valueProp] = translations[key] || key;\r\n\r\n                values.push(value);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate a collection of objects\r\n        public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\r\n            if (_.isNull(items) || items.length == 0) return [];\r\n\r\n            keyProp = keyProp || 'name';\r\n            valueProp = valueProp || 'nameLocal';\r\n\r\n            let translations = this._translations[this._language] || {};\r\n\r\n            _.each(items, function (item) {\r\n                let key = item[keyProp] || '';\r\n\r\n                item[valueProp] = translations[key] || key;\r\n            });\r\n\r\n            return items;\r\n        }\r\n\r\n        // Translate a string by key  with prefix using set language todo\r\n        public translateWithPrefix(prefix: string, key: string) {\r\n            prefix = prefix ? prefix + '_' : '';\r\n            key = (prefix + key).replace(/ /g, '_').toUpperCase();\r\n            if (key == null) return '';\r\n            let translations = this._translations[this._language] || {};\r\n            return translations[key] || key;\r\n        };\r\n\r\n        public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() : '';\r\n            keyProp = keyProp || 'id';\r\n            valueProp = valueProp || 'name';\r\n\r\n            let values = [];\r\n            let translations = this._translations[this._language] || {};\r\n\r\n            _.each(keys, function (key) {\r\n                let value: any = {}; \r\n                key = key || '';\r\n\r\n                value[keyProp] = key;\r\n                value[valueProp] = translations[prefix + '_' + key] || key;\r\n\r\n                values.push(value);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate an array of strings, apply uppercase and replace ' ' => '_'\r\n        public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            keyProp = keyProp || 'id';\r\n            valueProp = valueProp || 'name';\r\n            prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() + '_': '';\r\n\r\n            let values = [];\r\n            let translations = this._translations[this._language] || {};\r\n\r\n            _.each(keys, function (key) {\r\n                let value: any = {};\r\n                key = key || '';\r\n\r\n                value[keyProp] = key;\r\n                value[valueProp] = translations[prefix + key.replace(/ /g, '_').toUpperCase()]\r\n                    || (prefix + key.replace(/ /g, '_').toUpperCase());\r\n\r\n                values.push(value);\r\n            });\r\n\r\n            return values;\r\n        }\r\n    }\r\n\r\n    class TranslateService {\r\n        private _translation: Translation;\r\n        private _setRootVar: boolean;\r\n        private _persist: boolean;\r\n        private _rootScope: ng.IRootScopeService;\r\n        private _storage: any;\r\n\r\n        public constructor(\r\n            translation: Translation,\r\n            setRootVar: boolean,\r\n            persist: boolean,\r\n            $rootScope: ng.IRootScopeService,\r\n            localStorageService: any\r\n        ) {\r\n            this._setRootVar = setRootVar;\r\n            this._persist = persist;\r\n            this._translation = translation;\r\n            this._rootScope = $rootScope;\r\n            this._storage = localStorageService;\r\n\r\n            if (this._persist) {\r\n                this._translation.language = localStorageService.get('language') \r\n                    || this._translation.language;\r\n            }\r\n\r\n            this.save();\r\n        }\r\n\r\n        private save(): void {\r\n            if (this._setRootVar)\r\n                this._rootScope[pip.translate.LanguageRootVar] = this._translation.language;\r\n\r\n            if (this._persist)\r\n                this._storage.set('language', this._translation.language);\r\n        }\r\n\r\n        public get language(): string {\r\n            return this._translation.language;\r\n        }\r\n\r\n        public set language(value: string) {\r\n            if (value != this._translation.language) {\r\n                this._translation.language = value;\r\n                \r\n                this.save();                \r\n                this._rootScope.$broadcast(pip.translate.LanguageChangedEvent, value);\r\n            }\r\n        }\r\n\r\n        public use(language: string): string {\r\n            if (language != null)\r\n                this.language = language;\r\n            return this.language;\r\n        }\r\n\r\n        public setTranslations(language: string, translations: any): void {\r\n            return this._translation.setTranslations(language, translations);\r\n        }\r\n\r\n        public translate(key: string): string {\r\n            return this._translation.translate(key);\r\n        }\r\n\r\n        public translateArray(keys: string[]): string[] {\r\n            return this._translation.translateArray(keys);\r\n        }\r\n        \r\n        public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\r\n            return this._translation.translateSet(keys, keyProp, valueProp);\r\n        }\r\n\r\n        public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\r\n            return this._translation.translateObjects(items, keyProp, valueProp);\r\n        }\r\n\r\n        public translateWithPrefix(prefix: string, key: string) {\r\n            return this._translation.translateWithPrefix(prefix, key);\r\n        }\r\n\r\n        public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n            return this._translation.translateSetWithPrefix(prefix, keys, keyProp, valueProp);\r\n        }\r\n\r\n        public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n            return this._translation.translateSetWithPrefix2(prefix, keys, keyProp, valueProp);\r\n        }\r\n    }\r\n\r\n    class TranslateProvider extends Translation implements ITranslateProvider {\r\n        private _translation: Translation;\r\n        private _setRootVar: boolean;\r\n        private _persist: boolean;\r\n        private _service: TranslateService;\r\n        \r\n        public constructor() {\r\n            super();\r\n        }\r\n\r\n        public get setRootVar(): boolean {\r\n            return this._setRootVar;  \r\n        }\r\n\r\n        public set setRootVar(value: boolean) {\r\n            this._setRootVar = !!value;\r\n        }\r\n\r\n        public get persist(): boolean {\r\n            return this._persist;  \r\n        }\r\n\r\n        public set persist(value: boolean) {\r\n            this._persist = !!value;\r\n        }\r\n\r\n        public $get(\r\n            $rootScope: ng.IRootScopeService, \r\n            localStorageService: any\r\n        ): any {\r\n            \"ngInject\";\r\n\r\n            if (this._service == null) \r\n                this._service = new TranslateService(this, this._setRootVar, this._persist, $rootScope, localStorageService);\r\n            return this._service;\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipTranslate.Service', [])\r\n        .provider('pipTranslate', TranslateProvider);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipCodes', []);\r\n\r\n    thisModule.factory('pipCodes', function () {\r\n        \r\n        return {\r\n            hash: hash,\r\n            verification: verification\r\n        }\r\n    \r\n        // Simple version of string hashcode\r\n        function hash(value) {\r\n            if (value == null) return 0;\r\n            var result = 0;\r\n            for (var i = 0; i < value.length; i++) {\r\n                result += value.charCodeAt(i);\r\n            }\r\n            return result;\r\n        }\r\n\r\n        // Generates random big number for verification codes\r\n        function verification() {\r\n            return Math.random().toString(36).substr(2, 10).toUpperCase(); // remove `0.`\r\n        }\r\n\r\n    });\r\n\r\n})();",null,"/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipFormat', []);\r\n\r\n    thisModule.factory('pipFormat', function () {\r\n\r\n        // Creates a sample line from a text\r\n        function sample(value, maxLength) {\r\n            if (!value || value == '') return '';\r\n\r\n            var length = value.indexOf('\\n');\r\n            length = length >= 0 ? length : value.length;\r\n            length = length < maxLength ? value.length : maxLength;\r\n\r\n            return value.substring(0, length);\r\n        }\r\n\r\n        function strRepeat(str, qty) {\r\n            if (qty < 1) return '';\r\n            var result = '';\r\n            while (qty > 0) {\r\n                if (qty & 1) result += str;\r\n                qty >>= 1, str += str;\r\n            }\r\n            return result;\r\n        }\r\n        \r\n        var sprintf = (function sprintf(...args: any[]) {\r\n            function get_type(variable) {\r\n                return toString.call(variable).slice(8, -1).toLowerCase();\r\n            }\r\n\r\n            var str_repeat = strRepeat;\r\n\r\n            var str_format: any = function() {\r\n                if (!str_format.cache.hasOwnProperty(arguments[0])) {\r\n                    str_format.cache[arguments[0]] = str_format.parse(arguments[0]);\r\n                }\r\n                return str_format.format.call(null, str_format.cache[arguments[0]], arguments);\r\n            };\r\n\r\n            str_format.format = function(parse_tree, argv) {\r\n                var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;\r\n                for (i = 0; i < tree_length; i++) {\r\n                    node_type = get_type(parse_tree[i]);\r\n                    if (node_type === 'string') {\r\n                        output.push(parse_tree[i]);\r\n                    }\r\n                    else if (node_type === 'array') {\r\n                        match = parse_tree[i]; // convenience purposes only\r\n                        if (match[2]) { // keyword argument\r\n                            arg = argv[cursor];\r\n                            for (k = 0; k < match[2].length; k++) {\r\n                                if (!arg.hasOwnProperty(match[2][k])) {\r\n                                    throw new Error(sprintf('[_.sprintf] property \"%s\" does not exist', match[2][k]));\r\n                                }\r\n                                arg = arg[match[2][k]];\r\n                            }\r\n                        } else if (match[1]) { // positional argument (explicit)\r\n                            arg = argv[match[1]];\r\n                        }\r\n                        else { // positional argument (implicit)\r\n                            arg = argv[cursor++];\r\n                        }\r\n\r\n                        if (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {\r\n                            throw new Error(sprintf('[_.sprintf] expecting number but found %s', get_type(arg)));\r\n                        }\r\n                        switch (match[8]) {\r\n                            case 'b': arg = arg.toString(2); break;\r\n                            case 'c': arg = String.fromCharCode(arg); break;\r\n                            case 'd': arg = parseInt(arg, 10); break;\r\n                            case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\r\n                            case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\r\n                            case 'o': arg = arg.toString(8); break;\r\n                            case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;\r\n                            case 'u': arg = Math.abs(arg); break;\r\n                            case 'x': arg = arg.toString(16); break;\r\n                            case 'X': arg = arg.toString(16).toUpperCase(); break;\r\n                        }\r\n                        arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);\r\n                        pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\r\n                        pad_length = match[6] - String(arg).length;\r\n                        pad = match[6] ? str_repeat(pad_character, pad_length) : '';\r\n                        output.push(match[5] ? arg + pad : pad + arg);\r\n                    }\r\n                }\r\n                return output.join('');\r\n            };\r\n\r\n            str_format.cache = {};\r\n\r\n            str_format.parse = function(fmt) {\r\n                var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;\r\n                while (_fmt) {\r\n                    if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\r\n                        parse_tree.push(match[0]);\r\n                    }\r\n                    else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\r\n                        parse_tree.push('%');\r\n                    }\r\n                    else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\r\n                        if (match[2]) {\r\n                            arg_names |= 1;\r\n                            var field_list = [], replacement_field = match[2], field_match = [];\r\n                            if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                                field_list.push(field_match[1]);\r\n                                while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\r\n                                    if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                                        field_list.push(field_match[1]);\r\n                                    }\r\n                                    else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\r\n                                        field_list.push(field_match[1]);\r\n                                    }\r\n                                    else {\r\n                                        throw new Error('[_.sprintf] huh?');\r\n                                    }\r\n                                }\r\n                            }\r\n                            else {\r\n                                throw new Error('[_.sprintf] huh?');\r\n                            }\r\n                            match[2] = field_list;\r\n                        }\r\n                        else {\r\n                            arg_names |= 2;\r\n                        }\r\n                        if (arg_names === 3) {\r\n                            throw new Error('[_.sprintf] mixing positional and named placeholders is not (yet) supported');\r\n                        }\r\n                        parse_tree.push(match);\r\n                    }\r\n                    else {\r\n                        throw new Error('[_.sprintf] huh?');\r\n                    }\r\n                    _fmt = _fmt.substring(match[0].length);\r\n                }\r\n                return parse_tree;\r\n            };\r\n\r\n            return str_format;\r\n        })();\r\n\r\n        return {\r\n            sprintf: sprintf,\r\n            format: sprintf,\r\n            sample: sample\r\n        };\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipPageReset', []);\r\n\r\n    thisModule.factory('pipPageReset', function($rootScope, $timeout) {\r\n\r\n        $rootScope.$on('pipResetPage', resetAll);\r\n\r\n        return {\r\n            resetPartial: resetPartial,\r\n            resetFull: resetFull,\r\n            resetAll: resetAll,\r\n            reset: reset\r\n        };\r\n\r\n        //------------------------------------------\r\n\r\n        function resetPartial() {\r\n            reset(false, true);\r\n        }\r\n\r\n        function resetFull() {\r\n            reset(true, false);\r\n        }\r\n\r\n        function resetAll() {\r\n            reset(true, true);\r\n        }\r\n\r\n        function reset(full, partial) {\r\n            full = full !== undefined ? !!full : true;\r\n            partial = partial !== undefined ? !!partial : true;\r\n\r\n            if (full || partial) {\r\n                $rootScope.$reset = full;\r\n                $rootScope.$partialReset = partial;\r\n                $timeout(function() {\r\n                    $rootScope.$reset = false;\r\n                    $rootScope.$partialReset = false;\r\n                }, 0);\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n})();",null,"/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipScroll', []);\r\n\r\n    thisModule.factory('pipScroll', function () {\r\n        return {\r\n            scrollTo: scrollTo\r\n        };\r\n        \r\n        //-------------------------------------\r\n\r\n        function scrollTo(parentElement, childElement, animationDuration) {\r\n            if(!parentElement || !childElement) return;\r\n            if (animationDuration == undefined) animationDuration = 300;\r\n\r\n            setTimeout(function () {\r\n                if (!$(childElement).position()) return;\r\n                var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\r\n                if (modDiff < 20) return;\r\n                var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\r\n                if (animationDuration > 0)\r\n                    $(parentElement).animate({\r\n                        scrollTop: scrollTo + 'px'\r\n                    }, animationDuration);\r\n            }, 100);\r\n        }\r\n\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSystemInfo', []);\r\n\r\n    thisModule.factory('pipSystemInfo', function ($rootScope, $window) {\r\n\r\n        return {\r\n            getBrowserName: getBrowserName,\r\n            getBrowserVersion: getBrowserVersion,\r\n            getPlatform: getPlatform,\r\n            isDesktop: isDesktop,\r\n            isMobile: isMobile,\r\n            isCordova: isCordova,\r\n            getOS: getOS,            \r\n            isSupported: isSupported\r\n        };\r\n\r\n        // todo add support for iPhone\r\n        function getBrowserName() {\r\n            var ua = $window.navigator.userAgent;\r\n\r\n            if (ua.search(/Edge/) > -1) return \"edge\";\r\n            if (ua.search(/MSIE/) > -1) return \"ie\";\r\n            if (ua.search(/Trident/) > -1) return \"ie\";\r\n            if (ua.search(/Firefox/) > -1) return \"firefox\";\r\n            if (ua.search(/Opera/) > -1) return \"opera\";\r\n            if (ua.search(/OPR/) > -1) return \"opera\";\r\n            if (ua.search(/YaBrowser/) > -1) return \"yabrowser\";\r\n            if (ua.search(/Chrome/) > -1) return \"chrome\";\r\n            if (ua.search(/Safari/) > -1) return \"safari\";\r\n            if (ua.search(/Maxthon/) > -1) return \"maxthon\";\r\n            \r\n            return \"unknown\";\r\n        }\r\n\r\n        function getBrowserVersion() {\r\n            var browser, version;\r\n            var ua = $window.navigator.userAgent;\r\n\r\n            browser = getBrowserName();\r\n\r\n            switch (browser) {\r\n                case \"edge\":\r\n                    version = (ua.split(\"Edge\")[1]).split(\"/\")[1];\r\n                    break;\r\n                case \"ie\":\r\n                    version = (ua.split(\"MSIE \")[1]).split(\";\")[0];\r\n                    break;\r\n                case \"ie11\":\r\n                    browser = \"ie\";\r\n                    version = (ua.split(\"; rv:\")[1]).split(\")\")[0];\r\n                    break;\r\n                case \"firefox\":\r\n                    version = ua.split(\"Firefox/\")[1];\r\n                    break;\r\n                case \"opera\":\r\n                    version = ua.split(\"Version/\")[1];\r\n                    break;\r\n                case \"operaWebkit\":\r\n                    version = ua.split(\"OPR/\")[1];\r\n                    break;\r\n                case \"yabrowser\":\r\n                    version = (ua.split(\"YaBrowser/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"chrome\":\r\n                    version = (ua.split(\"Chrome/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"safari\":\r\n                    version = (ua.split(\"Version/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"maxthon\":\r\n                    version = ua.split(\"Maxthon/\")[1];\r\n                    break;\r\n            }\r\n\r\n            return version;\r\n        }\r\n        \r\n        function getPlatform() {\r\n            var ua = $window.navigator.userAgent;\r\n\r\n            if (/iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(ua.toLowerCase())) \r\n                return 'mobile';\r\n\r\n            return 'desktop';\r\n        }\r\n\r\n        function isDesktop() {\r\n            return getPlatform() == 'desktop';\r\n        }\r\n\r\n        function isMobile() {\r\n            return getPlatform() == 'mobile';\r\n        }\r\n\r\n        // Todo: complete implementation\r\n        function isCordova() {\r\n            return null;\r\n        }\r\n\r\n        function getOS() {\r\n            var ua = $window.navigator.userAgent;\r\n\r\n            try {\r\n                var osAll = (/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(ua.toLowerCase()) || [ua])[0].replace('sunos', 'solaris'),\r\n                osAndroid = (/(android)/.exec(ua.toLowerCase()) || '');\r\n                return osAndroid && (osAndroid == 'android' || (osAndroid[0] == 'android')) ? 'android' : osAll;\r\n            } catch (err) {\r\n                return 'unknown'\r\n            }\r\n        }\r\n\r\n        // Todo: Move to errors\r\n        function isSupported(supported) {\r\n            if (!supported) supported = {\r\n                edge: 11,\r\n                ie: 11,\r\n                firefox: 43, //4, for testing\r\n                opera: 35,\r\n                chrome: 47\r\n            };\r\n\r\n            var browser = getBrowserName();\r\n            var version = getBrowserVersion();\r\n            version = version.split(\".\")[0]\r\n\r\n            if (browser && supported[browser] && version >= supported[browser]) \r\n                return true;\r\n\r\n            return true;\r\n        };\r\n\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTags', []);\r\n\r\n    thisModule.factory('pipTags', function () {\r\n            \r\n        return {\r\n            equal: equal,\r\n            normalizeOne: normalizeOne,\r\n            normalizeAll: normalizeAll,\r\n            normalize: normalizeAll,\r\n            compressOne: compressOne,\r\n            compressAll: compressAll,\r\n            compress: compressAll,\r\n            extract: extract\r\n        };\r\n\r\n        //------------------------------\r\n\r\n        function normalizeOne(tag) {\r\n            return tag \r\n                ? _.trim(tag.replace(/(_|#)+/g, ' '))\r\n                : null;\r\n        }\r\n    \r\n        function compressOne(tag) {\r\n            return tag\r\n                ? tag.replace(/( |_|#)/g, '').toLowerCase()\r\n                : null;\r\n        }\r\n    \r\n        function equal(tag1, tag2) {\r\n            if (tag1 == null && tag2 == null)\r\n                return true;\r\n            if (tag1 == null || tag2 == null)\r\n                return false;\r\n            return compressOne(tag1) == compressOne(tag2);\r\n        }\r\n    \r\n        function normalizeAll(tags) {\r\n            if (_.isString(tags)) {\r\n                tags = tags.split(/( |,|;)+/);\r\n            }\r\n    \r\n            tags = _.map(tags, function (tag) {\r\n                return normalizeOne(tag);\r\n            });\r\n    \r\n            return tags;\r\n        }\r\n    \r\n        function compressAll(tags) {\r\n            if (_.isString(tags))\r\n                tags = tags.split(/( |,|;)+/);\r\n    \r\n            tags = _.map(tags, function (tag) {\r\n                return compressOne(tag);\r\n            });\r\n    \r\n            return tags;\r\n        };\r\n    \r\n        function extract(entity, searchFields) {\r\n            var tags = normalizeAll(entity.tags);\r\n    \r\n            _.each(searchFields, function (field) {\r\n                var text = entity[field] || '';\r\n    \r\n                if (text != '') {\r\n                    var hashTags = text.match(/#\\w+/g);\r\n                    tags = tags.concat(normalizeAll(hashTags));\r\n                }\r\n            });\r\n    \r\n            return _.uniq(tags);\r\n        }\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.utilities {\r\n    'use strict';\r\n\r\n    export interface ITimerService {\r\n        isStarted: boolean;\r\n\r\n        addEvent(event: string, timeout: number): void;\r\n        removeEvent(event: string): void;\r\n        clearEvents(): void;\r\n\r\n        start(): void;\r\n        stop(): void;\r\n    }\r\n\r\n    class TimerEvent {\r\n        event: string;\r\n        timeout: number;\r\n        interval: any;\r\n    }\r\n\r\n    let DefaultEvents: TimerEvent[] = [\r\n        <TimerEvent> { event: 'pipAutoPullChanges', timeout: 60000 }, // 1 min\r\n        <TimerEvent> { event: 'pipAutoUpdatePage', timeout: 15000 }, // 15 sec\r\n        <TimerEvent> { event: 'pipAutoUpdateCollection', timeout: 300000 } // 5 min\r\n    ]\r\n\r\n    class TimerService {\r\n        private _rootScope: ng.IRootScopeService;\r\n        private _interval: ng.IIntervalService;        \r\n        private _started = false;\r\n        private _events: TimerEvent[] = _.cloneDeep(DefaultEvents);\r\n\r\n        public constructor($rootScope, $interval) {\r\n            this._rootScope = $rootScope;\r\n            this._interval = $interval;\r\n        }\r\n\r\n        public get isStarted() {\r\n            return this._started;\r\n        }\r\n\r\n        public addEvent(event: string, timeout: number): void {\r\n            var existingEvent = _.find(this._events, (e) => e.event == event);\r\n            if (existingEvent != null) return;\r\n\r\n            let newEvent = <TimerEvent> {\r\n                event: event,\r\n                timeout: timeout\r\n            };\r\n            this._events.push(newEvent);\r\n\r\n            if (this._started)\r\n                this.startEvent(newEvent);\r\n        }\r\n\r\n        public removeEvent(event: string): void {\r\n            for (let i = this._events.length - 1; i >= 0; i--) {\r\n                let existingEvent = this._events[i];\r\n                if (existingEvent.event == event) {\r\n                    this.stopEvent(existingEvent);\r\n                    this._events.splice(i, 1);\r\n                }\r\n            }\r\n        }\r\n\r\n        public clearEvents(): void {\r\n            this.stop();\r\n            this._events = [];\r\n        }\r\n\r\n        private startEvent(event: TimerEvent): void {\r\n            event.interval = this._interval(\r\n                () => { this._rootScope.$broadcast(event.event) },\r\n                event.timeout\r\n            )\r\n        }\r\n\r\n        private stopEvent(event: TimerEvent): void {\r\n            if (event.interval != null) {\r\n                try {\r\n                    this._interval.cancel(event.interval);\r\n                } catch (ex) {\r\n                    // Do nothing\r\n                }\r\n                event.interval = null;\r\n            }\r\n        }\r\n\r\n        public start(): void {\r\n            if (this._started) return;\r\n\r\n            _.each(this._events, (event) => {\r\n                this.startEvent(event);\r\n            });\r\n\r\n            this._started = true;\r\n        }\r\n\r\n        public stop(): void {\r\n            _.each(this._events, (event) => {\r\n                this.stopEvent(event);\r\n            });\r\n\r\n            this._started = false;\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipTimer', [])\r\n        .service('pipTimer', TimerService);\r\n\r\n}\r\n",null]}