!function(){"use strict";angular.module("pipServices",["pipUtils","pipAssert","pipDebug","pipScope","pipTranslate","pipState","pipTimer","pipSession","pipIdentity","pipSystemInfo","pipFormat","pipScroll","pipTags"])}(),function(){"use strict";var e=angular.module("pipAssert",["pipDebug"]);e.provider("pipAssert",["pipDebugProvider",function(e){function t(){}function r(e){return Object.prototype.toString.call(e)}function n(e,t){if(!Array.isArray(e))throw new Error(t||e+" should be array")}function i(e,t){if("boolean"!=typeof e)throw new Error(t||e+" should be boolean")}function a(e,t){if(null===e)throw new Error(t||e+" should be not null")}function o(e,t){if("number"!=typeof e)throw new Error(t||e+" should be number")}function s(e,t){if("string"!=typeof e)throw new Error(t||e+" should be string")}function u(e,t){if("object"!=typeof e)throw new Error(t||e+" should be an object")}function l(e,t){if("object"==typeof e&&"[object Date]"!==r(e))throw new Error(t||e+" should be a date")}function c(e,t){if("object"==typeof e&&("[object Error]"!==r(e)||e instanceof Error))throw new Error(t||e+" should be an error")}function p(e,t){if("function"!=typeof e)throw new Error(t||e+" should be a function")}function f(e,t){if("undefined"==typeof e)throw new Error(t||e+" should be defined")}function d(e,t){if(null===e||void 0===e||e===!1)throw new Error(t||e+" should be not null or undefined or false")}function g(e,t,r){if("object"!=typeof e)throw new Error(e+" should be an object");if(null===e[t]||void 0===e[t])throw new Error(r||t+" should be in object "+e)}function h(e,t,r){if(e!=t)throw new Error(r||e+" should be not equal "+t)}function b(e,t,r){if(e==t)throw new Error(r||e+" should be equal "+t)}function m(e,t,r){if(e!==t)throw new Error(r||e+" should not be strict equal "+t)}function v(e,t,r){if(e===t)throw new Error(r||e+" should not strict equal "+t)}function S(e,t){var r=new RegExp("^[0-9a-fA-F]{24}$");if(!r.test(e))throw new Error(t||e+" should be an object id")}return{isEmpty:e.enabled()?d:t,isObjectId:e.enabled()?S:t,isDefined:e.enabled()?f:t,isDef:e.enabled()?f:t,contains:e.enabled()?g:t,equal:e.enabled()?h:t,notEqual:e.enabled()?b:t,strictEqual:e.enabled()?m:t,notStrictEqual:e.enabled()?v:t,isArray:e.enabled()?n:t,isBoolean:e.enabled()?i:t,isNumber:e.enabled()?o:t,isString:e.enabled()?s:t,isObject:e.enabled()?u:t,isDate:e.enabled()?l:t,isError:e.enabled()?c:t,isFunction:e.enabled()?p:t,isNotNull:e.enabled()?a:t,$get:["pipDebug",function(e){return{isEmpty:e.enabled()?d:t,isObjectId:e.enabled()?S:t,isDefined:e.enabled()?f:t,isDef:e.enabled()?f:t,contains:e.enabled()?g:t,equal:e.enabled()?h:t,notEqual:e.enabled()?b:t,strictEqual:e.enabled()?m:t,notStrictEqual:e.enabled()?v:t,isArray:e.enabled()?n:t,isBoolean:e.enabled()?i:t,isNumber:e.enabled()?o:t,isString:e.enabled()?s:t,isObject:e.enabled()?u:t,isDate:e.enabled()?l:t,isError:e.enabled()?c:t,isFunction:e.enabled()?p:t,isNotNull:e.enabled()?a:t}}]}}])}(),function(){"use strict";var e=angular.module("pipDebug",[]);e.provider("pipDebug",["$logProvider",function(e){function t(){return this.enabled}function r(){this.enabled=!0,e.debugEnabled(!0)}function n(){this.enabled=!1,e.debugEnabled(!1)}return this.enabled=!0,{enable:r,disable:n,enabled:t,$get:["$log",function(e){return{enabled:t,log:e.log,info:e.info,warn:e.warn,error:e.error,debug:e.debug}}]}}])}(),function(){"use strict";var e=angular.module("pipState",["ui.router","pipTranslate","pipAssert"]);e.config(["$locationProvider","$httpProvider","pipTranslateProvider",function(e,t,r){r.translations("en",{ERROR_SWITCHING:"Error while switching route. Try again."}),r.translations("ru",{ERROR_SWITCHING:"Ошибка при переходе. Попробуйте ещё раз."})}]),e.run(["$rootScope","pipTranslate","$state",function(e,t,r){e.$on("$stateChangeSuccess",function(t,r,n,i,a){e.$routing=!1,e.$state={name:r.name,url:r.url,params:n},e.$prevState={name:i.name,url:i.url,params:a}}),e.$on("$stateChangeError",function(t,r,n,i,a,o){e.$routing=!1,console.error("Error while switching route to "+r.name),console.error(o)}),e.$on("$stateNotFound",function(t,n,i,a){t.preventDefault(),r.go("errors_missing_route",{unfoundState:n,fromState:{to:i?i.name:"",fromParams:a}}),e.$routing=!1})}]),e.provider("pipState",["$stateProvider","pipAssertProvider",function(e,t){function r(e,r){return t.isNotNull(e,"pipState.redirect: fromState cannot be null"),t.isNotNull(r,"pipState.redirect: toState cannot be null"),n[e]=r,this}var n={};this.redirect=r,this.state=e.state,this.$get=["$state","$timeout","pipAssert",function(e,t,r){function i(i,a,o,s){r.contains(a,"name","$state.redirect: state should contains name prop"),r.isObject(o,"$state.redirect: params should be an object");var u;if(s.$routing=!0,u=n[a.name],_.isFunction(u)&&(u=u(a.name,o,s),_.isNull(u)))throw s.$routing=!1,new Error("Redirected toState cannot be null");return!!u&&(t(function(){i.preventDefault(),e.transitionTo(u,o,{location:"replace"})}),!0)}function a(){$window.history.back()}function o(t,n,i,a){if(r.isObject(t,"pipUtils.goBack: first argument should be an object"),r.isString(a,"pipUtils.goBack: second argument should a string"),r.isString(n,"pipUtils.goBack: third argument should a string"),$rootScope.$prevState&&$rootScope.$prevState.name){var o=_.cloneDeep($rootScope.$prevState);o.params[a]=i,o.params[n]=t,e.go(o.name,o.params)}else $window.history.back()}return e.redirect=i,e.goBack=a,e.goBackAndSelect=o,e}]}])}(),function(){"use strict";angular.module("pipScope",["pipScope.Error","pipScope.Transaction"]),angular.module("pipTransactions",["pipScope"])}(),function(){"use strict";var e=angular.module("pipScope.Error",["pipAssert"]);e.factory("pipError",["$rootScope","pipAssert",function(e,t){function r(t){e.errors[t]={message:void 0,code:void 0,details:void 0}}function n(e){if(_.isNull(e))return null;if(e.message)return e.message;if(e.data){if(e.data.code)return"ERROR_"+e.data.code;if(e.data.message)return e.data.message}return e.statusText?e.statusText:e.status?"ERROR_"+e.status:e.data?e.data:e}function i(e){return _.isNull(e)?null:e.data&&e.data.code?e.data.code:e.status?e.status:null}function a(e){return e&&e.data?e.data:e}function o(o,s){o=o||"global";var u={reset:function(){r(o)},empty:function(){var t=e.errors[o];return _.isNull(t)||_.isNull(t.message)&&_.isNull(t.code)},get:function(){return e.errors[o]?e.errors[o]:""},message:function(){return e.errors[o]?e.errors[o].message:null},code:function(){return e.errors[o]?e.errors[o].code:null},details:function(){return e.errors[o]?e.errors[o].details:null},set:function(s){s?(t.isObject(s,"Setting error: error should be an object"),e.errors[o]={message:n(s),code:i(s),details:a(s)},console.error(e.errors[o])):r(o)}};return _.isObject(s)&&(s.error=u),u}return e.errors={},o}])}(),function(){"use strict";var e=angular.module("pipScope.Transaction",["pipTranslate","pipScope.Error"]);e.config(["pipTranslateProvider",function(e){e.translations("en",{ENTERING:"Entering...",PROCESSING:"Processing...",LOADING:"Loading...",SAVING:"Saving..."}),e.translations("ru",{ENTERING:"Вход в систему...",PROCESSING:"Обрабатывается...",LOADING:"Загружается...",SAVING:"Сохраняется..."})}]),e.factory("pipTransaction",["$rootScope","pipError",function(e,t){function r(t){e.transactions[t]={id:void 0,operation:void 0}}function n(n,i){n=n||"global";var a=t(n),o={error:a,reset:function(){r(),a.reset()},busy:function(){var t=e.transactions[n];return null!=t&&t.id},failed:function(){return!a.empty()},aborted:function(t){var r=e.transactions[n];return _.isNull(r)||r.id!=t},get:function(){return _.isNull(e.transactions[n])&&r(n),e.transactions[n]},id:function(){var t=e.transactions[n];return t?t.id:null},operation:function(){var t=e.transactions[n];return t?t.operation:null},errorMessage:function(){return a.message()},begin:function(t){var r=e.transactions[n];return null!=r&&r.id?null:(r=e.transactions[n]={id:(new Date).getTime(),operation:t||"PROCESSING"},a.reset(),r.id)},abort:function(){var t=e.transactions[n];t&&(t.id=null),a.reset()},end:function(t){t?a.set(t):a.reset();var r=e.transactions[n];null!=r&&(r.id=null)}};return _.isObject(i)&&(i.error=a,i.transaction=o),o}return e.transactions={},n}])}(),function(){"use strict";var e=angular.module("pipIdentity",[]);e.provider("pipIdentity",["$timeout","pipAssertProvider",function(e,t){function r(e){return null!=e&&(t.isBoolean(e||"","pipIdentityProvider.setRoot: argument should be a boolean"),i=e),i}function n(e){return null!=e&&(t.isObject(e||"","pipIdentityProvider.identity: argument should be an object"),a=e),a}var i=!0,a=null;this.setRoot=r,this.identity=n,this.$get=["$rootScope","pipAssert",function(t,r){function n(){return a}function o(r,n){r=void 0===r||!!r,n=void 0===n||!!n,t.$reset=r,t.$partialReset=n,e(function(){t.$reset=!1,t.$partialReset=!1},0)}function s(e,n,s){null!=e&&r.isObject(e||"","pipIdentity.set: argument should be an object"),a=e,i&&(t.$identity=a),o(n,s),t.$broadcast("pipIdentityChanged",a)}return i&&(t.$identity=a),{get:n,set:s}}]}])}(),function(){"use strict";var e=angular.module("pipSession",[]);e.provider("pipSession",["$timeout","pipAssertProvider",function(e,t){function r(e){return null!=e&&(t.isBoolean(e||"","pipSessionProvider.setRoot: argument should be a boolean"),i=e),i}function n(e){return null!=e&&(t.isObject(e||"","pipSessionProvider.session: argument should be an object"),a=e),a}var i=!0,a=null;this.setRoot=r,this.session=n,this.$get=["$rootScope","pipAssert",function(t,r){function n(r,n){r=void 0===r||!!r,n=void 0===n||!!n,t.$reset=r,t.$partialReset=n,e(function(){t.$reset=!1,t.$partialReset=!1},0)}function o(e,o,s){r.isObject(e||"","pipSession.open: argument should be an object"),a=e,i&&(t.$session=a),n(o,s),t.$broadcast("pipSessionOpened",a)}function s(e,r){var o=a;a=null,i&&(t.$session=a),n(e,r),t.$broadcast("pipSessionClosed",o)}function u(){return a}return i&&(t.$session=a),{get:u,open:o,close:s}}]}])}(),function(){"use strict";var e=angular.module("pipTimer",[]);e.service("pipTimer",["$interval","$rootScope",function(e,t){function r(){return p}function n(){p||(a=e(function(){t.$broadcast("pipAutoPullChanges")},u),o=e(function(){t.$broadcast("pipAutoUpdatePage")},l),s=e(function(){t.$broadcast("pipAutoUpdateCollection")},c),p=!0)}function i(){a&&e.cancel(a),o&&e.cancel(o),s&&e.cancel(o),p=!1}var a,o,s,u=6e4,l=15e3,c=3e5,p=!1;return{isStarted:r,start:n,stop:i}}])}(),function(){"use strict";angular.module("pipTranslate",["pipTranslate.Service","pipTranslate.Directive","pipTranslate.Filter"])}(),function(){"use strict";var e=angular.module("pipTranslate.Directive",["pipTranslate.Service"]);e.directive("pipTranslate",["pipTranslate",function(e){return{restrict:"EA",scope:{key1:"@pipTranslate",key2:"@key"},link:function(t,r,n){var i=t.key1||t.key2,a=e.translate(i);r.text(a)}}}]),e.directive("pipTranslateHtml",["pipTranslate",function(e){return{restrict:"EA",scope:{key1:"@pipTranslateHtml",key2:"@key"},link:function(t,r,n){var i=t.key1||t.key2,a=e.translate(i);r.html(a)}}}])}(),function(){"use strict";var e=angular.module("pipTranslate.Filter",["pipTranslate.Service"]);e.filter("translate",["pipTranslate",function(e){return function(t){return e.translate(t)||t}}])}(),function(){"use strict";var e=angular.module("pipTranslate.Service",["LocalStorageModule","pipAssert"]);e.provider("pipTranslate",["pipAssertProvider",function(e){function t(t){return e.isString(t||"","pipTranslateProvider.use or pipTranslateProvider.language: argument should be a string"),null!=t&&(f=t),f}function r(t){return null!=t&&(e.isBoolean(t||"","pipTranslateProvider.persist: argument should be a boolean"),d=t),d}function n(t){return null!=t&&(e.isBoolean(t||"","pipTranslateProvider.setRoot: argument should be a boolean"),g=t),g}function i(t,r){e.isString(t,"pipTranslate.setTranslations or pipTranslateProvider.translations: first argument should be a string"),e.isObject(r,"pipTranslate.setTranslations or pipTranslateProvider.translations: second argument should be an object");var n=h[t]||{};h[t]=_.extend(n,r)}function a(e){if(_.isNull(e)||_.isUndefined(e))return"";var t=h[f]||{};return t[e]||e}function o(t){if(_.isNull(t)||0==t.length)return[];e.isArray(t,"pipTranslate.translateArray: argument should be an array");var r=[],n=h[f]||{};return _.each(t,function(e){var t=e||"";r.push(n[t]||t)}),r}function s(t,r,n){if(_.isNull(t)||0==t.length)return[];e.isArray(t,"pipTranslate.translateSet: first argument should be an array"),e.isString(r||"","pipTranslate.translateSet: second argument should be a string"),e.isString(n||"","pipTranslate.translateSet: third argument should be a string"),r=r||"id",n=n||"name";var i=[],a=h[f]||{};return _.each(t,function(e){var t={},o=e||"";t[r]=o,t[n]=a[o]||o,i.push(t)}),i}function u(t,r,n){if(_.isNull(t)||0==t.length)return[];e.isArray(t,"pipTranslate.translateObjects: first argument should be an array"),e.isString(r||"","pipTranslate.translateObjects: second argument should be a string"),e.isString(n||"","pipTranslate.translateObjects: third argument should be a string"),r=r||"name",n=n||"nameLocal";var i=h[f]||{};return _.each(t,function(e){var t=e,a=t[r]||"";t[n]=i[a]||a}),t}function l(t,r){if(e.isString(r||"","pipTranslate.translateById: second argument should be a string"),e.isString(t||"","pipTranslate.translateById: first argument should be a string"),t=t?t+"_":"",r=(t+r).replace(/ /g,"_").toUpperCase(),null==r)return"";var n=h[f]||{};return n[r]||r}function c(t,r,n,i){if(_.isNull(t)||0==t.length)return[];e.isArray(t,"pipTranslate.translateSetById: first argument should be an array"),e.isString(r||"","pipTranslate.translateSetById: second argument should be a string"),e.isString(n||"","pipTranslate.translateSetById: third argument should be a string"),e.isString(i||"","pipTranslate.translateSetById: forth argument should be a string"),r=r?r.replace(/ /g,"_").toUpperCase():"",n=n||"id",i=i||"name";var a=[],o=h[f]||{};return _.each(t,function(e){var t={},s=e||"";t[n]=s,t[i]=o[r+"_"+s]||s,a.push(t)}),a}function p(t,r,n,i){if(_.isNull(t)||0==t.length)return[];e.isArray(t,"pipTranslate.translateStringsSet: first argument should be an array"),e.isString(r||"","pipTranslate.translateStringsSet: second argument should be a string"),e.isString(n||"","pipTranslate.translateStringsSet: third argument should be a string"),e.isString(i||"","pipTranslate.translateStringsSet: forth argument should be a string"),n=n||"id",i=i||"name",r=r?r.replace(/ /g,"_").toUpperCase()+"_":"";var a=[],o=h[f]||{};return _.each(t,function(e){var t={},s=e||"";t[n]=s,t[i]=o[r+s.replace(/ /g,"_").toUpperCase()]||r+s.replace(/ /g,"_").toUpperCase(),a.push(t)}),a}var f="en",d=!0,g=!0,h={en:{en:"English",ru:"Russian",es:"Spanish",pt:"Portuguese",de:"German",fr:"French"},ru:{en:"Английский",ru:"Русский",es:"Испанский",pt:"Португальский",de:"Немецкий",fr:"Французский"}};this.translations=i,this.language=t,this.use=t,this.persist=r,this.setRoot=n,this.$get=["$rootScope","$timeout","localStorageService","pipAssert",function(e,t,r,n){function h(r,n){r=void 0===r||!!r,n=void 0===n||!!n,e.$reset=r,e.$partialReset=n,t(function(){e.$reset=!1,e.$partialReset=!1},0)}function b(t,i,a){return n.isString(t||"","pipTranslate.use: argument should be a string"),null!=t&&t!=f&&(f=t,d&&r.set("language",f),g&&(e.$language=f),h(i,a),e.$broadcast("pipLanguageChanged",t)),f}return d&&(f=r.get("language")||f),g&&(e.$language=f),{use:b,translations:i,translate:a,translateArray:o,translateSet:s,translateObjects:u,translateById:l,translateSetById:c,translateStringsSet:p}}]}])}(),function(){"use strict";var e=angular.module("pipCodes",[]);e.factory("pipCodes",function(){function e(e){if(null==e)return 0;for(var t=0,r=0;r<e.length;r++)t+=e.charCodeAt(r);return t}function t(){return Math.random().toString(36).substr(2,10).toUpperCase()}return{hash:e,verification:t}})}(),function(){"use strict";var e=angular.module("pipUtils.Collections",[]);e.factory("pipCollections",function(){var e={};return e.indexBy=function(e,t,r){if(!e||!e.length)return null;for(var n=0;n<e.length;n++)if(e[n][t]==r)return n;return null},e.findBy=function(e,t,r){if(!e||!e.length)return null;for(var n=0;n<e.length;n++)if(e[n][t]==r)return e[n];return null},e.remove=function(e,t){if(!e||!e.length)return null;for(var r=0;r<e.length;r++)e[r]==t&&(e.splice(r,1),r--)},e.removeBy=function(e,t,r){if(!e||!e.length)return null;for(var n=0;n<e.length;n++)e[n][t]==r&&(e.splice(n,1),n--)},e.replaceBy=function(e,t,r,n){if(!e||!e.length)return null;for(var i=0;i<e.length;i++)if(e[i][t]==r)return void(e[i]=n)},e.difference=function(e,t,r){var n=[];return _.each(e,function(e){var i=_.find(t,function(t){return r(e,t)});null==i&&n.push(e)}),n},e})}(),function(){"use strict";var e=angular.module("pipFormat",[]);e.factory("pipFormat",function(){function e(e,t){if(!e||""==e)return"";var r=e.indexOf("\n");return r=r>=0?r:e.length,r=r<t?e.length:t,e.substring(0,r)}function t(){function e(e){return toString.call(e).slice(8,-1).toLowerCase()}var r=strRepeat,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,i){var a,o,s,u,l,c,p,f=1,d=n.length,g="",h=[];for(o=0;o<d;o++)if(g=e(n[o]),"string"===g)h.push(n[o]);else if("array"===g){if(u=n[o],u[2])for(a=i[f],s=0;s<u[2].length;s++){if(!a.hasOwnProperty(u[2][s]))throw new Error(t('[_.sprintf] property "%s" does not exist',u[2][s]));a=a[u[2][s]]}else a=u[1]?i[u[1]]:i[f++];if(/[^s]/.test(u[8])&&"number"!=e(a))throw new Error(t("[_.sprintf] expecting number but found %s",e(a)));switch(u[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":a=parseInt(a,10);break;case"e":a=u[7]?a.toExponential(u[7]):a.toExponential();break;case"f":a=u[7]?parseFloat(a).toFixed(u[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&u[7]?a.substring(0,u[7]):a;break;case"u":a=Math.abs(a);break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}a=/[def]/.test(u[8])&&u[3]&&a>=0?"+"+a:a,c=u[4]?"0"==u[4]?"0":u[4].charAt(1):" ",p=u[6]-String(a).length,l=u[6]?r(c,p):"",h.push(u[5]?a+l:l+a)}return h.join("")},n.cache={},n.parse=function(e){for(var t=e,r=[],n=[],i=0;t;){if(null!==(r=/^[^\x25]+/.exec(t)))n.push(r[0]);else if(null!==(r=/^\x25{2}/.exec(t)))n.push("%");else{if(null===(r=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw new Error("[_.sprintf] huh?");if(r[2]){i|=1;var a=[],o=r[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(o)))throw new Error("[_.sprintf] huh?");for(a.push(s[1]);""!==(o=o.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(o)))a.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(o)))throw new Error("[_.sprintf] huh?");a.push(s[1])}r[2]=a}else i|=2;if(3===i)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");n.push(r)}t=t.substring(r[0].length)}return n},n}return result=t,result.sample=e,result.format=t,result.sprintf=t,result})}(),function(){"use strict";var e=angular.module("pipUtils.General",["pipState","pipAssert"]);e.factory("pipUtils",["$rootScope","$window","$state","pipAssert",function(e,t,r,n){function i(e,t,r,n){if(!e||!e.length)return null;for(var i=0;i<e.length;i++)if(e[i][t]==r)return void(e[i]=n)}function a(e){return null==e?"":""+e}function o(e){var t=new RegExp("^[0-9a-fA-F]{24}$");return t.test(e)}function s(e,t){return null==e&&null==t||null!=e&&null!=t&&e.toString()==t.toString()}function u(e,t){return(null!=e||null!=t)&&(null==e||null==t||e.toString()!=t.toString())}function l(e,t){return _.some(e,function(e){return s(e,t)})}function c(e,t,r,n){return _.isObject(t)&&"undefined"==typeof n&&(n=r,r=t,t=n),!!(r[n]||"number"==typeof r[n]&&r[n]%1==0)&&(e[t]=r[n],!0)}function p(e,t,r){var n=e[t],i=e[r];n?e[r]=n:delete e[r],i?e[t]=i:delete e[t]}function f(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function d(e){return _.map(e,function(e){return e?e.toString():0})}Object.prototype.toString;return{copyProperty:c,copy:c,swapProperties:p,swap:p,convertToBoolean:f,toBoolean:f,toBool:f,convertObjectIdsToString:d,OidToString:d,generateVerificationCode:generateVerificationCode,vercode:generateVerificationCode,equalObjectIds:s,eqOid:s,notEqualObjectIds:u,neqOid:u,containsObjectId:l,hasOid:l,isObjectId:o,hashCode:hashCode,makeString:a,replaceBy:i}}])}(),function(){"use strict";var e=angular.module("pipScroll",[]);e.factory("pipScroll",function(){function e(e,t,r){e&&t&&(void 0==r&&(r=300),setTimeout(function(){if($(t).position()){var n=Math.abs($(e).scrollTop()-$(t).position().top);if(!(n<20)){var i=$(e).scrollTop()+($(t).position().top-20);r>0&&$(e).animate({scrollTop:i+"px"},r)}}},100))}return{scrollTo:e}})}(),function(){"use strict";var e=angular.module("pipSystemInfo",[]);e.factory("pipSystemInfo",["$rootScope","$window",function(e,t){function r(){var e=t.navigator.userAgent;return e.search(/Edge/)>-1?"edge":e.search(/MSIE/)>-1?"ie":e.search(/Trident/)>-1?"ie":e.search(/Firefox/)>-1?"firefox":e.search(/Opera/)>-1?"opera":e.search(/OPR/)>-1?"opera":e.search(/YaBrowser/)>-1?"yabrowser":e.search(/Chrome/)>-1?"chrome":e.search(/Safari/)>-1?"safari":e.search(/Maxthon/)>-1?"maxthon":"unknown"}function n(){var e,r,n=t.navigator.userAgent;switch(n.search(/Edge/)>-1&&(e="edge"),n.search(/MSIE/)>-1&&(e="ie"),n.search(/Trident/)>-1&&(e="ie11"),n.search(/Firefox/)>-1&&(e="firefox"),n.search(/Opera/)>-1&&(e="opera"),n.search(/OPR/)>-1&&(e="operaWebkit"),n.search(/YaBrowser/)>-1&&(e="yabrowser"),n.search(/Chrome/)>-1&&(e="chrome"),n.search(/Safari/)>-1&&(e="safari"),n.search(/Maxthon/)>-1&&(e="maxthon"),e){case"edge":r=n.split("Edge")[1].split("/")[1];break;case"ie":r=n.split("MSIE ")[1].split(";")[0];break;case"ie11":e="ie",r=n.split("; rv:")[1].split(")")[0];break;case"firefox":r=n.split("Firefox/")[1];break;case"opera":r=n.split("Version/")[1];break;case"operaWebkit":r=n.split("OPR/")[1];break;case"yabrowser":r=n.split("YaBrowser/")[1].split(" ")[0];break;case"chrome":r=n.split("Chrome/")[1].split(" ")[0];break;case"safari":r=n.split("Version/")[1].split(" ")[0];break;case"maxthon":r=n.split("Maxthon/")[1]}return r}function i(){var e=t.navigator.userAgent;return/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(e.toLowerCase())?"mobile":"desktop"}function a(){return"desktop"==i()}function o(){return"mobile"==i()}function s(){return null}function l(){var e=t.navigator.userAgent;try{var r=(/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(e.toLowerCase())||[u])[0].replace("sunos","solaris"),n=/(android)/.exec(e.toLowerCase())||"";return!n||"android"!=n&&"android"!=n[0]?r:"android"}catch(e){return"unknown"}}function c(e){e||(e={edge:11,ie:11,firefox:43,opera:35,chrome:47});var t=r(),i=n();return i=i.split(".")[0],t&&e[t]&&i>=e[t],!0}return{getBrowserName:r,getBrowserVersion:n,getPlatform:i,isDesktop:a,isMobile:o,isCordova:s,getOS:l,isSupported:c}}])}(),function(){"use strict";var e=angular.module("pipTags",[]);e.factory("pipTags",function(){function e(e){return e?_.trim(e.replace(/(_|#)+/g," ")):null}function t(e){return e?e.replace(/( |_|#)/g,"").toLowerCase():null}function r(e,r){return null==e&&null==r||null!=e&&null!=r&&t(e)==t(r)}function n(t){return _.isString(t)&&(t=t.split(/( |,|;)+/)),t=_.map(t,function(t){return e(t)})}function i(e){return _.isString(e)&&(e=e.split(/( |,|;)+/)),e=_.map(e,function(e){return t(e)})}function a(e,t){var r=n(e.tags);return _.each(t,function(t){var i=e[t]||"";if(""!=i){var a=i.match(/#\w+/g);r=r.concat(n(a))}}),_.uniq(r)}return{equal:r,normalizeOne:e,normalizeAll:n,normalize:n,compressOne:t,compressAll:i,compress:i,extract:a}})}(),function(){"use strict";angular.module("pipUtils",["pipUtils.General","pipUtils.Strings","pipUtils.Collections"])}();